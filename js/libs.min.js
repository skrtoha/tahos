!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(f,e){function a(e){var t=e.length,i=Y.type(e);return"function"!==i&&!Y.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}function t(e,i,s){if(Y.isFunction(i))return Y.grep(e,function(e,t){return!!i.call(e,t,e)!==s});if(i.nodeType)return Y.grep(e,function(e){return e===i!==s});if("string"==typeof i){if(V.test(i))return Y.filter(i,e,s);i=Y.filter(i,e)}return Y.grep(e,function(e){return 0<=M.call(i,e)!==s})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(){X.removeEventListener("DOMContentLoaded",s,!1),f.removeEventListener("load",s,!1),Y.ready()}function n(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Y.expando+n.uid++}function l(e,t,i){var s;if(void 0===i&&1===e.nodeType)if(s="data-"+t.replace(le,"-$1").toLowerCase(),"string"==typeof(i=e.getAttribute(s))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:ae.test(i)?Y.parseJSON(i):i)}catch(e){}re.set(e,t,i)}else i=void 0;return i}function o(){return!0}function c(){return!1}function r(){try{return X.activeElement}catch(e){}}function h(e,t){return Y.nodeName(e,"table")&&Y.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function g(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function m(e){var t=je.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function p(e,t){for(var i=0,s=e.length;i<s;i++)oe.set(e[i],"globalEval",!t||oe.get(t[i],"globalEval"))}function u(e,t){var i,s,n,o,r,a;if(1===t.nodeType){if(oe.hasData(e)&&(o=oe.access(e),r=oe.set(t,o),a=o.events))for(n in delete r.handle,r.events={},a)for(i=0,s=a[n].length;i<s;i++)Y.event.add(t,n,a[n][i]);re.hasData(e)&&(e=re.access(e),e=Y.extend({},e),re.set(t,e))}}function _(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Y.nodeName(e,t)?Y.merge([e],i):i}function d(e,t){var t=Y(t.createElement(e)).appendTo(t.body),i=f.getDefaultComputedStyle&&(i=f.getDefaultComputedStyle(t[0]))?i.display:Y.css(t[0],"display");return t.detach(),i}function v(e){var t=X,i=Le[e];return i||("none"!==(i=d(e,t))&&i||((t=(Te=(Te||Y("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),i=d(e,t),Te.detach()),Le[e]=i),i}function y(e,t,i){var s,n,o=e.style;return(i=i||Ae(e))&&(n=i.getPropertyValue(t)||i[t]),i&&(""!==n||Y.contains(e.ownerDocument,e)||(n=Y.style(e,t)),Pe.test(n)&&Oe.test(t)&&(s=o.width,e=o.minWidth,t=o.maxWidth,o.minWidth=o.maxWidth=o.width=n,n=i.width,o.width=s,o.minWidth=e,o.maxWidth=t)),void 0!==n?n+"":n}function w(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function b(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),s=t,n=qe.length;n--;)if((t=qe[n]+i)in e)return t;return s}function x(e,t,i){var s=De.exec(t);return s?Math.max(0,s[1]-(i||0))+(s[2]||"px"):t}function k(e,t,i,s,n){for(var o=i===(s?"border":"content")?4:"width"===t?1:0,r=0;o<4;o+=2)"margin"===i&&(r+=Y.css(e,i+de[o],!0,n)),s?("content"===i&&(r-=Y.css(e,"padding"+de[o],!0,n)),"margin"!==i&&(r-=Y.css(e,"border"+de[o]+"Width",!0,n))):(r+=Y.css(e,"padding"+de[o],!0,n),"padding"!==i&&(r+=Y.css(e,"border"+de[o]+"Width",!0,n)));return r}function j(e,t,i){var s=!0,n="width"===t?e.offsetWidth:e.offsetHeight,o=Ae(e),r="border-box"===Y.css(e,"boxSizing",!1,o);if(n<=0||null==n){if(((n=y(e,t,o))<0||null==n)&&(n=e.style[t]),Pe.test(n))return n;s=r&&(B.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+k(e,t,i||(r?"border":"content"),s,o)+"px"}function C(e,t){for(var i,s,n,o=[],r=0,a=e.length;r<a;r++)(s=e[r]).style&&(o[r]=oe.get(s,"olddisplay"),i=s.style.display,t?(o[r]||"none"!==i||(s.style.display=""),""===s.style.display&&ce(s)&&(o[r]=oe.access(s,"olddisplay",v(s.nodeName)))):(n=ce(s),"none"===i&&n||oe.set(s,"olddisplay",n?i:Y.css(s,"display"))));for(r=0;r<a;r++)(s=e[r]).style&&(t&&"none"!==s.style.display&&""!==s.style.display||(s.style.display=t?o[r]||"":"none"));return e}function T(e,t,i,s,n){return new T.prototype.init(e,t,i,s,n)}function z(){return setTimeout(function(){Re=void 0}),Re=Y.now()}function S(e,t){var i,s=0,n={height:e};for(t=t?1:0;s<4;s+=2-t)n["margin"+(i=de[s])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function W(e,t,i){for(var s,n=(Ue[t]||[]).concat(Ue["*"]),o=0,r=n.length;o<r;o++)if(s=n[o].call(i,t,e))return s}function $(n,e,t){var i,o,s=0,r=Ze.length,a=Y.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=Re||z(),e=Math.max(0,c.startTime+c.duration-e),t=1-(e/c.duration||0),i=0,s=c.tweens.length;i<s;i++)c.tweens[i].run(t);return a.notifyWith(n,[c,t,e]),t<1&&s?e:(a.resolveWith(n,[c]),!1)},c=a.promise({elem:n,props:Y.extend({},e),opts:Y.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:Re||z(),duration:t.duration,tweens:[],createTween:function(e,t){e=Y.Tween(n,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(e),e},stop:function(e){var t=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;t<i;t++)c.tweens[t].run(1);return e?a.resolveWith(n,[c,e]):a.rejectWith(n,[c,e]),this}}),h=c.props;for(function(e,t){var i,s,n,o,r;for(i in e)if(s=Y.camelCase(i),n=t[s],o=e[i],Y.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==s&&(e[s]=o,delete e[i]),(r=Y.cssHooks[s])&&"expand"in r)for(i in o=r.expand(o),delete e[s],o)i in e||(e[i]=o[i],t[i]=n);else t[s]=n}(h,c.opts.specialEasing);s<r;s++)if(i=Ze[s].call(c,n,h,c.opts))return i;return Y.map(h,W,c),Y.isFunction(c.opts.start)&&c.opts.start.call(n,c),Y.fx.timer(Y.extend(l,{elem:n,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function E(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,s=0,n=e.toLowerCase().match(ie)||[];if(Y.isFunction(t))for(;i=n[s++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function L(t,s,n,o){function r(e){var i;return a[e]=!0,Y.each(t[e]||[],function(e,t){t=t(s,n,o);return"string"!=typeof t||l||a[t]?l?!(i=t):void 0:(s.dataTypes.unshift(t),r(t),!1)}),i}var a={},l=t===at;return r(s.dataTypes[0])||!a["*"]&&r("*")}function O(e,t){var i,s,n=Y.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:s=s||{})[i]=t[i]);return s&&Y.extend(!0,e,s),e}function P(e){return Y.isWindow(e)?e:9===e.nodeType&&e.defaultView}function A(e,t){return t.toUpperCase()}var N=[],H=N.slice,D=N.concat,I=N.push,M=N.indexOf,F={},q=F.toString,R=F.hasOwnProperty,B={},X=f.document,Y=function(e,t){return new Y.fn.init(e,t)};Y.fn=Y.prototype={jquery:"2.1.3",constructor:Y,selector:"",length:0,toArray:function(){return H.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:H.call(this)},pushStack:function(e){e=Y.merge(this.constructor(),e);return e.prevObject=this,e.context=this.context,e},each:function(e,t){return Y.each(this,e,t)},map:function(i){return this.pushStack(Y.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(H.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:I,sort:N.sort,splice:N.splice},Y.extend=Y.fn.extend=function(){var e,t,i,s,n,o=arguments[0]||{},r=1,a=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[r]||{},r++),"object"==typeof o||Y.isFunction(o)||(o={}),r===a&&(o=this,r--);r<a;r++)if(null!=(e=arguments[r]))for(t in e)n=o[t],i=e[t],o!==i&&(l&&i&&(Y.isPlainObject(i)||(s=Y.isArray(i)))?(n=s?(s=!1,n&&Y.isArray(n)?n:[]):n&&Y.isPlainObject(n)?n:{},o[t]=Y.extend(l,n,i)):void 0!==i&&(o[t]=i));return o},Y.extend({expando:"jQuery"+("2.1.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Y.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Y.isArray(e)&&0<=e-parseFloat(e)+1},isPlainObject:function(e){return!("object"!==Y.type(e)||e.nodeType||Y.isWindow(e)||e.constructor&&!R.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){for(var t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?F[q.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;(e=Y.trim(e))&&(1===e.indexOf("use strict")?((t=X.createElement("script")).text=e,X.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,A)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var s=0,n=e.length,o=a(e);if(i){if(o)for(;s<n&&!1!==t.apply(e[s],i);s++);else for(s in e)if(!1===t.apply(e[s],i))break}else if(o)for(;s<n&&!1!==t.call(e[s],s,e[s]);s++);else for(s in e)if(!1===t.call(e[s],s,e[s]))break;return e},trim:function(e){return null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(e,t){t=t||[];return null!=e&&(a(Object(e))?Y.merge(t,"string"==typeof e?[e]:e):I.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:M.call(t,e,i)},merge:function(e,t){for(var i=+t.length,s=0,n=e.length;s<i;s++)e[n++]=t[s];return e.length=n,e},grep:function(e,t,i){for(var s=[],n=0,o=e.length,r=!i;n<o;n++)!t(e[n],n)!=r&&s.push(e[n]);return s},map:function(e,t,i){var s,n=0,o=e.length,r=[];if(a(e))for(;n<o;n++)null!=(s=t(e[n],n,i))&&r.push(s);else for(n in e)null!=(s=t(e[n],n,i))&&r.push(s);return D.apply([],r)},guid:1,proxy:function(e,t){var i,s;return"string"==typeof t&&(s=e[t],t=e,e=s),Y.isFunction(e)?(i=H.call(arguments,2),(s=function(){return e.apply(t||this,i.concat(H.call(arguments)))}).guid=e.guid=e.guid||Y.guid++,s):void 0},now:Date.now,support:B}),Y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){F["[object "+t+"]"]=t.toLowerCase()});var K=function(i){function w(e,t,i,s){var n,o,r,a,l,c,h,d,u;if((t?t.ownerDocument||t:D)!==$&&W(t),i=i||[],r=(t=t||$).nodeType,"string"!=typeof e||!e||1!==r&&9!==r&&11!==r)return i;if(!s&&L){if(11!==r&&(n=ge.exec(e)))if(c=n[1]){if(9===r){if(!(o=t.getElementById(c))||!o.parentNode)return i;if(o.id===c)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(c))&&N(t,o)&&o.id===c)return i.push(o),i}else{if(n[2])return U.apply(i,t.getElementsByTagName(e)),i;if((c=n[3])&&m.getElementsByClassName)return U.apply(i,t.getElementsByClassName(c)),i}if(m.qsa&&(!O||!O.test(e))){if(h=c=H,d=t,u=1!==r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(c=t.getAttribute("id"))?h=c.replace(_e,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",a=l.length;a--;)l[a]=h+f(l[a]);d=me.test(e)&&p(t.parentNode)||t,u=l.join(",")}if(u)try{return U.apply(i,d.querySelectorAll(u)),i}catch(e){}finally{c||t.removeAttribute("id")}}}return C(e.replace(oe,"$1"),t,i,s)}function e(){function i(e,t){return s.push(e+" ")>x.cacheLength&&delete i[s.shift()],i[e+" "]=t}var s=[];return i}function l(e){return e[H]=!0,e}function t(e){var t=$.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var i=e.split("|"),s=e.length;s--;)x.attrHandle[i[s]]=t}function c(e,t){var i=t&&e,s=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(s)return s;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function n(r){return l(function(o){return o=+o,l(function(e,t){for(var i,s=r([],e.length,o),n=s.length;n--;)e[i=s[n]]&&(e[i]=!(t[i]=e[i]))})})}function p(e){return e&&void 0!==e.getElementsByTagName&&e}function o(){}function f(e){for(var t=0,i=e.length,s="";t<i;t++)s+=e[t].value;return s}function u(r,e,t){var a=e.dir,l=t&&"parentNode"===a,c=M++;return e.first?function(e,t,i){for(;e=e[a];)if(1===e.nodeType||l)return r(e,t,i)}:function(e,t,i){var s,n,o=[I,c];if(i){for(;e=e[a];)if((1===e.nodeType||l)&&r(e,t,i))return!0}else for(;e=e[a];)if(1===e.nodeType||l){if((s=(n=e[H]||(e[H]={}))[a])&&s[0]===I&&s[1]===c)return o[2]=s[2];if((n[a]=o)[2]=r(e,t,i))return!0}}}function g(n){return 1<n.length?function(e,t,i){for(var s=n.length;s--;)if(!n[s](e,t,i))return!1;return!0}:n[0]}function b(e,t,i,s,n){for(var o,r=[],a=0,l=e.length,c=null!=t;a<l;a++)!(o=e[a])||i&&!i(o,s,n)||(r.push(o),c&&t.push(a));return r}function v(p,f,g,m,_,e){return m&&!m[H]&&(m=v(m)),_&&!_[H]&&(_=v(_,e)),l(function(e,t,i,s){var n,o,r,a=[],l=[],c=t.length,h=e||function(e,t,i){for(var s=0,n=t.length;s<n;s++)w(e,t[s],i);return i}(f||"*",i.nodeType?[i]:i,[]),d=!p||!e&&f?h:b(h,a,p,i,s),u=g?_||(e?p:c||m)?[]:t:d;if(g&&g(d,u,i,s),m)for(n=b(u,l),m(n,[],i,s),o=n.length;o--;)(r=n[o])&&(u[l[o]]=!(d[l[o]]=r));if(e){if(_||p){if(_){for(n=[],o=u.length;o--;)(r=u[o])&&n.push(d[o]=r);_(null,u=[],n,s)}for(o=u.length;o--;)(r=u[o])&&-1<(n=_?G(e,r):a[o])&&(e[n]=!(t[n]=r))}}else u=b(u===t?u.splice(c,u.length):u),_?_(null,t,u,s):U.apply(t,u)})}function r(m,_){function e(e,t,i,s,n){var o,r,a,l=0,c="0",h=e&&[],d=[],u=T,p=e||y&&x.find.TAG("*",n),f=I+=null==u?1:Math.random()||.1,g=p.length;for(n&&(T=t!==$&&t);c!==g&&null!=(o=p[c]);c++){if(y&&o){for(r=0;a=m[r++];)if(a(o,t,i)){s.push(o);break}n&&(I=f)}v&&((o=!a&&o)&&l--,e&&h.push(o))}if(l+=c,v&&c!==l){for(r=0;a=_[r++];)a(h,d,t,i);if(e){if(0<l)for(;c--;)h[c]||d[c]||(d[c]=K.call(s));d=b(d)}U.apply(s,d),n&&!e&&0<d.length&&1<l+_.length&&w.uniqueSort(s)}return n&&(I=f,T=u),h}var v=0<_.length,y=0<m.length;return v?l(e):e}function d(e,t,i){var s="0x"+t-65536;return s!=s||i?t:s<0?String.fromCharCode(65536+s):String.fromCharCode(s>>10|55296,1023&s|56320)}function a(){W()}var h,m,x,_,y,k,j,C,T,z,S,W,$,E,L,O,P,A,N,H="sizzle"+ +new Date,D=i.document,I=0,M=0,F=e(),q=e(),R=e(),B=function(e,t){return e===t&&(S=!0),0},X={}.hasOwnProperty,Y=[],K=Y.pop,Z=Y.push,U=Y.push,V=Y.slice,G=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",te=ee.replace("w","w#"),ie="\\["+Q+"*("+ee+")(?:"+Q+"*([*^$|!~]?=)"+Q+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+Q+"*\\]",se=":("+ee+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ne=new RegExp(Q+"+","g"),oe=new RegExp("^"+Q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Q+"+$","g"),re=new RegExp("^"+Q+"*,"+Q+"*"),ae=new RegExp("^"+Q+"*([>+~]|"+Q+")"+Q+"*"),le=new RegExp("="+Q+"*([^\\]'\"]*?)"+Q+"*\\]","g"),ce=new RegExp(se),he=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+ee+")"),CLASS:new RegExp("^\\.("+ee+")"),TAG:new RegExp("^("+ee.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Q+"*(even|odd|(([+-]|)(\\d*)n|)"+Q+"*(?:([+-]|)"+Q+"*(\\d+)|))"+Q+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+Q+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Q+"*((?:-\\d)?\\d*)"+Q+"*\\)|)(?=[^-]|$)","i")},ue=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/[+~]/,_e=/'|\\/g,ve=new RegExp("\\\\([\\da-f]{1,6}"+Q+"?|("+Q+")|.)","ig");try{U.apply(Y=V.call(D.childNodes),D.childNodes),Y[D.childNodes.length].nodeType}catch(i){U={apply:Y.length?function(e,t){Z.apply(e,V.call(t))}:function(e,t){for(var i=e.length,s=0;e[i++]=t[s++];);e.length=i-1}}}for(h in m=w.support={},y=w.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},W=w.setDocument=function(e){var l=e?e.ownerDocument||e:D;return l!==$&&9===l.nodeType&&l.documentElement?(E=($=l).documentElement,(e=l.defaultView)&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",a,!1):e.attachEvent&&e.attachEvent("onunload",a)),L=!y(l),m.attributes=t(function(e){return e.className="i",!e.getAttribute("className")}),m.getElementsByTagName=t(function(e){return e.appendChild(l.createComment("")),!e.getElementsByTagName("*").length}),m.getElementsByClassName=fe.test(l.getElementsByClassName),m.getById=t(function(e){return E.appendChild(e).id=H,!l.getElementsByName||!l.getElementsByName(H).length}),m.getById?(x.find.ID=function(e,t){if(void 0!==t.getElementById&&L){e=t.getElementById(e);return e&&e.parentNode?[e]:[]}},x.filter.ID=function(e){var t=e.replace(ve,d);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(ve,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}}),x.find.TAG=m.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):m.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,s=[],n=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;i=o[n++];)1===i.nodeType&&s.push(i);return s},x.find.CLASS=m.getElementsByClassName&&function(e,t){return L?t.getElementsByClassName(e):void 0},P=[],O=[],(m.qsa=fe.test(l.querySelectorAll))&&(t(function(e){E.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+Q+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+Q+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+H+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||O.push(".#.+[+~]")}),t(function(e){var t=l.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+Q+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(m.matchesSelector=fe.test(A=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&t(function(e){m.disconnectedMatch=A.call(e,"div"),A.call(e,"[s!='']:x"),P.push("!=",se)}),O=O.length&&new RegExp(O.join("|")),P=P.length&&new RegExp(P.join("|")),e=fe.test(E.compareDocumentPosition),N=e||fe.test(E.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=e?function(e,t){if(e===t)return S=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!m.sortDetached&&t.compareDocumentPosition(e)===i?e===l||e.ownerDocument===D&&N(D,e)?-1:t===l||t.ownerDocument===D&&N(D,t)?1:z?G(z,e)-G(z,t):0:4&i?-1:1)}:function(e,t){if(e===t)return S=!0,0;var i,s=0,n=e.parentNode,o=t.parentNode,r=[e],a=[t];if(!n||!o)return e===l?-1:t===l?1:n?-1:o?1:z?G(z,e)-G(z,t):0;if(n===o)return c(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;r[s]===a[s];)s++;return s?c(r[s],a[s]):r[s]===D?-1:a[s]===D?1:0},l):$},w.matches=function(e,t){return w(e,null,null,t)},w.matchesSelector=function(e,t){if((e.ownerDocument||e)!==$&&W(e),t=t.replace(le,"='$1']"),!(!m.matchesSelector||!L||P&&P.test(t)||O&&O.test(t)))try{var i=A.call(e,t);if(i||m.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<w(t,$,null,[e]).length},w.contains=function(e,t){return(e.ownerDocument||e)!==$&&W(e),N(e,t)},w.attr=function(e,t){(e.ownerDocument||e)!==$&&W(e);var i=x.attrHandle[t.toLowerCase()],i=i&&X.call(x.attrHandle,t.toLowerCase())?i(e,t,!L):void 0;return void 0!==i?i:m.attributes||!L?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},w.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},w.uniqueSort=function(e){var t,i=[],s=0,n=0;if(S=!m.detectDuplicates,z=!m.sortStable&&e.slice(0),e.sort(B),S){for(;t=e[n++];)t===e[n]&&(s=i.push(n));for(;s--;)e.splice(i[s],1)}return z=null,e},_=w.getText=function(e){var t,i="",s=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=_(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[s++];)i+=_(t);return i},(x=w.selectors={cacheLength:50,createPseudo:l,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,d),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||w.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&w.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ce.test(i)&&(t=k(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+Q+")"+e+"("+Q+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,s){return function(e){e=w.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===s:"!="===i?e!==s:"^="===i?s&&0===e.indexOf(s):"*="===i?s&&-1<e.indexOf(s):"$="===i?s&&e.slice(-s.length)===s:"~="===i?-1<(" "+e.replace(ne," ")+" ").indexOf(s):"|="===i&&(e===s||e.slice(0,s.length+1)===s+"-"))}},CHILD:function(p,e,t,f,g){var m="nth"!==p.slice(0,3),_="last"!==p.slice(-4),v="of-type"===e;return 1===f&&0===g?function(e){return!!e.parentNode}:function(e,t,i){var s,n,o,r,a,l,c=m!=_?"nextSibling":"previousSibling",h=e.parentNode,d=v&&e.nodeName.toLowerCase(),u=!i&&!v;if(h){if(m){for(;c;){for(o=e;o=o[c];)if(v?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[_?h.firstChild:h.lastChild],_&&u){for(a=(s=(n=h[H]||(h[H]={}))[p]||[])[0]===I&&s[1],r=s[0]===I&&s[2],o=a&&h.childNodes[a];o=++a&&o&&o[c]||(r=a=0)||l.pop();)if(1===o.nodeType&&++r&&o===e){n[p]=[I,a,r];break}}else if(u&&(s=(e[H]||(e[H]={}))[p])&&s[0]===I)r=s[1];else for(;(o=++a&&o&&o[c]||(r=a=0)||l.pop())&&((v?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++r||(u&&((o[H]||(o[H]={}))[p]=[I,r]),o!==e)););return(r-=g)===f||r%f==0&&0<=r/f}}},PSEUDO:function(e,o){var t,r=x.pseudos[e]||x.setFilters[e.toLowerCase()]||w.error("unsupported pseudo: "+e);return r[H]?r(o):1<r.length?(t=[e,e,"",o],x.setFilters.hasOwnProperty(e.toLowerCase())?l(function(e,t){for(var i,s=r(e,o),n=s.length;n--;)e[i=G(e,s[n])]=!(t[i]=s[n])}):function(e){return r(e,0,t)}):r}},pseudos:{not:l(function(e){var s=[],n=[],a=j(e.replace(oe,"$1"));return a[H]?l(function(e,t,i,s){for(var n,o=a(e,null,s,[]),r=e.length;r--;)(n=o[r])&&(e[r]=!(t[r]=n))}):function(e,t,i){return s[0]=e,a(s,null,i,n),s[0]=null,!n.pop()}}),has:l(function(t){return function(e){return 0<w(t,e).length}}),contains:l(function(t){return t=t.replace(ve,d),function(e){return-1<(e.textContent||e.innerText||_(e)).indexOf(t)}}),lang:l(function(i){return he.test(i||"")||w.error("unsupported lang: "+i),i=i.replace(ve,d).toLowerCase(),function(e){var t;do{if(t=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===E},focus:function(e){return e===$.activeElement&&(!$.hasFocus||$.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return ue.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:n(function(){return[0]}),last:n(function(e,t){return[t-1]}),eq:n(function(e,t,i){return[i<0?i+t:i]}),even:n(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:n(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:n(function(e,t,i){for(var s=i<0?i+t:i;0<=--s;)e.push(s);return e}),gt:n(function(e,t,i){for(var s=i<0?i+t:i;++s<t;)e.push(s);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[h]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(h);for(h in{submit:!0,reset:!0})x.pseudos[h]=function(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}(h);return o.prototype=x.filters=x.pseudos,x.setFilters=new o,k=w.tokenize=function(e,t){var i,s,n,o,r,a,l,c=q[e+" "];if(c)return t?0:c.slice(0);for(r=e,a=[],l=x.preFilter;r;){for(o in i&&!(s=re.exec(r))||(s&&(r=r.slice(s[0].length)||r),a.push(n=[])),i=!1,(s=ae.exec(r))&&(i=s.shift(),n.push({value:i,type:s[0].replace(oe," ")}),r=r.slice(i.length)),x.filter)!(s=de[o].exec(r))||l[o]&&!(s=l[o](s))||(i=s.shift(),n.push({value:i,type:o,matches:s}),r=r.slice(i.length));if(!i)break}return t?r.length:r?w.error(e):q(e,a).slice(0)},j=w.compile=function(e,t){var i,s=[],n=[],o=R[e+" "];if(!o){for(i=(t=t||k(e)).length;i--;)((o=function e(t){for(var s,i,n,o=t.length,r=x.relative[t[0].type],a=r||x.relative[" "],l=r?1:0,c=u(function(e){return e===s},a,!0),h=u(function(e){return-1<G(s,e)},a,!0),d=[function(e,t,i){return i=!r&&(i||t!==T)||((s=t).nodeType?c:h)(e,t,i),s=null,i}];l<o;l++)if(i=x.relative[t[l].type])d=[u(g(d),i)];else{if((i=x.filter[t[l].type].apply(null,t[l].matches))[H]){for(n=++l;n<o&&!x.relative[t[n].type];n++);return v(1<l&&g(d),1<l&&f(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(oe,"$1"),i,l<n&&e(t.slice(l,n)),n<o&&e(t=t.slice(n)),n<o&&f(t))}d.push(i)}return g(d)}(t[i]))[H]?s:n).push(o);(o=R(e,r(n,s))).selector=e}return o},C=w.select=function(e,t,i,s){var n,o,r,a,l,c="function"==typeof e&&e,h=!s&&k(e=c.selector||e);if(i=i||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(r=o[0]).type&&m.getById&&9===t.nodeType&&L&&x.relative[o[1].type]){if(!(t=(x.find.ID(r.matches[0].replace(ve,d),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(n=de.needsContext.test(e)?0:o.length;n--&&(r=o[n],!x.relative[a=r.type]);)if((l=x.find[a])&&(s=l(r.matches[0].replace(ve,d),me.test(o[0].type)&&p(t.parentNode)||t))){if(o.splice(n,1),!(e=s.length&&f(o)))return U.apply(i,s),i;break}}return(c||j(e,h))(s,t,!L,i,me.test(e)&&p(t.parentNode)||t),i},m.sortStable=H.split("").sort(B).join("")===H,m.detectDuplicates=!!S,W(),m.sortDetached=t(function(e){return 1&e.compareDocumentPosition($.createElement("div"))}),t(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),m.attributes&&t(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),t(function(e){return null==e.getAttribute("disabled")})||s(J,function(e,t,i){return i?void 0:!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),w}(f);Y.find=K,Y.expr=K.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=K.uniqueSort,Y.text=K.getText,Y.isXMLDoc=K.isXML,Y.contains=K.contains;var Z=Y.expr.match.needsContext,U=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,V=/^.[^:#\[\.,]*$/;Y.filter=function(e,t,i){var s=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===s.nodeType?Y.find.matchesSelector(s,e)?[s]:[]:Y.find.matches(e,Y.grep(t,function(e){return 1===e.nodeType}))},Y.fn.extend({find:function(e){var t,i=this.length,s=[],n=this;if("string"!=typeof e)return this.pushStack(Y(e).filter(function(){for(t=0;t<i;t++)if(Y.contains(n[t],this))return!0}));for(t=0;t<i;t++)Y.find(e,n[t],s);return(s=this.pushStack(1<i?Y.unique(s):s)).selector=this.selector?this.selector+" "+e:e,s},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&Z.test(e)?Y(e):e||[],!1).length}});var G,J=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(Y.fn.init=function(e,t){var i,s;if(!e)return this;if("string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):Y.isFunction(e)?void 0!==G.ready?G.ready(e):e(Y):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Y.makeArray(e,this));if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:J.exec(e))||!i[1]&&t)return(!t||t.jquery?t||G:this.constructor(t)).find(e);if(i[1]){if(t=t instanceof Y?t[0]:t,Y.merge(this,Y.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),U.test(i[1])&&Y.isPlainObject(t))for(i in t)Y.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(s=X.getElementById(i[2]))&&s.parentNode&&(this.length=1,this[0]=s),this.context=X,this.selector=e,this}).prototype=Y.fn,G=Y(X);var Q=/^(?:parents|prev(?:Until|All))/,ee={children:!0,contents:!0,next:!0,prev:!0};Y.extend({dir:function(e,t,i){for(var s=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&Y(e).is(i))break;s.push(e)}return s},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),Y.fn.extend({has:function(e){var t=Y(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(Y.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,s=0,n=this.length,o=[],r=Z.test(e)||"string"!=typeof e?Y(e,t||this.context):0;s<n;s++)for(i=this[s];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?-1<r.index(i):1===i.nodeType&&Y.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?Y.unique(o):o)},index:function(e){return e?"string"==typeof e?M.call(Y(e),this[0]):M.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Y.unique(Y.merge(this.get(),Y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Y.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return Y.dir(e,"parentNode")},parentsUntil:function(e,t,i){return Y.dir(e,"parentNode",i)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Y.dir(e,"nextSibling")},prevAll:function(e){return Y.dir(e,"previousSibling")},nextUntil:function(e,t,i){return Y.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return Y.dir(e,"previousSibling",i)},siblings:function(e){return Y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Y.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Y.merge([],e.childNodes)}},function(s,n){Y.fn[s]=function(e,t){var i=Y.map(this,n,e);return"Until"!==s.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=Y.filter(t,i)),1<this.length&&(ee[s]||Y.unique(i),Q.test(s)&&i.reverse()),this.pushStack(i)}});var te,ie=/\S+/g,se={};Y.Callbacks=function(n){var e,i;n="string"==typeof n?se[n]||(i=se[e=n]={},Y.each(e.match(ie)||[],function(e,t){i[t]=!0}),i):Y.extend({},n);var t,s,o,r,a,l,c=[],h=!n.once&&[],d=function(e){for(t=n.memory&&e,s=!0,l=r||0,r=0,a=c.length,o=!0;c&&l<a;l++)if(!1===c[l].apply(e[0],e[1])&&n.stopOnFalse){t=!1;break}o=!1,c&&(h?h.length&&d(h.shift()):t?c=[]:u.disable())},u={add:function(){var e;return c&&(e=c.length,function s(e){Y.each(e,function(e,t){var i=Y.type(t);"function"===i?n.unique&&u.has(t)||c.push(t):t&&t.length&&"string"!==i&&s(t)})}(arguments),o?a=c.length:t&&(r=e,d(t))),this},remove:function(){return c&&Y.each(arguments,function(e,t){for(var i;-1<(i=Y.inArray(t,c,i));)c.splice(i,1),o&&(i<=a&&a--,i<=l&&l--)}),this},has:function(e){return e?-1<Y.inArray(e,c):!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=h=t=void 0,this},disabled:function(){return!c},lock:function(){return h=void 0,t||u.disable(),this},locked:function(){return!h},fireWith:function(e,t){return!c||s&&!h||(t=[e,(t=t||[]).slice?t.slice():t],o?h.push(t):d(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!s}};return u},Y.extend({Deferred:function(e){var o=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var n=arguments;return Y.Deferred(function(s){Y.each(o,function(e,t){var i=Y.isFunction(n[e])&&n[e];a[t[1]](function(){var e=i&&i.apply(this,arguments);e&&Y.isFunction(e.promise)?e.promise().done(s.resolve).fail(s.reject).progress(s.notify):s[t[0]+"With"](this===r?s.promise():this,i?[e]:arguments)})}),n=null}).promise()},promise:function(e){return null!=e?Y.extend(e,r):r}},a={};return r.pipe=r.then,Y.each(o,function(e,t){var i=t[2],s=t[3];r[t[1]]=i.add,s&&i.add(function(){n=s},o[1^e][2].disable,o[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?r:this,arguments),this},a[t[0]+"With"]=i.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(e){function t(t,i,s){return function(e){i[t]=this,s[t]=1<arguments.length?H.call(arguments):e,s===n?c.notifyWith(i,s):--l||c.resolveWith(i,s)}}var n,i,s,o=0,r=H.call(arguments),a=r.length,l=1!==a||e&&Y.isFunction(e.promise)?a:0,c=1===l?e:Y.Deferred();if(1<a)for(n=new Array(a),i=new Array(a),s=new Array(a);o<a;o++)r[o]&&Y.isFunction(r[o].promise)?r[o].promise().done(t(o,s,r)).fail(c.reject).progress(t(o,i,n)):--l;return l||c.resolveWith(s,r),c.promise()}}),Y.fn.ready=function(e){return Y.ready.promise().done(e),this},Y.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Y.readyWait++:Y.ready(!0)},ready:function(e){(!0===e?--Y.readyWait:Y.isReady)||((Y.isReady=!0)!==e&&0<--Y.readyWait||(te.resolveWith(X,[Y]),Y.fn.triggerHandler&&(Y(X).triggerHandler("ready"),Y(X).off("ready"))))}}),Y.ready.promise=function(e){return te||(te=Y.Deferred(),"complete"===X.readyState?setTimeout(Y.ready):(X.addEventListener("DOMContentLoaded",s,!1),f.addEventListener("load",s,!1))),te.promise(e)},Y.ready.promise();var ne=Y.access=function(e,t,i,s,n,o,r){var a=0,l=e.length,c=null==i;if("object"===Y.type(i))for(a in n=!0,i)Y.access(e,t,a,i[a],!0,o,r);else if(void 0!==s&&(n=!0,Y.isFunction(s)||(r=!0),c&&(t=r?(t.call(e,s),null):(c=t,function(e,t,i){return c.call(Y(e),i)})),t))for(;a<l;a++)t(e[a],i,r?s:s.call(e[a],a,t(e[a],i)));return n?e:c?t.call(e):l?t(e[0],i):o};Y.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},n.uid=1,n.accepts=Y.acceptData,n.prototype={key:function(t){if(!n.accepts(t))return 0;var i={},s=t[this.expando];if(!s){s=n.uid++;try{i[this.expando]={value:s},Object.defineProperties(t,i)}catch(e){i[this.expando]=s,Y.extend(t,i)}}return this.cache[s]||(this.cache[s]={}),s},set:function(e,t,i){var s,e=this.key(e),n=this.cache[e];if("string"==typeof t)n[t]=i;else if(Y.isEmptyObject(n))Y.extend(this.cache[e],t);else for(s in t)n[s]=t[s];return n},get:function(e,t){e=this.cache[this.key(e)];return void 0===t?e:e[t]},access:function(e,t,i){var s;return void 0===t||t&&"string"==typeof t&&void 0===i?void 0!==(s=this.get(e,t))?s:this.get(e,Y.camelCase(t)):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,s,e=this.key(e),n=this.cache[e];if(void 0===t)this.cache[e]={};else{i=(s=Y.isArray(t)?t.concat(t.map(Y.camelCase)):(e=Y.camelCase(t),t in n?[t,e]:(s=e)in n?[s]:s.match(ie)||[])).length;for(;i--;)delete n[s[i]]}},hasData:function(e){return!Y.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var oe=new n,re=new n,ae=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,le=/([A-Z])/g;Y.extend({hasData:function(e){return re.hasData(e)||oe.hasData(e)},data:function(e,t,i){return re.access(e,t,i)},removeData:function(e,t){re.remove(e,t)},_data:function(e,t,i){return oe.access(e,t,i)},_removeData:function(e,t){oe.remove(e,t)}}),Y.fn.extend({data:function(s,e){var t,i,n,o=this[0],r=o&&o.attributes;if(void 0!==s)return"object"==typeof s?this.each(function(){re.set(this,s)}):ne(this,function(t){var e,i=Y.camelCase(s);if(o&&void 0===t)return void 0!==(e=re.get(o,s))||void 0!==(e=re.get(o,i))||void 0!==(e=l(o,i,void 0))?e:void 0;this.each(function(){var e=re.get(this,i);re.set(this,i,t),-1!==s.indexOf("-")&&void 0!==e&&re.set(this,s,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(n=re.get(o),1===o.nodeType&&!oe.get(o,"hasDataAttrs"))){for(t=r.length;t--;)r[t]&&(0===(i=r[t].name).indexOf("data-")&&(i=Y.camelCase(i.slice(5)),l(o,i,n[i])));oe.set(o,"hasDataAttrs",!0)}return n},removeData:function(e){return this.each(function(){re.remove(this,e)})}}),Y.extend({queue:function(e,t,i){var s;return e?(t=(t||"fx")+"queue",s=oe.get(e,t),i&&(!s||Y.isArray(i)?s=oe.access(e,t,Y.makeArray(i)):s.push(i)),s||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=Y.queue(e,t),s=i.length,n=i.shift(),o=Y._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,function(){Y.dequeue(e,t)},o)),!s&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return oe.get(e,i)||oe.access(e,i,{empty:Y.Callbacks("once memory").add(function(){oe.remove(e,[t+"queue",i])})})}}),Y.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?Y.queue(this[0],t):void 0===i?this:this.each(function(){var e=Y.queue(this,t,i);Y._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&Y.dequeue(this,t)})},dequeue:function(e){return this.each(function(){Y.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--n||o.resolveWith(r,[r])}var s,n=1,o=Y.Deferred(),r=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(s=oe.get(r[a],e+"queueHooks"))&&s.empty&&(n++,s.empty.add(i));return i(),o.promise(t)}});function ce(e,t){return e=t||e,"none"===Y.css(e,"display")||!Y.contains(e.ownerDocument,e)}var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=["Top","Right","Bottom","Left"],ue=/^(?:checkbox|radio)$/i;N=X.createDocumentFragment().appendChild(X.createElement("div")),(K=X.createElement("input")).setAttribute("type","radio"),K.setAttribute("checked","checked"),K.setAttribute("name","t"),N.appendChild(K),B.checkClone=N.cloneNode(!0).cloneNode(!0).lastChild.checked,N.innerHTML="<textarea>x</textarea>",B.noCloneChecked=!!N.cloneNode(!0).lastChild.defaultValue;var pe="undefined";B.focusinBubbles="onfocusin"in f;var fe=/^key/,ge=/^(?:mouse|pointer|contextmenu)|click/,me=/^(?:focusinfocus|focusoutblur)$/,_e=/^([^.]*)(?:\.(.+)|)$/;Y.event={global:{},add:function(t,e,i,s,n){var o,r,a,l,c,h,d,u,p,f=oe.get(t);if(f)for(i.handler&&(i=(o=i).handler,n=o.selector),i.guid||(i.guid=Y.guid++),(a=f.events)||(a=f.events={}),(r=f.handle)||(r=f.handle=function(e){return typeof Y!=pe&&Y.event.triggered!==e.type?Y.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(ie)||[""]).length;l--;)d=p=(c=_e.exec(e[l])||[])[1],u=(c[2]||"").split(".").sort(),d&&(h=Y.event.special[d]||{},d=(n?h.delegateType:h.bindType)||d,h=Y.event.special[d]||{},c=Y.extend({type:d,origType:p,data:s,handler:i,guid:i.guid,selector:n,needsContext:n&&Y.expr.match.needsContext.test(n),namespace:u.join(".")},o),(p=a[d])||((p=a[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,s,u,r)||t.addEventListener&&t.addEventListener(d,r,!1)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),n?p.splice(p.delegateCount++,0,c):p.push(c),Y.event.global[d]=!0)},remove:function(e,t,i,s,n){var o,r,a,l,c,h,d,u,p,f,g,m=oe.hasData(e)&&oe.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(ie)||[""]).length;c--;)if(p=g=(a=_e.exec(t[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=Y.event.special[p]||{},u=l[p=(s?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=u.length;o--;)h=u[o],!n&&g!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||s&&s!==h.selector&&("**"!==s||!h.selector)||(u.splice(o,1),h.selector&&u.delegateCount--,d.remove&&d.remove.call(e,h));r&&!u.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||Y.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)Y.event.remove(e,p+t[c],i,s,!0);Y.isEmptyObject(l)&&(delete m.handle,oe.remove(e,"events"))}},trigger:function(e,t,i,s){var n,o,r,a,l,c,h=[i||X],d=R.call(e,"type")?e.type:e,u=R.call(e,"namespace")?e.namespace.split("."):[],p=o=i=i||X;if(3!==i.nodeType&&8!==i.nodeType&&!me.test(d+Y.event.triggered)&&(0<=d.indexOf(".")&&(d=(u=d.split(".")).shift(),u.sort()),a=d.indexOf(":")<0&&"on"+d,(e=e[Y.expando]?e:new Y.Event(d,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=u.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:Y.makeArray(t,[e]),c=Y.event.special[d]||{},s||!c.trigger||!1!==c.trigger.apply(i,t))){if(!s&&!c.noBubble&&!Y.isWindow(i)){for(r=c.delegateType||d,me.test(r+d)||(p=p.parentNode);p;p=p.parentNode)h.push(p),o=p;o===(i.ownerDocument||X)&&h.push(o.defaultView||o.parentWindow||f)}for(n=0;(p=h[n++])&&!e.isPropagationStopped();)e.type=1<n?r:c.bindType||d,(l=(oe.get(p,"events")||{})[e.type]&&oe.get(p,"handle"))&&l.apply(p,t),(l=a&&p[a])&&l.apply&&Y.acceptData(p)&&(e.result=l.apply(p,t),!1===e.result&&e.preventDefault());return e.type=d,s||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(h.pop(),t)||!Y.acceptData(i)||a&&Y.isFunction(i[d])&&!Y.isWindow(i)&&((o=i[a])&&(i[a]=null),i[Y.event.triggered=d](),Y.event.triggered=void 0,o&&(i[a]=o)),e.result}},dispatch:function(e){e=Y.event.fix(e);var t,i,s,n,o,r=H.call(arguments),a=(oe.get(this,"events")||{})[e.type]||[],l=Y.event.special[e.type]||{};if((r[0]=e).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(o=Y.event.handlers.call(this,e,a),t=0;(s=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,i=0;(n=s.handlers[i++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(n.namespace)||(e.handleObj=n,e.data=n.data,void 0!==(n=((Y.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,r))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,s,n,o,r=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(s=[],i=0;i<a;i++)void 0===s[n=(o=t[i]).selector+" "]&&(s[n]=o.needsContext?0<=Y(n,this).index(l):Y.find(n,this,null,[l]).length),s[n]&&s.push(o);s.length&&r.push({elem:l,handlers:s})}return a<t.length&&r.push({elem:this,handlers:t.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,s,n=t.button;return null==e.pageX&&null!=t.clientX&&(i=(s=e.target.ownerDocument||X).documentElement,s=s.body,e.pageX=t.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),e.which||void 0===n||(e.which=1&n?1:2&n?3:4&n?2:0),e}},fix:function(e){if(e[Y.expando])return e;var t,i,s,n=e.type,o=e,r=this.fixHooks[n];for(r||(this.fixHooks[n]=r=ge.test(n)?this.mouseHooks:fe.test(n)?this.keyHooks:{}),s=r.props?this.props.concat(r.props):this.props,e=new Y.Event(o),t=s.length;t--;)e[i=s[t]]=o[i];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==r()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===r()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Y.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Y.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,s){e=Y.extend(new Y.Event,i,{type:e,isSimulated:!0,originalEvent:{}});s?Y.event.trigger(e,null,t):Y.event.dispatch.call(t,e),e.isDefaultPrevented()&&i.preventDefault()}},Y.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},Y.Event=function(e,t){return this instanceof Y.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?o:c):this.type=e,t&&Y.extend(this,t),this.timeStamp=e&&e.timeStamp||Y.now(),void(this[Y.expando]=!0)):new Y.Event(e,t)},Y.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=o,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=o,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=o,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,n){Y.event.special[e]={delegateType:n,bindType:n,handle:function(e){var t,i=e.relatedTarget,s=e.handleObj;return i&&(i===this||Y.contains(this,i))||(e.type=s.origType,t=s.handler.apply(this,arguments),e.type=n),t}}}),B.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(i,s){function n(e){Y.event.simulate(s,e.target,Y.event.fix(e),!0)}Y.event.special[s]={setup:function(){var e=this.ownerDocument||this,t=oe.access(e,s);t||e.addEventListener(i,n,!0),oe.access(e,s,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=oe.access(e,s)-1;t?oe.access(e,s,t):(e.removeEventListener(i,n,!0),oe.remove(e,s))}}}),Y.fn.extend({on:function(e,t,i,s,n){var o,r;if("object"==typeof e){for(r in"string"!=typeof t&&(i=i||t,t=void 0),e)this.on(r,t,i,e[r],n);return this}if(null==i&&null==s?(s=t,i=t=void 0):null==s&&("string"==typeof t?(s=i,i=void 0):(s=i,i=t,t=void 0)),!1===s)s=c;else if(!s)return this;return 1===n&&(o=s,(s=function(e){return Y().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=Y.guid++)),this.each(function(){Y.event.add(this,e,s,i,t)})},one:function(e,t,i,s){return this.on(e,t,i,s,1)},off:function(e,t,i){var s,n;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,Y(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=c),this.each(function(){Y.event.remove(this,e,i,t)});for(n in e)this.off(n,t,e[n]);return this},trigger:function(e,t){return this.each(function(){Y.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?Y.event.trigger(e,t,i,!0):void 0}});var ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ye=/<([\w:]+)/,we=/<|&#?\w+;/,be=/<(?:script|style|link)/i,xe=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^$|\/(?:java|ecma)script/i,je=/^true\/(.*)/,Ce={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ce.optgroup=Ce.option,Ce.tbody=Ce.tfoot=Ce.colgroup=Ce.caption=Ce.thead,Ce.th=Ce.td,Y.extend({clone:function(e,t,i){var s,n,o,r,a,l,c,h=e.cloneNode(!0),d=Y.contains(e.ownerDocument,e);if(!(B.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Y.isXMLDoc(e)))for(r=_(h),s=0,n=(o=_(e)).length;s<n;s++)a=o[s],l=r[s],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&ue.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(t)if(i)for(o=o||_(e),r=r||_(h),s=0,n=o.length;s<n;s++)u(o[s],r[s]);else u(e,h);return 0<(r=_(h,"script")).length&&p(r,!d&&_(e,"script")),h},buildFragment:function(e,t,i,s){for(var n,o,r,a,l,c=t.createDocumentFragment(),h=[],d=0,u=e.length;d<u;d++)if((n=e[d])||0===n)if("object"===Y.type(n))Y.merge(h,n.nodeType?[n]:n);else if(we.test(n)){for(o=o||c.appendChild(t.createElement("div")),r=(ye.exec(n)||["",""])[1].toLowerCase(),r=Ce[r]||Ce._default,o.innerHTML=r[1]+n.replace(ve,"<$1></$2>")+r[2],l=r[0];l--;)o=o.lastChild;Y.merge(h,o.childNodes),(o=c.firstChild).textContent=""}else h.push(t.createTextNode(n));for(c.textContent="",d=0;n=h[d++];)if((!s||-1===Y.inArray(n,s))&&(a=Y.contains(n.ownerDocument,n),o=_(c.appendChild(n),"script"),a&&p(o),i))for(l=0;n=o[l++];)ke.test(n.type||"")&&i.push(n);return c},cleanData:function(e){for(var t,i,s,n,o=Y.event.special,r=0;void 0!==(i=e[r]);r++){if(Y.acceptData(i)&&(n=i[oe.expando])&&(t=oe.cache[n])){if(t.events)for(s in t.events)o[s]?Y.event.remove(i,s):Y.removeEvent(i,s,t.handle);oe.cache[n]&&delete oe.cache[n]}delete re.cache[i[re.expando]]}}}),Y.fn.extend({text:function(e){return ne(this,function(e){return void 0===e?Y.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||h(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=h(this,e)).insertBefore(e,t.firstChild)})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,s=e?Y.filter(e,this):this,n=0;null!=(i=s[n]);n++)t||1!==i.nodeType||Y.cleanData(_(i)),i.parentNode&&(t&&Y.contains(i.ownerDocument,i)&&p(_(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Y.cleanData(_(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Y.clone(this,e,t)})},html:function(e){return ne(this,function(e){var t=this[0]||{},i=0,s=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!be.test(e)&&!Ce[(ye.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ve,"<$1></$2>");try{for(;i<s;i++)1===(t=this[i]||{}).nodeType&&(Y.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Y.cleanData(_(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(i,s){i=D.apply([],i);var e,t,n,o,r,a,l=0,c=this.length,h=this,d=c-1,u=i[0],p=Y.isFunction(u);if(p||1<c&&"string"==typeof u&&!B.checkClone&&xe.test(u))return this.each(function(e){var t=h.eq(e);p&&(i[0]=u.call(this,e,t.html())),t.domManip(i,s)});if(c&&(t=(e=Y.buildFragment(i,this[0].ownerDocument,!1,this)).firstChild,1===e.childNodes.length&&(e=t),t)){for(o=(n=Y.map(_(e,"script"),g)).length;l<c;l++)r=e,l!==d&&(r=Y.clone(r,!0,!0),o&&Y.merge(n,_(r,"script"))),s.call(this[l],r,l);if(o)for(a=n[n.length-1].ownerDocument,Y.map(n,m),l=0;l<o;l++)r=n[l],ke.test(r.type||"")&&!oe.access(r,"globalEval")&&Y.contains(a,r)&&(r.src?Y._evalUrl&&Y._evalUrl(r.src):Y.globalEval(r.textContent.replace(/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,"")))}return this}}),Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,r){Y.fn[e]=function(e){for(var t,i=[],s=Y(e),n=s.length-1,o=0;o<=n;o++)t=o===n?this:this.clone(!0),Y(s[o])[r](t),I.apply(i,t.get());return this.pushStack(i)}});var Te,ze,Se,We,$e,Ee,Le={},Oe=/^margin/,Pe=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),Ae=function(e){return(e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView:f).getComputedStyle(e,null)};function Ne(){Ee.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",Ee.innerHTML="",We.appendChild($e);var e=f.getComputedStyle(Ee,null);ze="1%"!==e.top,Se="4px"===e.width,We.removeChild($e)}We=X.documentElement,$e=X.createElement("div"),(Ee=X.createElement("div")).style&&(Ee.style.backgroundClip="content-box",Ee.cloneNode(!0).style.backgroundClip="",B.clearCloneStyle="content-box"===Ee.style.backgroundClip,$e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",$e.appendChild(Ee),f.getComputedStyle&&Y.extend(B,{pixelPosition:function(){return Ne(),ze},boxSizingReliable:function(){return null==Se&&Ne(),Se},reliableMarginRight:function(){var e,t=Ee.appendChild(X.createElement("div"));return t.style.cssText=Ee.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",Ee.style.width="1px",We.appendChild($e),e=!parseFloat(f.getComputedStyle(t,null).marginRight),We.removeChild($e),Ee.removeChild(t),e}})),Y.swap=function(e,t,i,s){var n,o={};for(n in t)o[n]=e.style[n],e.style[n]=t[n];for(n in s=i.apply(e,s||[]),t)e.style[n]=o[n];return s};var He=/^(none|table(?!-c[ea]).+)/,De=new RegExp("^("+he+")(.*)$","i"),Ie=new RegExp("^([+-])=("+he+")","i"),Me={position:"absolute",visibility:"hidden",display:"block"},Fe={letterSpacing:"0",fontWeight:"400"},qe=["Webkit","O","Moz","ms"];Y.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=y(e,"opacity");return""===e?"1":e}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,r,a=Y.camelCase(t),l=e.style;return t=Y.cssProps[a]||(Y.cssProps[a]=b(l,a)),r=Y.cssHooks[t]||Y.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(n=r.get(e,!1,s))?n:l[t]:("string"===(o=typeof i)&&(n=Ie.exec(i))&&(i=(n[1]+1)*n[2]+parseFloat(Y.css(e,t)),o="number"),void(null!=i&&i==i&&("number"!==o||Y.cssNumber[a]||(i+="px"),B.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,s))||(l[t]=i))))}},css:function(e,t,i,s){var n,o=Y.camelCase(t);return t=Y.cssProps[o]||(Y.cssProps[o]=b(e.style,o)),(o=Y.cssHooks[t]||Y.cssHooks[o])&&"get"in o&&(n=o.get(e,!0,i)),void 0===n&&(n=y(e,t,s)),"normal"===n&&t in Fe&&(n=Fe[t]),""===i||i?(t=parseFloat(n),!0===i||Y.isNumeric(t)?t||0:n):n}}),Y.each(["height","width"],function(e,n){Y.cssHooks[n]={get:function(e,t,i){return t?He.test(Y.css(e,"display"))&&0===e.offsetWidth?Y.swap(e,Me,function(){return j(e,n,i)}):j(e,n,i):void 0},set:function(e,t,i){var s=i&&Ae(e);return x(0,t,i?k(e,n,i,"border-box"===Y.css(e,"boxSizing",!1,s),s):0)}}}),Y.cssHooks.marginRight=w(B.reliableMarginRight,function(e,t){return t?Y.swap(e,{display:"inline-block"},y,[e,"marginRight"]):void 0}),Y.each({margin:"",padding:"",border:"Width"},function(n,o){Y.cssHooks[n+o]={expand:function(e){for(var t=0,i={},s="string"==typeof e?e.split(" "):[e];t<4;t++)i[n+de[t]+o]=s[t]||s[t-2]||s[0];return i}},Oe.test(n)||(Y.cssHooks[n+o].set=x)}),Y.fn.extend({css:function(e,t){return ne(this,function(e,t,i){var s,n,o={},r=0;if(Y.isArray(t)){for(s=Ae(e),n=t.length;r<n;r++)o[t[r]]=Y.css(e,t[r],!1,s);return o}return void 0!==i?Y.style(e,t,i):Y.css(e,t)},e,t,1<arguments.length)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ce(this)?Y(this).show():Y(this).hide()})}}),(Y.Tween=T).prototype={constructor:T,init:function(e,t,i,s,n,o){this.elem=e,this.prop=i,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=o||(Y.cssNumber[i]?"":"px")},cur:function(){var e=T.propHooks[this.prop];return(e&&e.get?e:T.propHooks._default).get(this)},run:function(e){var t=T.propHooks[this.prop];return this.pos=e=this.options.duration?Y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(t&&t.set?t:T.propHooks._default).set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Y.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){Y.fx.step[e.prop]?Y.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Y.cssProps[e.prop]]||Y.cssHooks[e.prop])?Y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Y.fx=T.prototype.init,Y.fx.step={};var Re,Be,Xe=/^(?:toggle|show|hide)$/,Ye=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),Ke=/queueHooks$/,Ze=[function(t,e,i){var s,n,o,r,a,l,c,h=this,d={},u=t.style,p=t.nodeType&&ce(t),f=oe.get(t,"fxshow");for(s in i.queue||(null==(a=Y._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Y.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===("none"===(c=Y.css(t,"display"))?oe.get(t,"olddisplay")||v(t.nodeName):c)&&"none"===Y.css(t,"float")&&(u.display="inline-block")),i.overflow&&(u.overflow="hidden",h.always(function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]})),e)if(n=e[s],Xe.exec(n)){if(delete e[s],o=o||"toggle"===n,n===(p?"hide":"show")){if("show"!==n||!f||void 0===f[s])continue;p=!0}d[s]=f&&f[s]||Y.style(t,s)}else c=void 0;if(Y.isEmptyObject(d))"inline"===("none"===c?v(t.nodeName):c)&&(u.display=c);else for(s in f?"hidden"in f&&(p=f.hidden):f=oe.access(t,"fxshow",{}),o&&(f.hidden=!p),p?Y(t).show():h.done(function(){Y(t).hide()}),h.done(function(){for(var e in oe.remove(t,"fxshow"),d)Y.style(t,e,d[e])}),d)r=W(p?f[s]:0,s,h),s in f||(f[s]=r.start,p&&(r.end=r.start,r.start="width"===s||"height"===s?1:0))}],Ue={"*":[function(e,t){var i=this.createTween(e,t),s=i.cur(),t=Ye.exec(t),n=t&&t[3]||(Y.cssNumber[e]?"":"px"),o=(Y.cssNumber[e]||"px"!==n&&+s)&&Ye.exec(Y.css(i.elem,e)),r=1,a=20;if(o&&o[3]!==n)for(n=n||o[3],t=t||[],o=+s||1;o/=r=r||".5",Y.style(i.elem,e,o+n),r!==(r=i.cur()/s)&&1!==r&&--a;);return t&&(o=i.start=+o||+s||0,i.unit=n,i.end=t[1]?o+(t[1]+1)*t[2]:+t[2]),i}]};Y.Animation=Y.extend($,{tweener:function(e,t){for(var i,s=0,n=(e=Y.isFunction(e)?(t=e,["*"]):e.split(" ")).length;s<n;s++)i=e[s],Ue[i]=Ue[i]||[],Ue[i].unshift(t)},prefilter:function(e,t){t?Ze.unshift(e):Ze.push(e)}}),Y.speed=function(e,t,i){var s=e&&"object"==typeof e?Y.extend({},e):{complete:i||!i&&t||Y.isFunction(e)&&e,duration:e,easing:i&&t||t&&!Y.isFunction(t)&&t};return s.duration=Y.fx.off?0:"number"==typeof s.duration?s.duration:s.duration in Y.fx.speeds?Y.fx.speeds[s.duration]:Y.fx.speeds._default,null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){Y.isFunction(s.old)&&s.old.call(this),s.queue&&Y.dequeue(this,s.queue)},s},Y.fn.extend({fadeTo:function(e,t,i,s){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(t,e,i,s){var n=Y.isEmptyObject(t),o=Y.speed(e,i,s),s=function(){var e=$(this,Y.extend({},t),o);(n||oe.get(this,"finish"))&&e.stop(!0)};return s.finish=s,n||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(n,e,o){function r(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof n&&(o=e,e=n,n=void 0),e&&!1!==n&&this.queue(n||"fx",[]),this.each(function(){var e=!0,t=null!=n&&n+"queueHooks",i=Y.timers,s=oe.get(this);if(t)s[t]&&s[t].stop&&r(s[t]);else for(t in s)s[t]&&s[t].stop&&Ke.test(t)&&r(s[t]);for(t=i.length;t--;)i[t].elem!==this||null!=n&&i[t].queue!==n||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||Y.dequeue(this,n)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var e,t=oe.get(this),i=t[r+"queue"],s=t[r+"queueHooks"],n=Y.timers,o=i?i.length:0;for(t.finish=!0,Y.queue(this,r,[]),s&&s.stop&&s.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===r&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),Y.each(["toggle","show","hide"],function(e,s){var n=Y.fn[s];Y.fn[s]=function(e,t,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(S(s,!0),e,t,i)}}),Y.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,s){Y.fn[e]=function(e,t,i){return this.animate(s,e,t,i)}}),Y.timers=[],Y.fx.tick=function(){var e,t=0,i=Y.timers;for(Re=Y.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||Y.fx.stop(),Re=void 0},Y.fx.timer=function(e){Y.timers.push(e),e()?Y.fx.start():Y.timers.pop()},Y.fx.interval=13,Y.fx.start=function(){Be=Be||setInterval(Y.fx.tick,Y.fx.interval)},Y.fx.stop=function(){clearInterval(Be),Be=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fn.delay=function(s,e){return s=Y.fx&&Y.fx.speeds[s]||s,e=e||"fx",this.queue(e,function(e,t){var i=setTimeout(e,s);t.stop=function(){clearTimeout(i)}})},K=X.createElement("input"),N=X.createElement("select"),he=N.appendChild(X.createElement("option")),K.type="checkbox",B.checkOn=""!==K.value,B.optSelected=he.selected,N.disabled=!0,B.optDisabled=!he.disabled,(K=X.createElement("input")).value="t",K.type="radio",B.radioValue="t"===K.value;var Ve,Ge=Y.expr.attrHandle;Y.fn.extend({attr:function(e,t){return ne(this,Y.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){Y.removeAttr(this,e)})}}),Y.extend({attr:function(e,t,i){var s,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute==pe?Y.prop(e,t,i):(1===o&&Y.isXMLDoc(e)||(t=t.toLowerCase(),s=Y.attrHooks[t]||(Y.expr.match.bool.test(t)?Ve:void 0)),void 0===i?s&&"get"in s&&null!==(n=s.get(e,t))?n:null==(n=Y.find.attr(e,t))?void 0:n:null!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):void Y.removeAttr(e,t))},removeAttr:function(e,t){var i,s,n=0,o=t&&t.match(ie);if(o&&1===e.nodeType)for(;i=o[n++];)s=Y.propFix[i]||i,Y.expr.match.bool.test(i)&&(e[s]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!B.radioValue&&"radio"===t&&Y.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),Ve={set:function(e,t,i){return!1===t?Y.removeAttr(e,i):e.setAttribute(i,i),i}},Y.each(Y.expr.match.bool.source.match(/\w+/g),function(e,t){var o=Ge[t]||Y.find.attr;Ge[t]=function(e,t,i){var s,n;return i||(n=Ge[t],Ge[t]=s,s=null!=o(e,t,i)?t.toLowerCase():null,Ge[t]=n),s}});var Je=/^(?:input|select|textarea|button)$/i;Y.fn.extend({prop:function(e,t){return ne(this,Y.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[Y.propFix[e]||e]})}}),Y.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,i){var s,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!Y.isXMLDoc(e))&&(t=Y.propFix[t]||t,n=Y.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:e[t]=i:n&&"get"in n&&null!==(s=n.get(e,t))?s:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Je.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),B.optSelected||(Y.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Y.propFix[this.toLowerCase()]=this});var Qe=/[\t\r\n\f]/g;Y.fn.extend({addClass:function(t){var e,i,s,n,o,r,a="string"==typeof t&&t,l=0,c=this.length;if(Y.isFunction(t))return this.each(function(e){Y(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(ie)||[];l<c;l++)if(s=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Qe," "):" ")){for(o=0;n=e[o++];)s.indexOf(" "+n+" ")<0&&(s+=n+" ");r=Y.trim(s),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,s,n,o,r,a=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(Y.isFunction(t))return this.each(function(e){Y(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(ie)||[];l<c;l++)if(s=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Qe," "):"")){for(o=0;n=e[o++];)for(;0<=s.indexOf(" "+n+" ");)s=s.replace(" "+n+" "," ");r=t?Y.trim(s):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(n,t){var o=typeof n;return"boolean"==typeof t&&"string"==o?t?this.addClass(n):this.removeClass(n):this.each(Y.isFunction(n)?function(e){Y(this).toggleClass(n.call(this,e,this.className,t),t)}:function(){if("string"==o)for(var e,t=0,i=Y(this),s=n.match(ie)||[];e=s[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else o!=pe&&"boolean"!=o||(this.className&&oe.set(this,"__className__",this.className),this.className=!this.className&&!1!==n&&oe.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,s=this.length;i<s;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(Qe," ").indexOf(t))return!0;return!1}}),Y.fn.extend({val:function(t){var i,e,s,n=this[0];return arguments.length?(s=Y.isFunction(t),this.each(function(e){1===this.nodeType&&(null==(e=s?t.call(this,e,Y(this).val()):t)?e="":"number"==typeof e?e+="":Y.isArray(e)&&(e=Y.map(e,function(e){return null==e?"":e+""})),(i=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):n?(i=Y.valHooks[n.type]||Y.valHooks[n.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(n,"value"))?e:"string"==typeof(e=n.value)?e.replace(/\r/g,""):null==e?"":e:void 0}}),Y.extend({valHooks:{option:{get:function(e){var t=Y.find.attr(e,"value");return null!=t?t:Y.trim(Y.text(e))}},select:{get:function(e){for(var t,i=e.options,s=e.selectedIndex,n="select-one"===e.type||s<0,o=n?null:[],r=n?s+1:i.length,a=s<0?r:n?s:0;a<r;a++)if(!(!(t=i[a]).selected&&a!==s||(B.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&Y.nodeName(t.parentNode,"optgroup"))){if(t=Y(t).val(),n)return t;o.push(t)}return o},set:function(e,t){for(var i,s,n=e.options,o=Y.makeArray(t),r=n.length;r--;)((s=n[r]).selected=0<=Y.inArray(s.value,o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]={set:function(e,t){return Y.isArray(t)?e.checked=0<=Y.inArray(Y(e).val(),t):void 0}},B.checkOn||(Y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,i){Y.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),Y.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var et=Y.now(),tt=/\?/;Y.parseJSON=function(e){return JSON.parse(e+"")},Y.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||Y.error("Invalid XML: "+e),t};var it=/([?&])_=[^&]*/,st=/^(.*?):[ \t]*([^\r\n]*)$/gm,nt=/^(?:GET|HEAD)$/,ot=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,rt={},at={},lt="*/".concat("*"),ct=f.location.href,ht=ot.exec(ct.toLowerCase())||[];Y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Y.parseJSON,"text xml":Y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?O(O(e,Y.ajaxSettings),t):O(Y.ajaxSettings,e)},ajaxPrefilter:E(rt),ajaxTransport:E(at),ajax:function(e,t){function i(e,t,i,s){var n,o,r,a=t;2!==y&&(y=2,d&&clearTimeout(d),l=void 0,h=s||"",b.readyState=0<e?4:0,s=200<=e&&e<300||304===e,i&&(r=function(e,t,i){for(var s,n,o,r,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"));if(s)for(n in a)if(a[n]&&a[n].test(s)){l.unshift(n);break}if(l[0]in i)o=l[0];else{for(n in i){if(!l[0]||e.converters[n+" "+l[0]]){o=n;break}r=r||n}o=o||r}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}(p,b,i)),r=function(e,t,i,s){var n,o,r,a,l,c={},h=e.dataTypes.slice();if(h[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(o=h.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(r=c[l+" "+o]||c["* "+o]))for(n in c)if(a=n.split(" "),a[1]===o&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[n]:!0!==c[n]&&(o=a[0],h.unshift(a[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,r,b,s),s?(p.ifModified&&((i=b.getResponseHeader("Last-Modified"))&&(Y.lastModified[c]=i),(i=b.getResponseHeader("etag"))&&(Y.etag[c]=i)),204===e||"HEAD"===p.type?a="nocontent":304===e?a="notmodified":(a=r.state,n=r.data,s=!(o=r.error))):(o=a,!e&&a||(a="error",e<0&&(e=0))),b.status=e,b.statusText=(t||a)+"",s?m.resolveWith(f,[n,a,b]):m.rejectWith(f,[b,a,o]),b.statusCode(v),v=void 0,u&&g.trigger(s?"ajaxSuccess":"ajaxError",[b,p,s?n:o]),_.fireWith(f,[b,a]),u&&(g.trigger("ajaxComplete",[b,p]),--Y.active||Y.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var l,c,h,s,d,n,u,o,p=Y.ajaxSetup({},t),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?Y(f):Y.event,m=Y.Deferred(),_=Y.Callbacks("once memory"),v=p.statusCode||{},r={},a={},y=0,w="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s)for(s={};t=st.exec(h);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?h:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=a[i]=a[i]||e,r[e]=t),this},overrideMimeType:function(e){return y||(p.mimeType=e),this},statusCode:function(e){if(e)if(y<2)for(var t in e)v[t]=[v[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){e=e||w;return l&&l.abort(e),i(0,e),this}};if(m.promise(b).complete=_.add,b.success=b.done,b.error=b.fail,p.url=((e||p.url||ct)+"").replace(/#.*$/,"").replace(/^\/\//,ht[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=Y.trim(p.dataType||"*").toLowerCase().match(ie)||[""],null==p.crossDomain&&(n=ot.exec(p.url.toLowerCase()),p.crossDomain=!(!n||n[1]===ht[1]&&n[2]===ht[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(ht[3]||("http:"===ht[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=Y.param(p.data,p.traditional)),L(rt,p,t,b),2===y)return b;for(o in(u=Y.event&&p.global)&&0==Y.active++&&Y.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!nt.test(p.type),c=p.url,p.hasContent||(p.data&&(c=p.url+=(tt.test(c)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=it.test(c)?c.replace(it,"$1_="+et++):c+(tt.test(c)?"&":"?")+"_="+et++)),p.ifModified&&(Y.lastModified[c]&&b.setRequestHeader("If-Modified-Since",Y.lastModified[c]),Y.etag[c]&&b.setRequestHeader("If-None-Match",Y.etag[c])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&b.setRequestHeader("Content-Type",p.contentType),b.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+lt+"; q=0.01":""):p.accepts["*"]),p.headers)b.setRequestHeader(o,p.headers[o]);if(p.beforeSend&&(!1===p.beforeSend.call(f,b,p)||2===y))return b.abort();for(o in w="abort",{success:1,error:1,complete:1})b[o](p[o]);if(l=L(at,p,t,b)){b.readyState=1,u&&g.trigger("ajaxSend",[b,p]),p.async&&0<p.timeout&&(d=setTimeout(function(){b.abort("timeout")},p.timeout));try{y=1,l.send(r,i)}catch(e){if(!(y<2))throw e;i(-1,e)}}else i(-1,"No Transport");return b},getJSON:function(e,t,i){return Y.get(e,t,i,"json")},getScript:function(e,t){return Y.get(e,void 0,t,"script")}}),Y.each(["get","post"],function(e,n){Y[n]=function(e,t,i,s){return Y.isFunction(t)&&(s=s||i,i=t,t=void 0),Y.ajax({url:e,type:n,dataType:s,data:t,success:i})}}),Y._evalUrl=function(e){return Y.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Y.fn.extend({wrapAll:function(t){var e;return Y.isFunction(t)?this.each(function(e){Y(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Y(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(i){return this.each(Y.isFunction(i)?function(e){Y(this).wrapInner(i.call(this,e))}:function(){var e=Y(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=Y.isFunction(t);return this.each(function(e){Y(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){Y.nodeName(this,"body")||Y(this).replaceWith(this.childNodes)}).end()}}),Y.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Y.expr.filters.visible=function(e){return!Y.expr.filters.hidden(e)};var dt=/\[\]$/,ut=/^(?:submit|button|image|reset|file)$/i,pt=/^(?:input|select|textarea|keygen)/i;Y.param=function(e,t){function i(e,t){t=Y.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var s,n=[];if(void 0===t&&(t=Y.ajaxSettings&&Y.ajaxSettings.traditional),Y.isArray(e)||e.jquery&&!Y.isPlainObject(e))Y.each(e,function(){i(this.name,this.value)});else for(s in e)!function i(s,e,n,o){if(Y.isArray(e))Y.each(e,function(e,t){n||dt.test(s)?o(s,t):i(s+"["+("object"==typeof t?e:"")+"]",t,n,o)});else if(n||"object"!==Y.type(e))o(s,e);else for(var t in e)i(s+"["+t+"]",e[t],n,o)}(s,e[s],t,i);return n.join("&").replace(/%20/g,"+")},Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Y.prop(this,"elements");return e?Y.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Y(this).is(":disabled")&&pt.test(this.nodeName)&&!ut.test(e)&&(this.checked||!ue.test(e))}).map(function(e,t){var i=Y(this).val();return null==i?null:Y.isArray(i)?Y.map(i,function(e){return{name:t.name,value:e.replace(/\r?\n/g,"\r\n")}}):{name:t.name,value:i.replace(/\r?\n/g,"\r\n")}}).get()}}),Y.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var ft=0,gt={},mt={0:200,1223:204},_t=Y.ajaxSettings.xhr();f.attachEvent&&f.attachEvent("onunload",function(){for(var e in gt)gt[e]()}),B.cors=!!_t&&"withCredentials"in _t,B.ajax=_t=!!_t,Y.ajaxTransport(function(o){var r;return B.cors||_t&&!o.crossDomain?{send:function(e,t){var i,s=o.xhr(),n=++ft;if(s.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(i in o.xhrFields)s[i]=o.xhrFields[i];for(i in o.mimeType&&s.overrideMimeType&&s.overrideMimeType(o.mimeType),o.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)s.setRequestHeader(i,e[i]);r=function(e){return function(){r&&(delete gt[n],r=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?t(s.status,s.statusText):t(mt[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=r(),s.onerror=r("error"),r=gt[n]=r("abort");try{s.send(o.hasContent&&o.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}:void 0}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Y.globalEval(e),e}}}),Y.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Y.ajaxTransport("script",function(i){var s,n;if(i.crossDomain)return{send:function(e,t){s=Y("<script>").prop({async:!0,charset:i.scriptCharset,src:i.url}).on("load error",n=function(e){s.remove(),n=null,e&&t("error"===e.type?404:200,e.type)}),X.head.appendChild(s[0])},abort:function(){n&&n()}}});var vt=[],yt=/(=)\?(?=&|$)|\?\?/;Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=vt.pop()||Y.expando+"_"+et++;return this[e]=!0,e}}),Y.ajaxPrefilter("json jsonp",function(e,t,i){var s,n,o,r=!1!==e.jsonp&&(yt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&yt.test(e.data)&&"data");return r||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=Y.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(yt,"$1"+s):!1!==e.jsonp&&(e.url+=(tt.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||Y.error(s+" was not called"),o[0]},e.dataTypes[0]="json",n=f[s],f[s]=function(){o=arguments},i.always(function(){f[s]=n,e[s]&&(e.jsonpCallback=t.jsonpCallback,vt.push(s)),o&&Y.isFunction(n)&&n(o[0]),o=n=void 0}),"script"):void 0}),Y.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||X;var s=U.exec(e),i=!i&&[];return s?[t.createElement(s[1])]:(s=Y.buildFragment([e],t,i),i&&i.length&&Y(i).remove(),Y.merge([],s.childNodes))};var wt=Y.fn.load;Y.fn.load=function(e,t,i){if("string"!=typeof e&&wt)return wt.apply(this,arguments);var s,n,o,r=this,a=e.indexOf(" ");return 0<=a&&(s=Y.trim(e.slice(a)),e=e.slice(0,a)),Y.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),0<r.length&&Y.ajax({url:e,type:n,dataType:"html",data:t}).done(function(e){o=arguments,r.html(s?Y("<div>").append(Y.parseHTML(e)).find(s):e)}).complete(i&&function(e,t){r.each(i,o||[e.responseText,t,e])}),this},Y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Y.fn[t]=function(e){return this.on(t,e)}}),Y.expr.filters.animated=function(t){return Y.grep(Y.timers,function(e){return t===e.elem}).length};var bt=f.document.documentElement;Y.offset={setOffset:function(e,t,i){var s,n,o,r,a=Y.css(e,"position"),l=Y(e),c={};"static"===a&&(e.style.position="relative"),o=l.offset(),s=Y.css(e,"top"),r=Y.css(e,"left"),r=("absolute"===a||"fixed"===a)&&-1<(s+r).indexOf("auto")?(n=(a=l.position()).top,a.left):(n=parseFloat(s)||0,parseFloat(r)||0),Y.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(c.top=t.top-o.top+n),null!=t.left&&(c.left=t.left-o.left+r),"using"in t?t.using.call(e,c):l.css(c)}},Y.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Y.offset.setOffset(this,t,e)});var e,i=this[0],s={top:0,left:0},n=i&&i.ownerDocument;return n?(e=n.documentElement,Y.contains(e,i)?(typeof i.getBoundingClientRect!=pe&&(s=i.getBoundingClientRect()),n=P(n),{top:s.top+n.pageYOffset-e.clientTop,left:s.left+n.pageXOffset-e.clientLeft}):s):void 0},position:function(){if(this[0]){var e,t,i=this[0],s={top:0,left:0};return"fixed"===Y.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Y.nodeName(e[0],"html")||(s=e.offset()),s.top+=Y.css(e[0],"borderTopWidth",!0),s.left+=Y.css(e[0],"borderLeftWidth",!0)),{top:t.top-s.top-Y.css(i,"marginTop",!0),left:t.left-s.left-Y.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||bt;e&&!Y.nodeName(e,"html")&&"static"===Y.css(e,"position");)e=e.offsetParent;return e||bt})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var o="pageYOffset"===n;Y.fn[t]=function(e){return ne(this,function(e,t,i){var s=P(e);return void 0===i?s?s[n]:e[t]:void(s?s.scrollTo(o?f.pageXOffset:i,o?i:f.pageYOffset):e[t]=i)},t,e,arguments.length,null)}}),Y.each(["top","left"],function(e,i){Y.cssHooks[i]=w(B.pixelPosition,function(e,t){return t?(t=y(e,i),Pe.test(t)?Y(e).position()[i]+"px":t):void 0})}),Y.each({Height:"height",Width:"width"},function(o,r){Y.each({padding:"inner"+o,content:r,"":"outer"+o},function(s,e){Y.fn[e]=function(e,t){var i=arguments.length&&(s||"boolean"!=typeof e),n=s||(!0===e||!0===t?"margin":"border");return ne(this,function(e,t,i){var s;return Y.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+o],s["scroll"+o],e.body["offset"+o],s["offset"+o],s["client"+o])):void 0===i?Y.css(e,t,n):Y.style(e,t,i,n)},r,i?e:void 0,i,null)}})}),Y.fn.size=function(){return this.length},Y.fn.andSelf=Y.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Y});var xt=f.jQuery,kt=f.$;return Y.noConflict=function(e){return f.$===Y&&(f.$=kt),e&&f.jQuery===Y&&(f.jQuery=xt),Y},typeof e==pe&&(f.jQuery=f.$=Y),Y}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e($||require("jquery")):e(jQuery)}(function(O){"use strict";function n(e,t){this.element=e,this.options=O.extend({},i,t);t=this.options.locale;void 0!==this.options.locales[t]&&O.extend(this.options,this.options.locales[t]),this.init()}function P(e){var t,i;!O(e.target).parents().hasClass("jq-selectbox")&&"OPTION"!=e.target.nodeName&&O("div.jq-selectbox.opened").length&&(t=O("div.jq-selectbox.opened"),i=O("div.jq-selectbox__search input",t),e=O("div.jq-selectbox__dropdown",t),t.find("select").data("_"+o).options.onSelectClosed.call(t),i.length&&i.val("").keyup(),e.hide().find("li.sel").addClass("selected"),t.removeClass("focused opened dropup dropdown"))}var o="styler",i={idSuffix:"-styler",filePlaceholder:"  ",fileBrowse:"...",fileNumber:" : %s",selectPlaceholder:"...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"  ",selectSearchPlaceholder:"...",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0,locale:"ru",locales:{en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search..."}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};n.prototype={init:function(){function W(){void 0!==$.attr("id")&&""!==$.attr("id")&&(this.id=$.attr("id")+E.idSuffix),this.title=$.attr("title"),this.classes=$.attr("class"),this.data=$.data()}var e,t,i,s,n,$=O(this.element),E=this.options,L=!(!navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||navigator.userAgent.match(/(Windows\sPhone)/i)),o=!(!navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/(Windows\sPhone)/i));$.is(":checkbox")?((e=function(){var e=new W,t=O('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);$.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(t).prependTo(t),t.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"}),$.is(":checked")&&t.addClass("checked"),$.is(":disabled")&&t.addClass("disabled"),t.click(function(e){e.preventDefault(),t.is(".disabled")||($.is(":checked")?($.prop("checked",!1),t.removeClass("checked")):($.prop("checked",!0),t.addClass("checked")),$.focus().change())}),$.closest("label").add('label[for="'+$.attr("id")+'"]').on("click.styler",function(e){O(e.target).is("a")||O(e.target).closest(t).length||(t.triggerHandler("click"),e.preventDefault())}),$.on("change.styler",function(){$.is(":checked")?t.addClass("checked"):t.removeClass("checked")}).on("keydown.styler",function(e){32==e.which&&t.click()}).on("focus.styler",function(){t.is(".disabled")||t.addClass("focused")}).on("blur.styler",function(){t.removeClass("focused")})})(),$.on("refresh",function(){$.closest("label").add('label[for="'+$.attr("id")+'"]').off(".styler"),$.off(".styler").parent().before($).remove(),e()})):$.is(":radio")?((t=function(){var e=new W,t=O('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);$.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(t).prependTo(t),t.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"}),$.is(":checked")&&t.addClass("checked"),$.is(":disabled")&&t.addClass("disabled"),O.fn.commonParents=function(){var e=this;return e.first().parents().filter(function(){return O(this).find(e).length===e.length})},O.fn.commonParent=function(){return O(this).commonParents().first()},t.click(function(e){e.preventDefault(),t.is(".disabled")||((e=O('input[name="'+$.attr("name")+'"]')).commonParent().find(e).prop("checked",!1).parent().removeClass("checked"),$.prop("checked",!0).parent().addClass("checked"),$.focus().change())}),$.closest("label").add('label[for="'+$.attr("id")+'"]').on("click.styler",function(e){O(e.target).is("a")||O(e.target).closest(t).length||(t.triggerHandler("click"),e.preventDefault())}),$.on("change.styler",function(){$.parent().addClass("checked")}).on("focus.styler",function(){t.is(".disabled")||t.addClass("focused")}).on("blur.styler",function(){t.removeClass("focused")})})(),$.on("refresh",function(){$.closest("label").add('label[for="'+$.attr("id")+'"]').off(".styler"),$.off(".styler").parent().before($).remove(),t()})):$.is(":file")?($.css({position:"absolute",top:0,right:0,margin:0,padding:0,opacity:0,fontSize:"100px"}),(i=function(){var e=new W,n=$.data("placeholder");void 0===n&&(n=E.filePlaceholder);var t=$.data("browse");void 0!==t&&""!==t||(t=E.fileBrowse);var o=O('<div class="jq-file"><div class="jq-file__name">'+n+'</div><div class="jq-file__browse">'+t+"</div></div>").css({display:"inline-block",position:"relative",overflow:"hidden"}).attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);$.after(o).appendTo(o),$.is(":disabled")&&o.addClass("disabled"),$.on("change.styler",function(){var e,t,i=$.val(),s=O("div.jq-file__name",o);$.is("[multiple]")&&(i="",0<(e=$[0].files.length)&&(void 0===(t=$.data("number"))&&(t=E.fileNumber),i=t=t.replace("%s",e))),s.text(i.replace(/.+[\\\/]/,"")),""===i?(s.text(n),o.removeClass("changed")):o.addClass("changed")}).on("focus.styler",function(){o.addClass("focused")}).on("blur.styler",function(){o.removeClass("focused")}).on("click.styler",function(){o.removeClass("focused")})})(),$.on("refresh",function(){$.off(".styler").parent().before($).remove(),i()})):$.is('input[type="number"]')?((s=function(){var e=new W,t=O('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>').attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);$.after(t).prependTo(t).wrap('<div class="jq-number__field"></div>'),$.is(":disabled")&&t.addClass("disabled");var o,r,a,i=null,s=null;void 0!==$.attr("min")&&(o=$.attr("min")),void 0!==$.attr("max")&&(r=$.attr("max")),a=void 0!==$.attr("step")&&O.isNumeric($.attr("step"))?Number($.attr("step")):Number(1);function n(e){var t,i=$.val();O.isNumeric(i)||(i=0,$.val("0")),e.is(".minus")?t=Number(i)-a:e.is(".plus")&&(t=Number(i)+a);var s=(a.toString().split(".")[1]||[]).length;if(0<s){for(var n="1";n.length<=s;)n+="0";t=Math.round(t*n)/n}O.isNumeric(o)&&O.isNumeric(r)?o<=t&&t<=r&&$.val(t):O.isNumeric(o)&&!O.isNumeric(r)?o<=t&&$.val(t):(O.isNumeric(o)||!O.isNumeric(r)||t<=r)&&$.val(t)}t.is(".disabled")||(t.on("mousedown","div.jq-number__spin",function(){var e=O(this);n(e),i=setTimeout(function(){s=setInterval(function(){n(e)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(i),clearInterval(s)}).on("mouseup","div.jq-number__spin",function(){$.change()}),$.on("focus.styler",function(){t.addClass("focused")}).on("blur.styler",function(){t.removeClass("focused")}))})(),$.on("refresh",function(){$.off(".styler").closest(".jq-number").before($).remove(),s()})):$.is("select")?((n=function(){function C(e){e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){var t=null;"mousewheel"==e.type?t=-1*e.originalEvent.wheelDelta:"DOMMouseScroll"==e.type&&(t=40*e.originalEvent.detail),t&&(e.stopPropagation(),e.preventDefault(),O(this).scrollTop(t+O(this).scrollTop()))})}function T(){for(var e=0;e<z.length;e++){var t=z.eq(e),i="",s="",n="",o="",r="",a="",l="",c="",h="";t.prop("selected")&&(s="selected sel"),t.is(":disabled")&&(s="disabled"),t.is(":selected:disabled")&&(s="selected sel disabled"),void 0!==t.attr("id")&&""!==t.attr("id")&&(o=' id="'+t.attr("id")+E.idSuffix+'"'),void 0!==t.attr("title")&&""!==z.attr("title")&&(r=' title="'+t.attr("title")+'"'),void 0!==t.attr("class")&&(l=" "+t.attr("class"),h=' data-jqfs-class="'+t.attr("class")+'"');var d,u=t.data();for(d in u)""!==u[d]&&(a+=" data-"+d+'="'+u[d]+'"');s+l!==""&&(n=' class="'+s+l+'"'),i="<li"+h+a+n+r+o+">"+t.html()+"</li>",t.parent().is("optgroup")&&(void 0!==t.parent().attr("class")&&(c=" "+t.parent().attr("class")),i="<li"+h+a+' class="'+s+l+" option"+c+'"'+r+o+">"+t.html()+"</li>",t.is(":first-child")&&(i='<li class="optgroup'+c+'">'+t.parent().attr("label")+"</li>"+i)),S+=i}}var z=O("option",$),S="";$.is("[multiple]")?o||L||function(){var e=new W,t=O('<div class="jq-select-multiple jqselect"></div>').css({display:"inline-block",position:"relative"}).attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);$.css({margin:0,padding:0}).after(t),T(),t.append("<ul>"+S+"</ul>");var i=O("ul",t).css({position:"relative","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}),n=O("li",t).attr("unselectable","on"),s=$.attr("size"),e=i.outerHeight(),o=n.outerHeight();void 0!==s&&0<s?i.css({height:o*s}):i.css({height:4*o}),e>t.height()&&(i.css("overflowY","scroll"),C(i),n.filter(".selected").length&&i.scrollTop(i.scrollTop()+n.filter(".selected").position().top)),$.prependTo(t).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0}),$.is(":disabled")?(t.addClass("disabled"),z.each(function(){O(this).is(":selected")&&n.eq(O(this).index()).addClass("selected")})):(n.filter(":not(.disabled):not(.optgroup)").click(function(e){$.focus();var t,i,s=O(this);e.ctrlKey||e.metaKey||s.addClass("selected"),e.shiftKey||s.addClass("first"),e.ctrlKey||e.metaKey||e.shiftKey||s.siblings().removeClass("selected first"),(e.ctrlKey||e.metaKey)&&(s.is(".selected")?s.removeClass("selected first"):s.addClass("selected first"),s.siblings().removeClass("first")),e.shiftKey&&(i=t=!1,s.siblings().removeClass("selected").siblings(".first").addClass("selected"),s.prevAll().each(function(){O(this).is(".first")&&(t=!0)}),s.nextAll().each(function(){O(this).is(".first")&&(i=!0)}),t&&s.prevAll().each(function(){return!O(this).is(".selected")&&void O(this).not(".disabled, .optgroup").addClass("selected")}),i&&s.nextAll().each(function(){return!O(this).is(".selected")&&void O(this).not(".disabled, .optgroup").addClass("selected")}),1==n.filter(".selected").length&&s.addClass("first")),z.prop("selected",!1),n.filter(".selected").each(function(){var e=O(this),t=e.index();e.is(".option")&&(t-=e.prevAll(".optgroup").length),z.eq(t).prop("selected",!0)}),$.change()}),z.each(function(e){O(this).data("optionIndex",e)}),$.on("change.styler",function(){n.removeClass("selected");var t=[];z.filter(":selected").each(function(){t.push(O(this).data("optionIndex"))}),n.not(".optgroup").filter(function(e){return-1<O.inArray(e,t)}).addClass("selected")}).on("focus.styler",function(){t.addClass("focused")}).on("blur.styler",function(){t.removeClass("focused")}),e>t.height()&&$.on("keydown.styler",function(e){38!=e.which&&37!=e.which&&33!=e.which||i.scrollTop(i.scrollTop()+n.filter(".selected").position().top-o),40!=e.which&&39!=e.which&&34!=e.which||i.scrollTop(i.scrollTop()+n.filter(".selected:last").position().top-i.innerHeight()+2*o)}))}():function(){var e=new W,t="",i=$.data("placeholder"),s=$.data("search"),n=$.data("search-limit"),o=$.data("search-not-found"),r=$.data("search-placeholder"),l=$.data("z-index"),c=$.data("smart-positioning");void 0===i&&(i=E.selectPlaceholder),void 0!==s&&""!==s||(s=E.selectSearch),void 0!==n&&""!==n||(n=E.selectSearchLimit),void 0!==o&&""!==o||(o=E.selectSearchNotFound),void 0===r&&(r=E.selectSearchPlaceholder),void 0!==l&&""!==l||(l=E.singleSelectzIndex),void 0!==c&&""!==c||(c=E.selectSmartPositioning);var h=O('<div class="jq-selectbox jqselect"><div class="jq-selectbox__select" style="position: relative"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>').css({display:"inline-block",position:"relative",zIndex:l}).attr({id:e.id,title:e.title}).addClass(e.classes).data(e.data);$.css({margin:0,padding:0}).after(h).prependTo(h);var a=O("div.jq-selectbox__select",h),d=O("div.jq-selectbox__select-text",h),e=z.filter(":selected");T(),s&&(t='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+r+'"></div><div class="jq-selectbox__not-found">'+o+"</div>");var u=O('<div class="jq-selectbox__dropdown" style="position: absolute">'+t+'<ul style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+S+"</ul></div>");h.append(u);var p=O("ul",u),f=O("li",u),g=O("input",u),m=O("div.jq-selectbox__not-found",u).hide();f.length<n&&g.parent().hide(),""===z.first().text()&&z.first().is(":selected")&&!1!==i?d.text(i).addClass("placeholder"):d.text(e.text());var _=0,v=0;f.css({display:"inline-block"}),f.each(function(){var e=O(this);e.innerWidth()>_&&(_=e.innerWidth(),v=e.width())}),f.css({display:""}),d.is(".placeholder")&&d.width()>_?d.width(d.width()):(y=(k=h.clone().appendTo("body").width("auto")).outerWidth(),k.remove(),y==h.outerWidth()&&d.width(v)),_>h.width()&&u.width(_),""===z.first().text()&&""!==$.data("placeholder")&&f.first().hide(),$.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});var y,w=h.outerHeight(!0),b=g.parent().outerHeight(!0)||0,x=p.css("max-height"),k=f.filter(".selected");k.length<1&&f.first().addClass("selected sel"),void 0===f.data("li-height")&&(y=f.outerHeight(),!1!==i&&(y=f.eq(1).outerHeight()),f.data("li-height",y));var j=u.css("top");if("auto"==u.css("left")&&u.css({left:0}),"auto"==u.css("top")&&(u.css({top:w}),j=w),u.hide(),k.length&&(z.first().text()!=e.text()&&h.addClass("changed"),h.data("jqfs-class",k.data("jqfs-class")),h.addClass(k.data("jqfs-class"))),$.is(":disabled"))return h.addClass("disabled");a.click(function(){var e,t,i,s,n,o,r;function a(){p.css("max-height",Math.floor((i-e.scrollTop()-20-b)/t)*t)}O("div.jq-selectbox").filter(".opened").length&&E.onSelectClosed.call(O("div.jq-selectbox").filter(".opened")),$.focus(),L||(e=O(window),t=f.data("li-height"),i=h.offset().top,s=e.height()-w-(i-e.scrollTop()),void 0!==(r=$.data("visible-options"))&&""!==r||(r=E.selectVisibleOptions),n=5*t,o=t*r,0<r&&r<6&&(n=o),0===r&&(o="auto"),r=function(){u.height("auto").css({bottom:"auto",top:j});function e(){p.css("max-height",Math.floor((s-20-b)/t)*t)}e(),p.css("max-height",o),"none"!=x&&p.css("max-height",x),s<u.outerHeight()+20&&e()},!0===c||1===c?n+b+20<s?(r(),h.removeClass("dropup").addClass("dropdown")):(u.height("auto").css({top:"auto",bottom:j}),a(),p.css("max-height",o),"none"!=x&&p.css("max-height",x),i-e.scrollTop()-20<u.outerHeight()+20&&a(),h.removeClass("dropdown").addClass("dropup")):!1===c||0===c?n+b+20<s&&(r(),h.removeClass("dropup").addClass("dropdown")):(u.height("auto").css({bottom:"auto",top:j}),p.css("max-height",o),"none"!=x&&p.css("max-height",x)),h.offset().left+u.outerWidth()>e.width()&&u.css({left:"auto",right:0}),O("div.jqselect").css({zIndex:l-1}).removeClass("opened"),h.css({zIndex:l}),u.is(":hidden")?(O("div.jq-selectbox__dropdown:visible").hide(),u.show(),h.addClass("opened focused"),E.onSelectOpened.call(h)):(u.hide(),h.removeClass("opened dropup dropdown"),O("div.jq-selectbox").filter(".opened").length&&E.onSelectClosed.call(h)),g.length&&(g.val("").keyup(),m.hide(),g.keyup(function(){var e=O(this).val();f.each(function(){O(this).html().match(new RegExp(".*?"+e+".*?","i"))?O(this).show():O(this).hide()}),""===z.first().text()&&""!==$.data("placeholder")&&f.first().hide(),f.filter(":visible").length<1?m.show():m.hide()})),f.filter(".selected").length&&(""===$.val()?p.scrollTop(0):(p.innerHeight()/t%2!=0&&(t/=2),p.scrollTop(p.scrollTop()+f.filter(".selected").position().top-p.innerHeight()/2+t))),C(p))}),f.hover(function(){O(this).siblings().removeClass("selected")}),f.filter(".selected").text(),f.filter(":not(.disabled):not(.optgroup)").click(function(){$.focus();var e,t=O(this),i=t.text();t.is(".selected")||(e=t.index(),e-=t.prevAll(".optgroup").length,t.addClass("selected sel").siblings().removeClass("selected sel"),z.prop("selected",!1).eq(e).prop("selected",!0),d.text(i),h.data("jqfs-class")&&h.removeClass(h.data("jqfs-class")),h.data("jqfs-class",t.data("jqfs-class")),h.addClass(t.data("jqfs-class")),$.change()),u.hide(),h.removeClass("opened dropup dropdown"),E.onSelectClosed.call(h)}),u.mouseout(function(){O("li.sel",u).addClass("selected")}),$.on("change.styler",function(){d.text(z.filter(":selected").text()).removeClass("placeholder"),f.removeClass("selected sel").not(".optgroup").eq($[0].selectedIndex).addClass("selected sel"),z.first().text()!=f.filter(".selected").text()?h.addClass("changed"):h.removeClass("changed")}).on("focus.styler",function(){h.addClass("focused"),O("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){h.removeClass("focused")}).on("keydown.styler keyup.styler",function(e){var t=f.data("li-height");""===$.val()?d.text(i).addClass("placeholder"):d.text(z.filter(":selected").text()),f.removeClass("selected sel").not(".optgroup").eq($[0].selectedIndex).addClass("selected sel"),38!=e.which&&37!=e.which&&33!=e.which&&36!=e.which||(""===$.val()?p.scrollTop(0):p.scrollTop(p.scrollTop()+f.filter(".selected").position().top)),40!=e.which&&39!=e.which&&34!=e.which&&35!=e.which||p.scrollTop(p.scrollTop()+f.filter(".selected").position().top-p.innerHeight()+t),13==e.which&&(e.preventDefault(),u.hide(),h.removeClass("opened dropup dropdown"),E.onSelectClosed.call(h))}).on("keydown.styler",function(e){32==e.which&&(e.preventDefault(),a.click())}),P.registered||(O(document).on("click",P),P.registered=!0)}()})(),$.on("refresh",function(){$.off(".styler").parent().before($).remove(),n()})):$.is(":reset")&&$.on("click",function(){setTimeout(function(){$.closest("form").find("input, select").trigger("refresh")},1)})},destroy:function(){var e=O(this.element);e.is(":checkbox")||e.is(":radio")?(e.removeData("_"+o).off(".styler refresh").removeAttr("style").parent().before(e).remove(),e.closest("label").add('label[for="'+e.attr("id")+'"]').off(".styler")):e.is('input[type="number"]')?e.removeData("_"+o).off(".styler refresh").closest(".jq-number").before(e).remove():(e.is(":file")||e.is("select"))&&e.removeData("_"+o).off(".styler refresh").removeAttr("style").parent().before(e).remove()}},O.fn[o]=function(t){var i,s=arguments;return void 0===t||"object"==typeof t?(this.each(function(){O.data(this,"_"+o)||O.data(this,"_"+o,new n(this,t))}).promise().done(function(){var e=O(this[0]).data("_"+o);e&&e.options.onFormStyled.call()}),this):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(this.each(function(){var e=O.data(this,"_"+o);e instanceof n&&"function"==typeof e[t]&&(i=e[t].apply(e,Array.prototype.slice.call(s,1)))}),void 0!==i?i:this):void 0},P.registered=!1}),function(we,be){we.fn.jScrollPane=function(i){function s(y,e){function w(e){var t,i,s,n,o,r,a,l,c,h,d,u,p,f,g,m=!1,_=!1;if(I=e,M===be)s=y.scrollTop(),n=y.scrollLeft(),y.css({overflow:"hidden",padding:0}),F=y.innerWidth()+ye,q=y.innerHeight(),y.width(F),M=we('<div class="jspPane" />').css("padding",ve).append(y.children()),R=we('<div class="jspContainer" />').css({width:F+"px",height:q+"px"}).append(M).appendTo(y);else{if(y.css("width",""),m=I.stickToBottom&&(20<(r=X-q)&&r-A()<10),_=I.stickToRight&&(20<(o=B-F)&&o-P()<10),(r=y.innerWidth()+ye!=F||y.outerHeight()!=q)&&(F=y.innerWidth()+ye,q=y.innerHeight(),R.css({width:F+"px",height:q+"px"})),!r&&ge==B&&M.outerHeight()==X)return y.width(F),0;ge=B,M.css("width",""),y.width(F),R.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}function v(){var e=te,t=J;switch(a){case 40:me.scrollByY(I.keyboardSpeed,!1);break;case 38:me.scrollByY(-I.keyboardSpeed,!1);break;case 34:case 32:me.scrollByY(q*I.scrollPagePercent,!1);break;case 33:me.scrollByY(-q*I.scrollPagePercent,!1);break;case 39:me.scrollByX(I.keyboardSpeed,!1);break;case 37:me.scrollByX(-I.keyboardSpeed,!1)}return l=e!=te||t!=J}M.css("overflow","auto"),B=e.contentWidth||M[0].scrollWidth,X=M[0].scrollHeight,M.css("overflow",""),Z=1<(K=X/q),(U=1<(Y=B/F))||Z?(y.addClass("jspScrollable"),(o=I.maintainPosition&&(J||te))&&(t=P(),i=A()),Z&&(R.append(we('<div class="jspVerticalBar" />').append(we('<div class="jspCap jspCapTop" />'),we('<div class="jspTrack" />').append(we('<div class="jspDrag" />').append(we('<div class="jspDragTop" />'),we('<div class="jspDragBottom" />'))),we('<div class="jspCap jspCapBottom" />'))),ie=R.find(">.jspVerticalBar"),se=ie.find(">.jspTrack"),V=se.find(">.jspDrag"),I.showArrows&&(re=we('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",j(0,-1)).bind("click.jsp",N),ae=we('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",j(0,1)).bind("click.jsp",N),I.arrowScrollOnHover&&(re.bind("mouseover.jsp",j(0,-1,re)),ae.bind("mouseover.jsp",j(0,1,ae))),k(se,I.verticalArrowPositions,re,ae)),ne=q,R.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ne-=we(this).outerHeight()}),V.hover(function(){V.addClass("jspHover")},function(){V.removeClass("jspHover")}).bind("mousedown.jsp",function(e){we("html").bind("dragstart.jsp selectstart.jsp",N),V.addClass("jspActive");var t=e.pageY-V.position().top;return we("html").bind("mousemove.jsp",function(e){z(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",T),!1}),b()),U&&(R.append(we('<div class="jspHorizontalBar" />').append(we('<div class="jspCap jspCapLeft" />'),we('<div class="jspTrack" />').append(we('<div class="jspDrag" />').append(we('<div class="jspDragLeft" />'),we('<div class="jspDragRight" />'))),we('<div class="jspCap jspCapRight" />'))),le=R.find(">.jspHorizontalBar"),ce=le.find(">.jspTrack"),Q=ce.find(">.jspDrag"),I.showArrows&&(ue=we('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",j(-1,0)).bind("click.jsp",N),pe=we('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",j(1,0)).bind("click.jsp",N),I.arrowScrollOnHover&&(ue.bind("mouseover.jsp",j(-1,0,ue)),pe.bind("mouseover.jsp",j(1,0,pe))),k(ce,I.horizontalArrowPositions,ue,pe)),Q.hover(function(){Q.addClass("jspHover")},function(){Q.removeClass("jspHover")}).bind("mousedown.jsp",function(e){we("html").bind("dragstart.jsp selectstart.jsp",N),Q.addClass("jspActive");var t=e.pageX-Q.position().left;return we("html").bind("mousemove.jsp",function(e){W(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",T),!1}),he=R.innerWidth(),x()),U&&Z&&(r=ce.outerHeight(),e=se.outerWidth(),ne-=r,we(le).find(">.jspCap:visible,>.jspArrow").each(function(){he+=we(this).outerWidth()}),he-=e,q-=e,F-=r,ce.parent().append(we('<div class="jspCorner" />').css("width",r+"px")),b(),x()),U&&M.width(R.outerWidth()-ye+"px"),X=M.outerHeight(),K=X/q,U&&((de=Math.ceil(1/Y*he))>I.horizontalDragMaxWidth?de=I.horizontalDragMaxWidth:de<I.horizontalDragMinWidth&&(de=I.horizontalDragMinWidth),Q.width(de+"px"),ee=he-de,$(te)),Z&&((oe=Math.ceil(1/K*ne))>I.verticalDragMaxHeight?oe=I.verticalDragMaxHeight:oe<I.verticalDragMinHeight&&(oe=I.verticalDragMinHeight),V.height(oe+"px"),G=ne-oe,S(J)),o&&(L(_?B-F:t,!1),E(m?X-q:i,!1)),M.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){O(e.target,!1)}),R.unbind(_e).bind(_e,function(e,t,i,s){var n=te,o=J;return me.scrollBy(i*I.mouseWheelSpeed,-s*I.mouseWheelSpeed,!1),n==te&&o==J}),g=!1,R.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];h=P(),d=A(),u=e.pageX,p=e.pageY,g=!(f=!1)}).bind("touchmove.jsp",function(e){if(g){var t=e.originalEvent.touches[0],i=te,e=J;return me.scrollTo(h+u-t.pageX,d+p-t.pageY),f=f||5<Math.abs(u-t.pageX)||5<Math.abs(p-t.pageY),i==te&&e==J}}).bind("touchend.jsp",function(e){g=!1}).bind("click.jsp-touchclick",function(e){if(f)return f=!1}),I.enableKeyboardNavigation&&(c=[],U&&c.push(le[0]),Z&&c.push(ie[0]),M.focus(function(){y.focus()}),y.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||c.length&&we(e.target).closest(c).length){var t=te,i=J;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:a=e.keyCode,v();break;case 35:E(X-q),a=null;break;case 36:E(0),a=null}return!(l=e.keyCode==a&&t!=te||i!=J)}}).bind("keypress.jsp",function(e){return e.keyCode==a&&v(),!l}),I.hideFocus?(y.css("outline","none"),"hideFocus"in R[0]&&y.attr("hideFocus",!0)):(y.css("outline",""),"hideFocus"in R[0]&&y.attr("hideFocus",!1))),I.clickOnTrack&&(C(),Z&&se.bind("mousedown.jsp",function(s){if(s.originalTarget===be||s.originalTarget==s.currentTarget){var n,o=we(this),e=o.offset(),r=s.pageY-e.top-J,a=!0,l=function(){var e=o.offset(),t=s.pageY-e.top-oe/2,i=q*I.scrollPagePercent,e=G*i/(X-q);if(r<0)t<J-e?me.scrollByY(-i):z(t);else{if(!(0<r))return void c();J+e<t?me.scrollByY(i):z(t)}n=setTimeout(l,a?I.initialDelay:I.trackClickRepeatFreq),a=!1},c=function(){n&&clearTimeout(n),n=null,we(document).unbind("mouseup.jsp",c)};return l(),we(document).bind("mouseup.jsp",c),!1}}),U&&ce.bind("mousedown.jsp",function(s){if(s.originalTarget===be||s.originalTarget==s.currentTarget){var n,o=we(this),e=o.offset(),r=s.pageX-e.left-te,a=!0,l=function(){var e=o.offset(),t=s.pageX-e.left-de/2,i=F*I.scrollPagePercent,e=ee*i/(B-F);if(r<0)t<te-e?me.scrollByX(-i):W(t);else{if(!(0<r))return void c();te+e<t?me.scrollByX(i):W(t)}n=setTimeout(l,a?I.initialDelay:I.trackClickRepeatFreq),a=!1},c=function(){n&&clearTimeout(n),n=null,we(document).unbind("mouseup.jsp",c)};return l(),we(document).bind("mouseup.jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,i=escape(location.hash);try{e=we(i)}catch(e){return}e.length&&M.find(i)&&(0===R.scrollTop()?t=setInterval(function(){0<R.scrollTop()&&(O(i,!0),we(document).scrollTop(R.position().top),clearInterval(t))},50):(O(i,!0),we(document).scrollTop(R.position().top)))}}(),I.hijackInternalLinks&&D()):(y.removeClass("jspScrollable"),M.css({top:0,width:R.width()-ye}),R.unbind(_e),M.find(":input,a").unbind("focus.jsp"),y.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),C(),H()),I.autoReinitialise&&!fe?fe=setInterval(function(){w(I)},I.autoReinitialiseDelay):!I.autoReinitialise&&fe&&clearInterval(fe),s&&y.scrollTop(0)&&E(s,!1),n&&y.scrollLeft(0)&&L(n,!1),y.trigger("jsp-initialised",[U||Z])}function b(){se.height(ne+"px"),J=0,t=I.verticalGutter+se.outerWidth(),M.width(F-t-ye);try{0===ie.position().left&&M.css("margin-left",t+"px")}catch(e){}}function x(){R.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){he-=we(this).outerWidth()}),ce.width(he+"px"),te=0}function k(e,t,i,s){var n="before",o="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==n?o=t:t==o&&(n=t,t=i,i=s,s=t),e[n](i)[o](s)}function j(e,t,i){return function(){return function(e,t,i,s){i=we(i).addClass("jspActive");var n,o,r=!0,a=function(){0!==e&&me.scrollByX(e*I.arrowButtonSpeed),0!==t&&me.scrollByY(t*I.arrowButtonSpeed),o=setTimeout(a,r?I.initialDelay:I.arrowRepeatFreq),r=!1};a(),n=s?"mouseout.jsp":"mouseup.jsp",(s=s||we("html")).bind(n,function(){i.removeClass("jspActive"),o&&clearTimeout(o),o=null,s.unbind(n)})}(e,t,this,i),this.blur(),!1}}function C(){ce&&ce.unbind("mousedown.jsp"),se&&se.unbind("mousedown.jsp")}function T(){we("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),V&&V.removeClass("jspActive"),Q&&Q.removeClass("jspActive")}function z(e,t){Z&&(e<0?e=0:G<e&&(e=G),t===be&&(t=I.animateScroll),t?me.animate(V,"top",e,S):(V.css("top",e),S(e)))}function S(e){e===be&&(e=V.position().top),R.scrollTop(0);var t,i=0===(J=e),s=J==G,n=-(e/G)*(X-q);o==i&&a==s||(o=i,a=s,y.trigger("jsp-arrow-change",[o,a,r,l])),t=i,e=s,I.showArrows&&(re[t?"addClass":"removeClass"]("jspDisabled"),ae[e?"addClass":"removeClass"]("jspDisabled")),M.css("top",n),y.trigger("jsp-scroll-y",[-n,i,s]).trigger("scroll")}function W(e,t){U&&(e<0?e=0:ee<e&&(e=ee),t===be&&(t=I.animateScroll),t?me.animate(Q,"left",e,$):(Q.css("left",e),$(e)))}function $(e){e===be&&(e=Q.position().left),R.scrollTop(0);var t,i=0===(te=e),s=te==ee,n=-(e/ee)*(B-F);r==i&&l==s||(r=i,l=s,y.trigger("jsp-arrow-change",[o,a,r,l])),t=i,e=s,I.showArrows&&(ue[t?"addClass":"removeClass"]("jspDisabled"),pe[e?"addClass":"removeClass"]("jspDisabled")),M.css("left",n),y.trigger("jsp-scroll-x",[-n,i,s]).trigger("scroll")}function E(e,t){z(e/(X-q)*G,t)}function L(e,t){W(e/(B-F)*ee,t)}function O(e,t,i){var s,n,o,r,a,l,c,h=0,d=0;try{s=we(e)}catch(e){return}for(r=s.outerHeight(),n=s.outerWidth(),R.scrollTop(0),R.scrollLeft(0);!s.is(".jspPane");)if(h+=s.position().top,d+=s.position().left,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;a=(o=A())+q,h<o||t?l=h-I.verticalGutter:a<h+r&&(l=h-q+r+I.verticalGutter),l&&E(l,i),l=(r=P())+F,d<r||t?c=d-I.horizontalGutter:l<d+n&&(c=d-F+n+I.horizontalGutter),c&&L(c,i)}function P(){return-M.position().left}function A(){return-M.position().top}function N(){return!1}function H(){we("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function D(){H(),we("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e,t=this.href.split("#");if(1<t.length&&(0<(e=t[1]).length&&0<M.find("#"+e).length))return O("#"+e,!0),!1})}var I,M,F,q,R,B,X,Y,K,Z,U,V,G,J,Q,ee,te,ie,se,t,ne,oe,re,ae,le,ce,he,de,ue,pe,fe,ge,me=this,o=!0,r=!0,a=!1,l=!1,i=y.clone(!1,!1).empty(),_e=we.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",ve=y.css("paddingTop")+" "+y.css("paddingRight")+" "+y.css("paddingBottom")+" "+y.css("paddingLeft"),ye=(parseInt(y.css("paddingLeft"),10)||0)+(parseInt(y.css("paddingRight"),10)||0);we.extend(me,{reinitialise:function(e){w(e=we.extend({},I,e))},scrollToElement:function(e,t,i){O(e,t,i)},scrollTo:function(e,t,i){L(e,i),E(t,i)},scrollToX:function(e,t){L(e,t)},scrollToY:function(e,t){E(e,t)},scrollToPercentX:function(e,t){L(e*(B-F),t)},scrollToPercentY:function(e,t){E(e*(X-q),t)},scrollBy:function(e,t,i){me.scrollByX(e,i),me.scrollByY(t,i)},scrollByX:function(e,t){W((P()+Math[e<0?"floor":"ceil"](e))/(B-F)*ee,t)},scrollByY:function(e,t){z((A()+Math[e<0?"floor":"ceil"](e))/(X-q)*G,t)},positionDragX:function(e,t){W(e,t)},positionDragY:function(e,t){z(e,t)},animate:function(e,t,i,s){var n={};n[t]=i,e.animate(n,{duration:I.animateDuration,ease:I.animateEase,queue:!1,step:s})},getContentPositionX:P,getContentPositionY:A,getContentWidth:function(){return B},getContentHeight:function(){return X},getPercentScrolledX:function(){return P()/(B-F)},getPercentScrolledY:function(){return A()/(X-q)},getIsScrollableH:function(){return U},getIsScrollableV:function(){return Z},getContentPane:function(){return M},scrollToBottom:function(e){z(G,e)},hijackInternalLinks:function(){D()},destroy:function(){var e,t;e=A(),t=P(),y.removeClass("jspScrollable").unbind(".jsp"),y.replaceWith(i.append(M.children())),i.scrollTop(e),i.scrollLeft(t)}}),w(e)}return i=we.extend({},we.fn.jScrollPane.defaults,i),we.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){i[this]=i[this]||i.speed}),this.each(function(){var e=we(this),t=e.data("jsp");t?t.reinitialise(i):(t=new s(e,i),e.data("jsp",t))})},we.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:be,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(k){var s,e=navigator.userAgent,j=/iphone/i.test(e),C=/chrome/i.test(e),T=/android/i.test(e);k.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},k.fn.extend({caret:function(e,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,m){var i,_,v,y,w,b,x;if(!t&&0<this.length){var e=k(this[0]).data(k.mask.dataName);return e?e():void 0}return m=k.extend({autoclear:k.mask.autoclear,placeholder:k.mask.placeholder,completed:null},m),i=k.mask.definitions,_=[],v=b=t.length,y=null,k.each(t.split(""),function(e,t){"?"==t?(b--,v=e):i[t]?(_.push(new RegExp(i[t])),null===y&&(y=_.length-1),e<v&&(w=_.length-1)):_.push(null)}),this.trigger("unmask").each(function(){function r(){if(m.completed){for(var e=y;e<=w;e++)if(_[e]&&p[e]===a(e))return;m.completed.call(u)}}function a(e){return m.placeholder.charAt(e<m.placeholder.length?e:0)}function l(e){for(;++e<b&&!_[e];);return e}function c(e,t){var i,s;if(!(e<0)){for(i=e,s=l(t);i<b;i++)if(_[i]){if(!(s<b&&_[i].test(p[s])))break;p[i]=p[s],p[s]=a(s),s=l(s)}d(),u.caret(Math.max(y,e))}}function n(){o(),u.val()!=g&&u.change()}function h(e,t){for(var i=e;i<t&&i<b;i++)_[i]&&(p[i]=a(i))}function d(){u.val(p.join(""))}function o(e){for(var t,i=u.val(),s=-1,n=0,o=0;n<b;n++)if(_[n]){for(p[n]=a(n);o++<i.length;)if(t=i.charAt(o-1),_[n].test(t)){p[n]=t,s=n;break}if(o>i.length){h(n+1,b);break}}else p[n]===i.charAt(o)&&o++,n<v&&(s=n);return e?d():s+1<v?m.autoclear||p.join("")===f?(u.val()&&u.val(""),h(0,b)):d():(d(),u.val(u.val().substring(0,s+1))),v?n:y}var u=k(this),p=k.map(t.split(""),function(e,t){return"?"!=e?i[e]?a(t):e:void 0}),f=p.join(""),g=u.val();u.data(k.mask.dataName,function(){return k.map(p,function(e,t){return _[t]&&e!=a(t)?e:null}).join("")}),u.one("unmask",function(){u.off(".mask").removeData(k.mask.dataName)}).on("focus.mask",function(){var e;u.prop("readonly")||(clearTimeout(s),g=u.val(),e=o(),s=setTimeout(function(){u.get(0)===document.activeElement&&(d(),e==t.replace("?","").length?u.caret(0,e):u.caret(e))},10))}).on("blur.mask",n).on("keydown.mask",function(e){var t,i,s;u.prop("readonly")||(s=e.which||e.keyCode,x=u.val(),8===s||46===s||j&&127===s?(t=(i=u.caret()).begin,(i=i.end)-t==0&&(t=46!==s?function(e){for(;0<=--e&&!_[e];);return e}(t):i=l(t-1),i=46===s?l(i):i),h(t,i),c(t,i-1),e.preventDefault()):13===s?n.call(this,e):27===s&&(u.val(g),u.caret(0,o()),e.preventDefault()))}).on("keypress.mask",function(e){var n,t,i,s,o;u.prop("readonly")||(s=e.which||e.keyCode,o=u.caret(),e.ctrlKey||e.altKey||e.metaKey||s<32||!s||13===s||(o.end-o.begin!=0&&(h(o.begin,o.end),c(o.begin,o.end-1)),(n=l(o.begin-1))<b&&(t=String.fromCharCode(s),_[n].test(t))&&(function(){for(var e,t,i=n,s=a(n);i<b;i++)if(_[i]){if(e=l(i),t=p[i],p[i]=s,!(e<b&&_[e].test(t)))break;s=t}}(),p[n]=t,d(),i=l(n),T?setTimeout(function(){k.proxy(k.fn.caret,u,i)()},0):u.caret(i),o.begin<=w&&r()),e.preventDefault()))}).on("input.mask paste.mask",function(){u.prop("readonly")||setTimeout(function(){var e=o(!0);u.caret(e),r()},0)}),C&&T&&u.off("input.mask").on("input.mask",function(){var e=u.val(),t=u.caret();if(x&&x.length&&x.length>e.length){for(o(!0);0<t.begin&&!_[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<y&&!_[t.begin];)t.begin++;u.caret(t.begin,t.begin)}else{for(o(!0);t.begin<b&&!_[t.begin];)t.begin++;u.caret(t.begin,t.begin)}r()}),o()})}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(h){function t(e){var t,i=e||window.event,s=g.call(arguments,1),n=0,o=0,r=0,a=0,l=0,c=0;if((e=h.event.fix(i)).type="mousewheel","detail"in i&&(r=-1*i.detail),"wheelDelta"in i&&(r=i.wheelDelta),"wheelDeltaY"in i&&(r=i.wheelDeltaY),"wheelDeltaX"in i&&(o=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(o=-1*r,r=0),n=0===r?o:r,"deltaY"in i&&(n=r=-1*i.deltaY),"deltaX"in i&&(o=i.deltaX,0===r&&(n=-1*o)),0!==r||0!==o){1===i.deltaMode?(n*=t=h.data(this,"mousewheel-line-height"),r*=t,o*=t):2===i.deltaMode&&(n*=t=h.data(this,"mousewheel-page-height"),r*=t,o*=t);var a=Math.max(Math.abs(r),Math.abs(o));return f&&!(a<f)||u(i,f=a)&&(f/=40),u(i,a)&&(n/=40,o/=40,r/=40),n=Math[1<=n?"floor":"ceil"](n/f),o=Math[1<=o?"floor":"ceil"](o/f),r=Math[1<=r?"floor":"ceil"](r/f),m.settings.normalizeOffset&&this.getBoundingClientRect&&(a=this.getBoundingClientRect(),l=e.clientX-a.left,c=e.clientY-a.top),e.deltaX=o,e.deltaY=r,e.deltaFactor=f,e.offsetX=l,e.offsetY=c,e.deltaMode=0,s.unshift(e,n,o,r),p&&clearTimeout(p),p=setTimeout(d,200),(h.event.dispatch||h.event.handle).apply(this,s)}}function d(){f=null}function u(e,t){return m.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var p,f,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],g=Array.prototype.slice;if(h.event.fixHooks)for(var s=e.length;s;)h.event.fixHooks[e[--s]]=h.event.mouseHooks;var m=h.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t;h.data(this,"mousewheel-line-height",m.getLineHeight(this)),h.data(this,"mousewheel-page-height",m.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null;h.removeData(this,"mousewheel-line-height"),h.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=h(e),e=t["offsetParent"in h.fn?"offsetParent":"parent"]();return e.length||(e=h("body")),parseInt(e.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return h(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};h.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(l,c,o,r){function i(e,t){this.settings=null,this.options=l.extend({},i.Defaults,t),this.$element=l(e),this.drag=l.extend({},s),this.state=l.extend({},a),this.e=l.extend({},h),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],l.each(i.Plugins,l.proxy(function(e,t){this._plugins[e[0].toLowerCase()+e.slice(1)]=new t(this)},this)),l.each(i.Pipe,l.proxy(function(e,t){this._pipe.push({filter:t.filter,run:l.proxy(t.run,this)})},this)),this.setup(),this.initialize()}function n(e){return e.touches!==r?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.touches===r?e.pageX!==r?{x:e.pageX,y:e.pageY}:e.pageX===r?{x:e.clientX,y:e.clientY}:void 0:void 0}function e(e){var t,i,s=o.createElement("div"),n=e;for(t in n)if(i=n[t],void 0!==s.style[i])return s=null,[i,t];return[!1]}var s={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},a={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},h={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null};i.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:c,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},i.Width={Default:"default",Inner:"inner",Outer:"outer"},i.Plugins={},i.Pipe=[{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var e=this._clones;(this.$stage.children(".cloned").length!==e.length||!this.settings.loop&&0<e.length)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){for(var e=this._clones,t=this._items,i=this.settings.loop?e.length-Math.max(2*this.settings.items,4):0,s=0,n=Math.abs(i/2);s<n;s++)0<i?(this.$stage.children().eq(t.length+e.length-1).remove(),e.pop(),this.$stage.children().eq(0).remove(),e.pop()):(e.push(e.length/2),this.$stage.append(t[e[e.length-1]].clone().addClass("cloned")),e.push(t.length-1-(e.length-1)/2),this.$stage.prepend(t[e[e.length-1]].clone().addClass("cloned")))}},{filter:["width","items","settings"],run:function(){var e,t,i,s=this.settings.rtl?1:-1,n=(this.width()/this.settings.items).toFixed(3),o=0;for(this._coordinates=[],t=0,i=this._clones.length+this._items.length;t<i;t++)e=this._mergers[this.relative(t)],e=this.settings.mergeFit&&Math.min(e,this.settings.items)||e,o+=(this.settings.autoWidth?this._items[this.relative(t)].width()+this.settings.margin:n*e)*s,this._coordinates.push(o)}},{filter:["width","items","settings"],run:function(){var e,t,i=(this.width()/this.settings.items).toFixed(3),s={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(s),(s={width:this.settings.autoWidth?"auto":i-this.settings.margin})[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&0<l.grep(this._mergers,function(e){return 1<e}).length)for(e=0,t=this._coordinates.length;e<t;e++)s.width=Math.abs(this._coordinates[e])-Math.abs(this._coordinates[e-1]||0)-this.settings.margin,this.$stage.children().eq(e).css(s);else this.$stage.children().css(s)}},{filter:["width","items","settings"],run:function(e){e.current&&this.reset(this.$stage.children().index(e.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){for(var e,t,i=this.settings.rtl?1:-1,s=2*this.settings.stagePadding,n=this.coordinates(this.current())+s,o=n+this.width()*i,r=[],a=0,l=this._coordinates.length;a<l;a++)e=this._coordinates[a-1]||0,t=Math.abs(this._coordinates[a])+s*i,(this.op(e,"<=",n)&&this.op(e,">",o)||this.op(t,"<",n)&&this.op(t,">",o))&&r.push(a);this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+r.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],i.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&!0!==this.state.imagesLoaded){var e=this.$element.find("img"),t=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:r,t=this.$element.children(t).width();if(e.length&&t<=0)return this.preloadAutoWidthImages(e),!1}this.$element.addClass("owl-loading"),this.$stage=l("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},i.prototype.setup=function(){var t=this.viewport(),e=this.options.responsive,i=-1,s=null;e?(l.each(e,function(e){e<=t&&i<e&&(i=Number(e))}),delete(s=l.extend({},this.options,e[i])).responsive,s.responsiveClass&&this.$element.attr("class",function(e,t){return t.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+i)):s=l.extend({},this.options),null!==this.settings&&this._breakpoint===i||(this.trigger("change",{property:{name:"settings",value:s}}),this._breakpoint=i,this.settings=s,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},i.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},i.prototype.prepare=function(e){var t=this.trigger("prepare",{content:e});return t.data||(t.data=l("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(e)),this.trigger("prepared",{content:t.data}),t.data},i.prototype.update=function(){for(var e=0,t=this._pipe.length,i=l.proxy(function(e){return this[e]},this._invalidated),s={};e<t;)(this._invalidated.all||0<l.grep(this._pipe[e].filter,i).length)&&this._pipe[e].run(s),e++;this._invalidated={}},i.prototype.width=function(e){switch(e=e||i.Width.Default){case i.Width.Inner:case i.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},i.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime(),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=c.orientation,this.watchVisibility(),this.trigger("refreshed")},i.prototype.eventsCall=function(){this.e._onDragStart=l.proxy(function(e){this.onDragStart(e)},this),this.e._onDragMove=l.proxy(function(e){this.onDragMove(e)},this),this.e._onDragEnd=l.proxy(function(e){this.onDragEnd(e)},this),this.e._onResize=l.proxy(function(e){this.onResize(e)},this),this.e._transitionEnd=l.proxy(function(e){this.transitionEnd(e)},this),this.e._preventClick=l.proxy(function(e){this.preventClick(e)},this)},i.prototype.onThrottledResize=function(){c.clearTimeout(this.resizeTimer),this.resizeTimer=c.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},i.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!this.trigger("resize").isDefaultPrevented()&&(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized"))},i.prototype.eventsRouter=function(e){var t=e.type;"mousedown"===t||"touchstart"===t?this.onDragStart(e):"mousemove"===t||"touchmove"===t?this.onDragMove(e):"mouseup"!==t&&"touchend"!==t&&"touchcancel"!==t||this.onDragEnd(e)},i.prototype.internalEvents=function(){var e=("ontouchstart"in c||navigator.msMaxTouchPoints,c.navigator.msPointerEnabled);this.settings.mouseDrag?(this.$stage.on("mousedown",l.proxy(function(e){this.eventsRouter(e)},this)),this.$stage.on("dragstart",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!e&&this.$stage.on("touchstart touchcancel",l.proxy(function(e){this.eventsRouter(e)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),!1!==this.settings.responsive&&this.on(c,"resize",l.proxy(this.onThrottledResize,this))},i.prototype.onDragStart=function(e){var t,i,s=e.originalEvent||e||c.event;if(3===s.which||this.state.isTouch)return!1;if("mousedown"===s.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,t=n(s).x,i=n(s).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)e=this.getTransformProperty(),this.drag.offsetX=e,this.animate(e),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1;this.drag.startX=t-this.drag.offsetX,this.drag.startY=i-this.drag.offsetY,this.drag.start=t-this.drag.startX,this.drag.targetEl=s.target||s.srcElement,this.drag.updatedX=this.drag.start,"IMG"!==this.drag.targetEl.tagName&&"A"!==this.drag.targetEl.tagName||(this.drag.targetEl.draggable=!1),l(o).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",l.proxy(function(e){this.eventsRouter(e)},this))},i.prototype.onDragMove=function(e){var t,i,s;this.state.isTouch&&(this.state.isScrolling||(i=n(t=e.originalEvent||e||c.event).x,s=n(t).y,this.drag.currentX=i-this.drag.startX,this.drag.currentY=s-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":0<this.drag.distance&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(e=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),s=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,e+s),i+s)),(8<this.drag.distance||this.drag.distance<-8)&&(t.preventDefault!==r?t.preventDefault():t.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(16<this.drag.currentY||this.drag.currentY<-16)&&!1===this.state.isSwiping&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},i.prototype.onDragEnd=function(e){if(this.state.isTouch){if("mouseup"===e.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&!0!==this.state.inMotion)return this.state.inMotion=!1;this.drag.endTime=(new Date).getTime(),e=this.drag.endTime-this.drag.startTime,(3<Math.abs(this.drag.distance)||300<e)&&this.removeClick(this.drag.targetEl),e=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(e),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(e)||this.transitionEnd(),this.drag.distance=0,l(o).off(".owl.dragEvents")}},i.prototype.removeClick=function(e){this.drag.targetEl=e,l(e).on("click.preventClick",this.e._preventClick),c.setTimeout(function(){l(e).off("click.preventClick")},300)},i.prototype.preventClick=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),l(e.target).off("click.preventClick")},i.prototype.getTransformProperty=function(){var e=c.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform");return!0!=(16===(e=e.replace(/matrix(3d)?\(|\)/g,"").split(",")).length)?e[4]:e[12]},i.prototype.closest=function(i){var s=-1,n=this.width(),o=this.coordinates();return this.settings.freeDrag||l.each(o,l.proxy(function(e,t){return t-30<i&&i<t+30?s=e:this.op(i,"<",t)&&this.op(i,">",o[e+1]||t-n)&&(s="left"===this.state.direction?e+1:e),-1===s},this)),this.settings.loop||(this.op(i,">",o[this.minimum()])?s=i=this.minimum():this.op(i,"<",o[this.maximum()])&&(s=i=this.maximum())),s},i.prototype.animate=function(e){this.trigger("translate"),this.state.inMotion=0<this.speed(),this.support3d?this.$stage.css({transform:"translate3d("+e+"px,0px, 0px)",transition:this.speed()/1e3+"s"}):this.state.isTouch?this.$stage.css({left:e+"px"}):this.$stage.animate({left:e},this.speed()/1e3,this.settings.fallbackEasing,l.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},i.prototype.current=function(e){return e===r?this._current:0===this._items.length?r:(e=this.normalize(e),this._current!==e&&((t=this.trigger("change",{property:{name:"position",value:e}})).data!==r&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})),this._current);var t},i.prototype.invalidate=function(e){this._invalidated[e]=!0},i.prototype.reset=function(e){(e=this.normalize(e))!==r&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},i.prototype.normalize=function(e,t){var i=t?this._items.length:this._items.length+this._clones.length;return!l.isNumeric(e)||i<1?r:e=this._clones.length?(e%i+i)%i:Math.max(this.minimum(t),Math.min(this.maximum(t),e))},i.prototype.relative=function(e){return e=this.normalize(e),e-=this._clones.length/2,this.normalize(e,!0)},i.prototype.maximum=function(e){var t,i,s,n=0,o=this.settings;if(e)return this._items.length-1;if(!o.loop&&o.center)t=this._items.length-1;else if(o.loop||o.center)if(o.loop||o.center)t=this._items.length+o.items;else{if(!o.autoWidth&&!o.merge)throw"Can not detect maximum absolute position.";for(revert=o.rtl?1:-1,i=this.$stage.width()-this.$element.width();(s=this.coordinates(n))&&!(s*revert>=i);)t=++n}else t=this._items.length-o.items;return t},i.prototype.minimum=function(e){return e?0:this._clones.length/2},i.prototype.items=function(e){return e===r?this._items.slice():(e=this.normalize(e,!0),this._items[e])},i.prototype.mergers=function(e){return e===r?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},i.prototype.clones=function(i){function s(e){return e%2==0?n+e/2:t-(e+1)/2}var t=this._clones.length/2,n=t+this._items.length;return i===r?l.map(this._clones,function(e,t){return s(t)}):l.map(this._clones,function(e,t){return e===i?s(t):null})},i.prototype.speed=function(e){return e!==r&&(this._speed=e),this._speed},i.prototype.coordinates=function(e){var t=null;return e===r?l.map(this._coordinates,l.proxy(function(e,t){return this.coordinates(t)},this)):(this.settings.center?(t=this._coordinates[e],t+=(this.width()-t+(this._coordinates[e-1]||0))/2*(this.settings.rtl?-1:1)):t=this._coordinates[e-1]||0,t)},i.prototype.duration=function(e,t,i){return Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(i||this.settings.smartSpeed)},i.prototype.to=function(e,t){var i,s,n,o,r,a;this.settings.loop?(i=e-this.relative(this.current()),s=this.current(),r=(n=this.current())-(o=this.current()+i)<0,a=this._clones.length+this._items.length,o<this.settings.items&&!1==r?(s=n+this._items.length,this.reset(s)):o>=a-this.settings.items&&!0==r&&(s=n-this._items.length,this.reset(s)),c.clearTimeout(this.e._goToLoop),this.e._goToLoop=c.setTimeout(l.proxy(function(){this.speed(this.duration(this.current(),s+i,t)),this.current(s+i),this.update()},this),30)):(this.speed(this.duration(this.current(),e,t)),this.current(e),this.update())},i.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},i.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},i.prototype.transitionEnd=function(e){return(e===r||(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)===this.$stage.get(0)))&&(this.state.inMotion=!1,void this.trigger("translated"))},i.prototype.viewport=function(){var e;if(this.options.responsiveBaseElement!==c)e=l(this.options.responsiveBaseElement).width();else if(c.innerWidth)e=c.innerWidth;else{if(!o.documentElement||!o.documentElement.clientWidth)throw"Can not detect viewport width.";e=o.documentElement.clientWidth}return e},i.prototype.replace=function(e){this.$stage.empty(),this._items=[],e=e&&(e instanceof jQuery?e:l(e)),this.settings.nestedItemSelector&&(e=e.find("."+this.settings.nestedItemSelector)),e.filter(function(){return 1===this.nodeType}).each(l.proxy(function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(+t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset(l.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},i.prototype.add=function(e,t){t=t===r?this._items.length:this.normalize(t,!0),this.trigger("add",{content:e,position:t}),0===this._items.length||t===this._items.length?(this.$stage.append(e),this._items.push(e),this._mergers.push(+e.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[t].before(e),this._items.splice(t,0,e),this._mergers.splice(t,0,+e.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:e,position:t})},i.prototype.remove=function(e){(e=this.normalize(e,!0))!==r&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},i.prototype.addTriggerableEvents=function(){var i=l.proxy(function(t,i){return l.proxy(function(e){e.relatedTarget!==this&&(this.suppress([i]),t.apply(this,[].slice.call(arguments,1)),this.release([i]))},this)},this);l.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},l.proxy(function(e,t){this.$element.on(e+".owl.carousel",i(t,e+".owl.carousel"))},this))},i.prototype.watchVisibility=function(){function e(e){return 0<e.offsetWidth&&0<e.offsetHeight}e(this.$element.get(0))||(this.$element.addClass("owl-hidden"),c.clearInterval(this.e._checkVisibile),this.e._checkVisibile=c.setInterval(l.proxy(function(){e(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),c.clearInterval(this.e._checkVisibile))},this),500))},i.prototype.preloadAutoWidthImages=function(i){var s,n,o=0,r=this;i.each(function(e,t){s=l(t),(n=new Image).onload=function(){o++,s.attr("src",n.src),s.css("opacity",1),o>=i.length&&(r.state.imagesLoaded=!0,r.initialize())},n.src=s.attr("src")||s.attr("data-src")||s.attr("data-src-retina")})},i.prototype.destroy=function(){for(var e in this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),!1!==this.settings.responsive&&l(c).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd),this._plugins)this._plugins[e].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),l(o).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return!1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},i.prototype.op=function(e,t,i){var s=this.settings.rtl;switch(t){case"<":return s?i<e:e<i;case">":return s?e<i:i<e;case">=":return s?e<=i:i<=e;case"<=":return s?i<=e:e<=i}},i.prototype.on=function(e,t,i,s){e.addEventListener?e.addEventListener(t,i,s):e.attachEvent&&e.attachEvent("on"+t,i)},i.prototype.off=function(e,t,i,s){e.removeEventListener?e.removeEventListener(t,i,s):e.detachEvent&&e.detachEvent("on"+t,i)},i.prototype.trigger=function(e,t,i){var s={item:{count:this._items.length,index:this.current()}},n=l.camelCase(l.grep(["on",e,i],function(e){return e}).join("-").toLowerCase()),o=l.Event([e,"owl",i||"carousel"].join(".").toLowerCase(),l.extend({relatedTarget:this},s,t));return this._supress[e]||(l.each(this._plugins,function(e,t){t.onTrigger&&t.onTrigger(o)}),this.$element.trigger(o),this.settings&&"function"==typeof this.settings[n]&&this.settings[n].apply(this,o)),o},i.prototype.suppress=function(e){l.each(e,l.proxy(function(e,t){this._supress[t]=!0},this))},i.prototype.release=function(e){l.each(e,l.proxy(function(e,t){delete this._supress[t]},this))},i.prototype.browserSupport=function(){this.support3d=e(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0],this.support3d&&(this.transformVendor=e(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0],this.transitionEndVendor=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"][e(["transition","WebkitTransition","MozTransition","OTransition"])[1]],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""),this.state.orientation=c.orientation},l.fn.owlCarousel=function(e){return this.each(function(){l(this).data("owlCarousel")||l(this).data("owlCarousel",new i(this,e))})},l.fn.owlCarousel.Constructor=i}(window.Zepto||window.jQuery,window,document),function(a,n){var t=function(e){this._core=e,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":a.proxy(function(e){if(e.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(e.property&&"position"==e.property.name||"initialized"==e.type))for(var t=this._core.settings,i=t.center&&Math.ceil(t.items/2)||t.items,s=t.center&&-1*i||0,n=(e.property&&e.property.value||this._core.current())+s,o=this._core.clones().length,r=a.proxy(function(e,t){this.load(t)},this);s++<i;)this.load(o/2+this._core.relative(n)),o&&a.each(this._core.clones(this._core.relative(n++)),r)},this)},this._core.options=a.extend({},t.Defaults,this._core.options),this._core.$element.on(this._handlers)};t.Defaults={lazyLoad:!1},t.prototype.load=function(e){var t=this._core.$stage.children().eq(e),e=t&&t.find(".owl-lazy");!e||-1<a.inArray(t.get(0),this._loaded)||(e.each(a.proxy(function(e,t){var i=a(t),s=1<n.devicePixelRatio&&i.attr("data-src-retina")||i.attr("data-src");this._core.trigger("load",{element:i,url:s},"lazy"),i.is("img")?i.one("load.owl.lazy",a.proxy(function(){i.css("opacity",1),this._core.trigger("loaded",{element:i,url:s},"lazy")},this)).attr("src",s):((t=new Image).onload=a.proxy(function(){i.css({"background-image":"url("+s+")",opacity:"1"}),this._core.trigger("loaded",{element:i,url:s},"lazy")},this),t.src=s)},this)),this._loaded.push(t.get(0)))},t.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=t}(window.Zepto||window.jQuery,window,document),function(t){var i=function(e){this._core=e,this._handlers={"initialized.owl.carousel":t.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":t.proxy(function(e){this._core.settings.autoHeight&&"position"==e.property.name&&this.update()},this),"loaded.owl.lazy":t.proxy(function(e){this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=t.extend({},i.Defaults,this._core.options),this._core.$element.on(this._handlers)};i.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},i.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},i.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},t.fn.owlCarousel.Constructor.Plugins.AutoHeight=i}(window.Zepto||window.jQuery,(window,document)),function(h,t,i){var s=function(e){this._core=e,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":h.proxy(function(e){this._core.settings.video&&!this.isInFullScreen()&&e.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":h.proxy(function(){this._playing&&this.stop()},this),"prepared.owl.carousel":h.proxy(function(e){var t=h(e.content).find(".owl-video");t.length&&(t.css("display","none"),this.fetch(t,h(e.content)))},this)},this._core.options=h.extend({},s.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",h.proxy(function(e){this.play(e)},this))};s.Defaults={video:!1,videoHeight:!1,videoWidth:!1},s.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":"youtube",s=e.attr("data-vimeo-id")||e.attr("data-youtube-id"),n=e.attr("data-width")||this._core.settings.videoWidth,o=e.attr("data-height")||this._core.settings.videoHeight,r=e.attr("href");if(!r)throw new Error("Missing video URL.");if(-1<(s=r.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu"))i="youtube";else{if(!(-1<s[3].indexOf("vimeo")))throw new Error("Video URL not supported.");i="vimeo"}s=s[6],this._videos[r]={type:i,id:s,width:n,height:o},t.attr("data-video",r),this.thumbnail(e,this._videos[r])},s.prototype.thumbnail=function(t,e){function i(e){s=c.lazyLoad?'<div class="owl-video-tn '+l+'" '+a+'="'+e+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+e+')"></div>',t.after(s),t.after('<div class="owl-video-play-icon"></div>')}var s,n,o=e.width&&e.height?'style="width:'+e.width+"px;height:"+e.height+'px;"':"",r=t.find("img"),a="src",l="",c=this._core.settings;return t.wrap('<div class="owl-video-wrapper"'+o+"></div>"),this._core.settings.lazyLoad&&(a="data-src",l="owl-lazy"),r.length?(i(r.attr(a)),r.remove(),!1):void("youtube"===e.type?(n="http://img.youtube.com/vi/"+e.id+"/hqdefault.jpg",i(n)):"vimeo"===e.type&&h.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+e.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){n=e[0].thumbnail_large,i(n)}}))},s.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},s.prototype.play=function(e){this._core.trigger("play",null,"video"),this._playing&&this.stop();var t,i=h(e.target||e.srcElement),s=i.closest("."+this._core.settings.itemClass),n=this._videos[s.attr("data-video")],o=n.width||"100%",e=n.height||this._core.$stage.height();"youtube"===n.type?t='<iframe width="'+o+'" height="'+e+'" src="http://www.youtube.com/embed/'+n.id+"?autoplay=1&v="+n.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===n.type&&(t='<iframe src="http://player.vimeo.com/video/'+n.id+'?autoplay=1" width="'+o+'" height="'+e+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),s.addClass("owl-video-playing"),this._playing=s,t=h('<div style="height:'+e+"px; width:"+o+'px" class="owl-video-frame">'+t+"</div>"),i.after(t)},s.prototype.isInFullScreen=function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return e&&h(e).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),!(e&&this._fullscreen&&this._playing||(this._fullscreen?(this._fullscreen=!1,1):this._playing&&this._core.state.orientation!==t.orientation&&(this._core.state.orientation=t.orientation,1)))},s.prototype.destroy=function(){var e,t;for(e in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},h.fn.owlCarousel.Constructor.Plugins.Video=s}(window.Zepto||window.jQuery,window,document),function(r){var t=function(e){this.core=e,this.core.options=r.extend({},t.Defaults,this.core.options),this.swapping=!0,this.previous=void 0,this.next=void 0,this.handlers={"change.owl.carousel":r.proxy(function(e){"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":r.proxy(function(e){this.swapping="translated"==e.type},this),"translate.owl.carousel":r.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};t.Defaults={animateOut:!1,animateIn:!1},t.prototype.swap=function(){var e,t,i,s,n,o;1===this.core.settings.items&&this.core.support3d&&(this.core.speed(0),t=r.proxy(this.clear,this),i=this.core.$stage.children().eq(this.previous),s=this.core.$stage.children().eq(this.next),n=this.core.settings.animateIn,o=this.core.settings.animateOut,this.core.current()!==this.previous&&(o&&(e=this.core.coordinates(this.previous)-this.core.coordinates(this.next),i.css({left:e+"px"}).addClass("animated owl-animated-out").addClass(o).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t)),n&&s.addClass("animated owl-animated-in").addClass(n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t)))},t.prototype.clear=function(e){r(e.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},t.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},r.fn.owlCarousel.Constructor.Plugins.Animate=t}(window.Zepto||window.jQuery,(window,document)),function(t,i,e){var s=function(e){this.core=e,this.core.options=t.extend({},s.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":t.proxy(function(){this.autoplay()},this),"play.owl.autoplay":t.proxy(function(e,t,i){this.play(t,i)},this),"stop.owl.autoplay":t.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":t.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":t.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};s.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},s.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(i.clearInterval(this.interval),this.interval=i.setInterval(t.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):i.clearInterval(this.interval)},s.prototype.play=function(){return!0===e.hidden||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:!1===this.core.settings.autoplay?void i.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},s.prototype.stop=function(){i.clearInterval(this.interval)},s.prototype.pause=function(){i.clearInterval(this.interval)},s.prototype.destroy=function(){var e,t;for(e in i.clearInterval(this.interval),this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},t.fn.owlCarousel.Constructor.Plugins.autoplay=s}(window.Zepto||window.jQuery,window,document),function(n){"use strict";var t=function(e){this._core=e,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":n.proxy(function(e){this._core.settings.dotsData&&this._templates.push(n(e.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":n.proxy(function(e){this._core.settings.dotsData&&this._templates.splice(e.position,0,n(e.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":n.proxy(function(e){this._core.settings.dotsData&&this._templates.splice(e.position,1)},this),"change.owl.carousel":n.proxy(function(e){var t,i,s;"position"!=e.property.name||this._core.state.revert||this._core.settings.loop||!this._core.settings.navRewind||(t=this._core.current(),i=this._core.maximum(),s=this._core.minimum(),e.data=e.property.value>i?i<=t?s:i:e.property.value<s?i:e.property.value)},this),"changed.owl.carousel":n.proxy(function(e){"position"==e.property.name&&this.draw()},this),"refreshed.owl.carousel":n.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=n.extend({},t.Defaults,this._core.options),this.$element.on(this._handlers)};t.Defaults={nav:!1,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},t.prototype.initialize=function(){var e,t,i=this._core.settings;for(t in i.dotsData||(this._templates=[n("<div>").addClass(i.dotClass).append(n("<span>")).prop("outerHTML")]),i.navContainer&&i.dotsContainer||(this._controls.$container=n("<div>").addClass(i.controlsClass).appendTo(this.$element)),this._controls.$indicators=i.dotsContainer?n(i.dotsContainer):n("<div>").hide().addClass(i.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",n.proxy(function(e){var t=(n(e.target).parent().is(this._controls.$indicators)?n(e.target):n(e.target).parent()).index();e.preventDefault(),this.to(t,i.dotsSpeed)},this)),e=i.navContainer?n(i.navContainer):n("<div>").addClass(i.navContainerClass).prependTo(this._controls.$container),this._controls.$next=n("<"+i.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(i.navClass[0]).html(i.navText[0]).hide().prependTo(e).on("click",n.proxy(function(){this.prev(i.navSpeed)},this)),this._controls.$next.addClass(i.navClass[1]).html(i.navText[1]).hide().appendTo(e).on("click",n.proxy(function(){this.next(i.navSpeed)},this)),this._overrides)this._core[t]=n.proxy(this[t],this)},t.prototype.destroy=function(){var e,t,i,s;for(e in this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)this._controls[t].remove();for(s in this.overides)this._core[s]=this._overrides[s];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},t.prototype.update=function(){var e,t,i=this._core.settings,s=this._core.clones().length/2,n=s+this._core.items().length,o=i.center||i.autoWidth||i.dotData?1:i.dotsEach||i.items;if("page"!==i.slideBy&&(i.slideBy=Math.min(i.slideBy,i.items)),i.dots||"page"==i.slideBy)for(this._pages=[],e=s,t=0;e<n;e++)(o<=t||0===t)&&(this._pages.push({start:e-s,end:e-s+o-1}),t=0,0),t+=this._core.mergers(this._core.relative(e))},t.prototype.draw=function(){var e,t="",i=this._core.settings,s=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!i.nav||i.loop||i.navRewind||(this._controls.$previous.toggleClass("disabled",s<=0),this._controls.$next.toggleClass("disabled",s>=this._core.maximum())),this._controls.$previous.toggle(i.nav),this._controls.$next.toggle(i.nav),i.dots){if(s=this._pages.length-this._controls.$indicators.children().length,i.dotData&&0!=s){for(e=0;e<this._controls.$indicators.children().length;e++)t+=this._templates[this._core.relative(e)];this._controls.$indicators.html(t)}else 0<s?(t=new Array(1+s).join(this._templates[0]),this._controls.$indicators.append(t)):s<0&&this._controls.$indicators.children().slice(s).remove();this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq(n.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(i.dots)},t.prototype.onTrigger=function(e){var t=this._core.settings;e.page={index:n.inArray(this.current(),this._pages),count:this._pages.length,size:t&&(t.center||t.autoWidth||t.dotData?1:t.dotsEach||t.items)}},t.prototype.current=function(){var t=this._core.relative(this._core.current());return n.grep(this._pages,function(e){return e.start<=t&&e.end>=t}).pop()},t.prototype.getPosition=function(e){var t,i,s=this._core.settings;return"page"==s.slideBy?(t=n.inArray(this.current(),this._pages),i=this._pages.length,e?++t:--t,t=this._pages[(t%i+i)%i].start):(t=this._core.relative(this._core.current()),i=this._core.items().length,e?t+=s.slideBy:t-=s.slideBy),t},t.prototype.next=function(e){n.proxy(this._overrides.to,this._core)(this.getPosition(!0),e)},t.prototype.prev=function(e){n.proxy(this._overrides.to,this._core)(this.getPosition(!1),e)},t.prototype.to=function(e,t,i){i?n.proxy(this._overrides.to,this._core)(e,t):(i=this._pages.length,n.proxy(this._overrides.to,this._core)(this._pages[(e%i+i)%i].start,t))},n.fn.owlCarousel.Constructor.Plugins.Navigation=t}(window.Zepto||window.jQuery,(window,document)),function(i,s){"use strict";var t=function(e){this._core=e,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":i.proxy(function(){"URLHash"==this._core.settings.startPosition&&i(s).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":i.proxy(function(e){var t=i(e.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[t]=e.content},this)},this._core.options=i.extend({},t.Defaults,this._core.options),this.$element.on(this._handlers),i(s).on("hashchange.owl.navigation",i.proxy(function(){var e=s.location.hash.substring(1),t=this._core.$stage.children(),t=this._hashes[e]&&t.index(this._hashes[e])||0;return!!e&&void this._core.to(t,!1,!0)},this))};t.Defaults={URLhashListener:!1},t.prototype.destroy=function(){var e,t;for(e in i(s).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},i.fn.owlCarousel.Constructor.Plugins.Hash=t}(window.Zepto||window.jQuery,window,document),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(c){function e(){}function h(e,t){f.ev.on("mfp"+e+w,t)}function d(e,t,i,s){var n=document.createElement("div");return n.className="mfp-"+e,i&&(n.innerHTML=i),s?t&&t.appendChild(n):(n=c(n),t&&n.appendTo(t)),n}function u(e,t){f.ev.triggerHandler("mfp"+e,t),f.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),f.st.callbacks[e]&&f.st.callbacks[e].apply(f,c.isArray(t)?t:[t]))}function p(e){return e===t&&f.currTemplate.closeBtn||(f.currTemplate.closeBtn=c(f.st.closeMarkup.replace("%title%",f.st.tClose)),t=e),f.currTemplate.closeBtn}function o(){c.magnificPopup.instance||((f=new e).init(),c.magnificPopup.instance=f)}var f,s,g,n,m,t,l="Close",_="BeforeClose",v="MarkupParse",y="Open",w=".mfp",b="mfp-ready",i="mfp-removing",r="mfp-prevent-close",a=!!window.jQuery,x=c(window);e.prototype={constructor:e,init:function(){var e=navigator.appVersion;f.isLowIE=f.isIE8=document.all&&!document.addEventListener,f.isAndroid=/android/gi.test(e),f.isIOS=/iphone|ipad|ipod/gi.test(e),f.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),f.probablyMobile=f.isAndroid||f.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),g=c(document),f.popupsCache={}},open:function(e){if(!1===e.isObj){f.items=e.items.toArray(),f.index=0;for(var t,i=e.items,s=0;s<i.length;s++)if((t=i[s]).parsed&&(t=t.el[0]),t===e.el[0]){f.index=s;break}}else f.items=c.isArray(e.items)?e.items:[e.items],f.index=e.index||0;if(!f.isOpen){f.types=[],m="",e.mainEl&&e.mainEl.length?f.ev=e.mainEl.eq(0):f.ev=g,e.key?(f.popupsCache[e.key]||(f.popupsCache[e.key]={}),f.currTemplate=f.popupsCache[e.key]):f.currTemplate={},f.st=c.extend(!0,{},c.magnificPopup.defaults,e),f.fixedContentPos="auto"===f.st.fixedContentPos?!f.probablyMobile:f.st.fixedContentPos,f.st.modal&&(f.st.closeOnContentClick=!1,f.st.closeOnBgClick=!1,f.st.showCloseBtn=!1,f.st.enableEscapeKey=!1),f.bgOverlay||(f.bgOverlay=d("bg").on("click"+w,function(){f.close()}),f.wrap=d("wrap").attr("tabindex",-1).on("click"+w,function(e){f._checkIfClose(e.target)&&f.close()}),f.container=d("container",f.wrap)),f.contentContainer=d("content"),f.st.preloader&&(f.preloader=d("preloader",f.container,f.st.tLoading));var n=c.magnificPopup.modules;for(s=0;s<n.length;s++){var o=(o=n[s]).charAt(0).toUpperCase()+o.slice(1);f["init"+o].call(f)}u("BeforeOpen"),f.st.showCloseBtn&&(f.st.closeBtnInside?(h(v,function(e,t,i,s){i.close_replaceWith=p(s.type)}),m+=" mfp-close-btn-in"):f.wrap.append(p())),f.st.alignTop&&(m+=" mfp-align-top"),f.fixedContentPos?f.wrap.css({overflow:f.st.overflowY,overflowX:"hidden",overflowY:f.st.overflowY}):f.wrap.css({top:x.scrollTop(),position:"absolute"}),!1!==f.st.fixedBgPos&&("auto"!==f.st.fixedBgPos||f.fixedContentPos)||f.bgOverlay.css({height:g.height(),position:"absolute"}),f.st.enableEscapeKey&&g.on("keyup"+w,function(e){27===e.keyCode&&f.close()}),x.on("resize"+w,function(){f.updateSize()}),f.st.closeOnContentClick||(m+=" mfp-auto-cursor"),m&&f.wrap.addClass(m);var r=f.wH=x.height(),a={};f.fixedContentPos&&f._hasScrollBar(r)&&((l=f._getScrollbarSize())&&(a.marginRight=l)),f.fixedContentPos&&(f.isIE7?c("body, html").css("overflow","hidden"):a.overflow="hidden");var l=f.st.mainClass;return f.isIE7&&(l+=" mfp-ie7"),l&&f._addClassToMFP(l),f.updateItemHTML(),u("BuildControls"),c("html").css(a),f.bgOverlay.add(f.wrap).prependTo(f.st.prependTo||c(document.body)),f._lastFocusedEl=document.activeElement,setTimeout(function(){f.content?(f._addClassToMFP(b),f._setFocus()):f.bgOverlay.addClass(b),g.on("focusin"+w,f._onFocusIn)},16),f.isOpen=!0,f.updateSize(r),u(y),e}f.updateItemHTML()},close:function(){f.isOpen&&(u(_),f.isOpen=!1,f.st.removalDelay&&!f.isLowIE&&f.supportsTransition?(f._addClassToMFP(i),setTimeout(function(){f._close()},f.st.removalDelay)):f._close())},_close:function(){u(l);var e=i+" "+b+" ";f.bgOverlay.detach(),f.wrap.detach(),f.container.empty(),f.st.mainClass&&(e+=f.st.mainClass+" "),f._removeClassFromMFP(e),f.fixedContentPos&&(e={marginRight:""},f.isIE7?c("body, html").css("overflow",""):e.overflow="",c("html").css(e)),g.off("keyup.mfp focusin"+w),f.ev.off(w),f.wrap.attr("class","mfp-wrap").removeAttr("style"),f.bgOverlay.attr("class","mfp-bg"),f.container.attr("class","mfp-container"),!f.st.showCloseBtn||f.st.closeBtnInside&&!0!==f.currTemplate[f.currItem.type]||f.currTemplate.closeBtn&&f.currTemplate.closeBtn.detach(),f.st.autoFocusLast&&f._lastFocusedEl&&c(f._lastFocusedEl).focus(),f.currItem=null,f.content=null,f.currTemplate=null,f.prevHeight=0,u("AfterClose")},updateSize:function(e){var t;f.isIOS?(t=document.documentElement.clientWidth/window.innerWidth,t=window.innerHeight*t,f.wrap.css("height",t),f.wH=t):f.wH=e||x.height(),f.fixedContentPos||f.wrap.css("height",f.wH),u("Resize")},updateItemHTML:function(){var e=f.items[f.index];f.contentContainer.detach(),f.content&&f.content.detach(),e.parsed||(e=f.parseEl(f.index));var t=e.type;u("BeforeChange",[f.currItem?f.currItem.type:"",t]),f.currItem=e,f.currTemplate[t]||(i=!!f.st[t]&&f.st[t].markup,u("FirstMarkupParse",i),f.currTemplate[t]=!i||c(i)),n&&n!==e.type&&f.container.removeClass("mfp-"+n+"-holder");var i=f["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,f.currTemplate[t]);f.appendContent(i,t),e.preloaded=!0,u("Change",e),n=e.type,f.container.prepend(f.contentContainer),u("AfterChange")},appendContent:function(e,t){(f.content=e)?f.st.showCloseBtn&&f.st.closeBtnInside&&!0===f.currTemplate[t]?f.content.find(".mfp-close").length||f.content.append(p()):f.content=e:f.content="",u("BeforeAppend"),f.container.addClass("mfp-"+t+"-holder"),f.contentContainer.append(f.content)},parseEl:function(e){var t,i=f.items[e];if((i=i.tagName?{el:c(i)}:(t=i.type,{data:i,src:i.src})).el){for(var s=f.types,n=0;n<s.length;n++)if(i.el.hasClass("mfp-"+s[n])){t=s[n];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=t||f.st.type||"inline",i.index=e,i.parsed=!0,f.items[e]=i,u("ElementParse",i),f.items[e]},addGroup:function(t,i){function e(e){e.mfpEl=this,f._openClick(e,t,i)}var s="click.magnificPopup";(i=i||{}).mainEl=t,i.items?(i.isObj=!0,t.off(s).on(s,e)):(i.isObj=!1,i.delegate?t.off(s).on(s,i.delegate,e):(i.items=t).off(s).on(s,e))},_openClick:function(e,t,i){if((void 0!==i.midClick?i:c.magnificPopup.defaults).midClick||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var s=(void 0!==i.disableOn?i:c.magnificPopup.defaults).disableOn;if(s)if(c.isFunction(s)){if(!s.call(f))return!0}else if(x.width()<s)return!0;e.type&&(e.preventDefault(),f.isOpen&&e.stopPropagation()),i.el=c(e.mfpEl),i.delegate&&(i.items=t.find(i.delegate)),f.open(i)}},updateStatus:function(e,t){var i;f.preloader&&(s!==e&&f.container.removeClass("mfp-s-"+s),t||"loading"!==e||(t=f.st.tLoading),u("UpdateStatus",i={status:e,text:t}),e=i.status,t=i.text,f.preloader.html(t),f.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),f.container.addClass("mfp-s-"+e),s=e)},_checkIfClose:function(e){if(!c(e).hasClass(r)){var t=f.st.closeOnContentClick,i=f.st.closeOnBgClick;if(t&&i)return!0;if(!f.content||c(e).hasClass("mfp-close")||f.preloader&&e===f.preloader[0])return!0;if(e===f.content[0]||c.contains(f.content[0],e)){if(t)return!0}else if(i&&c.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){f.bgOverlay.addClass(e),f.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),f.wrap.removeClass(e)},_hasScrollBar:function(e){return(f.isIE7?g.height():document.body.scrollHeight)>(e||x.height())},_setFocus:function(){(f.st.focus?f.content.find(f.st.focus).eq(0):f.wrap).focus()},_onFocusIn:function(e){return e.target===f.wrap[0]||c.contains(f.wrap[0],e.target)?void 0:(f._setFocus(),!1)},_parseMarkup:function(n,e,t){var o;t.data&&(e=c.extend(t.data,e)),u(v,[n,e,t]),c.each(e,function(e,t){return void 0===t||!1===t||void(1<(o=e.split("_")).length?0<(i=n.find(w+"-"+o[0])).length&&("replaceWith"===(s=o[1])?i[0]!==t[0]&&i.replaceWith(t):"img"===s?i.is("img")?i.attr("src",t):i.replaceWith(c("<img>").attr("src",t).attr("class",i.attr("class"))):i.attr(o[1],t)):n.find(w+"-"+e).html(t));var i,s})},_getScrollbarSize:function(){var e;return void 0===f.scrollbarSize&&((e=document.createElement("div")).style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),f.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),f.scrollbarSize}},c.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return o(),(e=e?c.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return c.magnificPopup.instance&&c.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(c.magnificPopup.defaults[e]=t.options),c.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},c.fn.magnificPopup=function(e){o();var t,i,s,n=c(this);return"string"==typeof e?"open"===e?(t=a?n.data("magnificPopup"):n[0].magnificPopup,i=parseInt(arguments[1],10)||0,s=t.items?t.items[i]:(s=n,t.delegate&&(s=s.find(t.delegate)),s.eq(i)),f._openClick({mfpEl:s},n,t)):f.isOpen&&f[e].apply(f,Array.prototype.slice.call(arguments,1)):(e=c.extend(!0,{},e),a?n.data("magnificPopup",e):n[0].magnificPopup=e,f.addGroup(n,e)),n};function k(){T&&(C.after(T.addClass(j)).detach(),T=null)}var j,C,T,z="inline";c.magnificPopup.registerModule(z,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){f.types.push(z),h(l+"."+z,function(){k()})},getInline:function(e,t){if(k(),e.src){var i,s=f.st.inline,n=c(e.src);return n.length?((i=n[0].parentNode)&&i.tagName&&(C||(j=s.hiddenClass,C=d(j),j="mfp-"+j),T=n.after(C).detach().removeClass(j)),f.updateStatus("ready")):(f.updateStatus("error",s.tNotFound),n=c("<div>")),e.inlineElement=n}return f.updateStatus("ready"),f._parseMarkup(t,{},e),t}}});function S(){$&&c(document.body).removeClass($)}function W(){S(),f.req&&f.req.abort()}var $,E="ajax";c.magnificPopup.registerModule(E,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){f.types.push(E),$=f.st.ajax.cursor,h(l+"."+E,W),h("BeforeChange."+E,W)},getAjax:function(s){$&&c(document.body).addClass($),f.updateStatus("loading");var e=c.extend({url:s.src,success:function(e,t,i){i={data:e,xhr:i};u("ParseAjax",i),f.appendContent(c(i.data),E),s.finished=!0,S(),f._setFocus(),setTimeout(function(){f.wrap.addClass(b)},16),f.updateStatus("ready"),u("AjaxContentAdded")},error:function(){S(),s.finished=s.loadError=!0,f.updateStatus("error",f.st.ajax.tError.replace("%url%",s.src))}},f.st.ajax.settings);return f.req=c.ajax(e),""}}});var L;c.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=f.st.image,t=".image";f.types.push("image"),h(y+t,function(){"image"===f.currItem.type&&e.cursor&&c(document.body).addClass(e.cursor)}),h(l+t,function(){e.cursor&&c(document.body).removeClass(e.cursor),x.off("resize"+w)}),h("Resize"+t,f.resizeImage),f.isLowIE&&h("AfterChange",f.resizeImage)},resizeImage:function(){var e,t=f.currItem;t&&t.img&&f.st.image.verticalFit&&(e=0,f.isLowIE&&(e=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",f.wH-e))},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,L&&clearInterval(L),e.isCheckingImgSize=!1,u("ImageHasSize",e),e.imgHidden&&(f.content&&f.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var i=0,s=t.img[0],n=function(e){L&&clearInterval(L),L=setInterval(function(){return 0<s.naturalWidth?void f._onImageHasSize(t):(200<i&&clearInterval(L),void(3===++i?n(10):40===i?n(50):100===i&&n(500)))},e)};n(1)},getImage:function(e,t){var i,s=0,n=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===f.currItem&&(f._onImageHasSize(e),f.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,u("ImageLoadComplete")):++s<200?setTimeout(n,100):o())},o=function(){e&&(e.img.off(".mfploader"),e===f.currItem&&(f._onImageHasSize(e),f.updateStatus("error",r.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},r=f.st.image,a=t.find(".mfp-img");return a.length&&((i=document.createElement("img")).className="mfp-img",e.el&&e.el.find("img").length&&(i.alt=e.el.find("img").attr("alt")),e.img=c(i).on("load.mfploader",n).on("error.mfploader",o),i.src=e.src,a.is("img")&&(e.img=e.img.clone()),0<(i=e.img[0]).naturalWidth?e.hasSize=!0:i.width||(e.hasSize=!1)),f._parseMarkup(t,{title:function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=f.st.image.titleSrc;if(t){if(c.isFunction(t))return t.call(f,e);if(e.el)return e.el.attr(t)||""}return""}(e),img_replaceWith:e.img},e),f.resizeImage(),e.hasSize?(L&&clearInterval(L),e.loadError?(t.addClass("mfp-loading"),f.updateStatus("error",r.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),f.updateStatus("ready"))):(f.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),f.findImageSize(e))),t}}});var O;c.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,t,i,s,n,o,r=f.st.zoom,a=".zoom";r.enabled&&f.supportsTransition&&(s=r.duration,n=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+r.duration/1e3+"s "+r.easing,s={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},e="transition";return s["-webkit-"+e]=s["-moz-"+e]=s["-o-"+e]=s[e]=i,t.css(s),t},o=function(){f.content.css("visibility","visible")},h("BuildControls"+a,function(){f._allowZoom()&&(clearTimeout(t),f.content.css("visibility","hidden"),(e=f._getItemToZoom())?((i=n(e)).css(f._getOffset()),f.wrap.append(i),t=setTimeout(function(){i.css(f._getOffset(!0)),t=setTimeout(function(){o(),setTimeout(function(){i.remove(),e=i=null,u("ZoomAnimationEnded")},16)},s)},16)):o())}),h(_+a,function(){if(f._allowZoom()){if(clearTimeout(t),f.st.removalDelay=s,!e){if(!(e=f._getItemToZoom()))return;i=n(e)}i.css(f._getOffset(!0)),f.wrap.append(i),f.content.css("visibility","hidden"),setTimeout(function(){i.css(f._getOffset())},16)}}),h(l+a,function(){f._allowZoom()&&(o(),i&&i.remove(),e=null)}))},_allowZoom:function(){return"image"===f.currItem.type},_getItemToZoom:function(){return!!f.currItem.hasSize&&f.currItem.img},_getOffset:function(e){var t=e?f.currItem.img:f.st.zoom.opener(f.currItem.el||f.currItem),i=t.offset(),s=parseInt(t.css("padding-top"),10),e=parseInt(t.css("padding-bottom"),10);i.top-=c(window).scrollTop()-s;s={width:t.width(),height:(a?t.innerHeight():t[0].offsetHeight)-e-s};return void 0===O&&(O=void 0!==document.createElement("p").style.MozTransform),O?s["-moz-transform"]=s.transform="translate("+i.left+"px,"+i.top+"px)":(s.left=i.left,s.top=i.top),s}}});function P(e){var t;!f.currTemplate[A]||(t=f.currTemplate[A].find("iframe")).length&&(e||(t[0].src="//about:blank"),f.isIE8&&t.css("display",e?"block":"none"))}var A="iframe";c.magnificPopup.registerModule(A,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){f.types.push(A),h("BeforeChange",function(e,t,i){t!==i&&(t===A?P():i===A&&P(!0))}),h(l+"."+A,function(){P()})},getIframe:function(e,t){var i=e.src,s=f.st.iframe;c.each(s.patterns,function(){return-1<i.indexOf(this.index)?(this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1):void 0});var n={};return s.srcAction&&(n[s.srcAction]=i),f._parseMarkup(t,n,e),f.updateStatus("ready"),t}}});function N(e){var t=f.items.length;return t-1<e?e-t:e<0?t+e:e}function H(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)}c.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var o=f.st.gallery,e=".mfp-gallery";return f.direction=!0,!(!o||!o.enabled)&&(m+=" mfp-gallery",h(y+e,function(){o.navigateByImgClick&&f.wrap.on("click"+e,".mfp-img",function(){return 1<f.items.length?(f.next(),!1):void 0}),g.on("keydown"+e,function(e){37===e.keyCode?f.prev():39===e.keyCode&&f.next()})}),h("UpdateStatus"+e,function(e,t){t.text&&(t.text=H(t.text,f.currItem.index,f.items.length))}),h(v+e,function(e,t,i,s){var n=f.items.length;i.counter=1<n?H(o.tCounter,s.index,n):""}),h("BuildControls"+e,function(){var e,t;1<f.items.length&&o.arrows&&!f.arrowLeft&&(t=o.arrowMarkup,e=f.arrowLeft=c(t.replace(/%title%/gi,o.tPrev).replace(/%dir%/gi,"left")).addClass(r),t=f.arrowRight=c(t.replace(/%title%/gi,o.tNext).replace(/%dir%/gi,"right")).addClass(r),e.click(function(){f.prev()}),t.click(function(){f.next()}),f.container.append(e.add(t)))}),h("Change"+e,function(){f._preloadTimeout&&clearTimeout(f._preloadTimeout),f._preloadTimeout=setTimeout(function(){f.preloadNearbyImages(),f._preloadTimeout=null},16)}),void h(l+e,function(){g.off(e),f.wrap.off("click"+e),f.arrowRight=f.arrowLeft=null}))},next:function(){f.direction=!0,f.index=N(f.index+1),f.updateItemHTML()},prev:function(){f.direction=!1,f.index=N(f.index-1),f.updateItemHTML()},goTo:function(e){f.direction=e>=f.index,f.index=e,f.updateItemHTML()},preloadNearbyImages:function(){for(var e=f.st.gallery.preload,t=Math.min(e[0],f.items.length),i=Math.min(e[1],f.items.length),s=1;s<=(f.direction?i:t);s++)f._preloadItem(f.index+s);for(s=1;s<=(f.direction?t:i);s++)f._preloadItem(f.index-s)},_preloadItem:function(e){var t;e=N(e),f.items[e].preloaded||((t=f.items[e]).parsed||(t=f.parseEl(e)),u("LazyLoad",t),"image"===t.type&&(t.img=c('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=!0}).on("error.mfploader",function(){t.hasSize=!0,t.loadError=!0,u("LazyLoadError",t)}).attr("src",t.src)),t.preloaded=!0)}}});var D="retina";c.magnificPopup.registerModule(D,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){var i,s;1<window.devicePixelRatio&&(i=f.st.retina,s=i.ratio,1<(s=isNaN(s)?s():s)&&(h("ImageHasSize."+D,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/s,width:"100%"})}),h("ElementParse."+D,function(e,t){t.src=i.replaceSrc(t,s)})))}}}),o()}),function(l,e,c){var h,s,n,d,o,u,p,f,r;l.ionTabs||(d={},o={},u={},p=l(e),f=function(){try{if(e.localStorage&&null!==e.localStorage)return{save:function(t,i){"object"==typeof i&&(i=JSON.stringify(i));try{localStorage.setItem(t,i)}catch(e){"QUOTA_EXCEEDED_ERR"===e&&(localStorage.clear(),localStorage.setItem(t,i))}},load:function(t){try{return JSON.parse(localStorage.getItem(t))}catch(e){return localStorage.getItem(t)}},del:function(e){localStorage.removeItem(e)}}}catch(e){return{save:function(){return null},load:function(){return null},del:function(){return null}}}return null}(),(r=function(e){this.container=e}).prototype={init:function(){var e,i,t=this.container,s=t.find(".ionTabs__tab"),n=t.find(".ionTabs__item"),o=t.find(".ionTabs__preloader"),r=t.data("name");s.each(function(){e=l(this),i="Button__"+r+"__"+e.data("target"),e.prop("id",i)}),n.each(function(){e=l(this),i="Tab__"+r+"__"+e.data("name"),e.prop("id",i)}),s.on("click.ionTabs",function(e){e.preventDefault(),o[0].style.display="block",a(l(this).data("target"))});var a=function(e){for(var t in e=decodeURIComponent(e),l(i="#Button__"+r+"__"+e).addClass("ionTabs__tab_state_active").siblings().removeClass("ionTabs__tab_state_active"),l(i="#Tab__"+r+"__"+e).addClass("ionTabs__item_state_active").siblings().removeClass("ionTabs__item_state_active"),o[0].style.display="none",u[r]=e,h="tabs",u)u.hasOwnProperty(t)&&(h+="|"+encodeURIComponent(t)+":"+encodeURIComponent(u[t]));"hash"===d.type&&(c.hash=h),"storage"===d.type&&f.save(c.hostname+"__ionTabsPosition",h),p.trigger("ionTabsChange",{group:r,tab:e,tabId:i}),"function"==typeof d.onChange&&d.onChange({group:r,tab:e,tabId:i})};a(u[r]||s.eq(0).data("target")),this.setTab=function(e){a(e)}}},l.ionTabs=function(e,t){if(e){var i;if("hash"===(d=l.extend({type:"hash",onChange:null},t)).type&&(h=c.hash),"storage"===d.type&&(h=f.load(c.hostname+"__ionTabsPosition")),h){if(1<(h=h.split("|")).length)for(s=1;s<h.length;s+=1)n=h[s].split(":"),u[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);h=""}l(e).each(function(){i=l(this);var e=encodeURIComponent(i.data("name"));o[e]=new r(i),o[e].init()})}},l.ionTabs.setTab=function(e,t){o[e].setTab(t)})}(jQuery,(document,window),location),function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){t(e,document,window,navigator)}):t(jQuery,document,window,navigator)}(function(o,r,a,e,t){var i,s=0,n=(i=e.userAgent,e=/msie\s\d+/i,0<i.search(e)&&(i=(i=e.exec(i).toString()).split(" ")[1])<9&&(o("html").addClass("lt-ie9"),!0));Function.prototype.bind||(Function.prototype.bind=function(i){var s=this,n=[].slice;if("function"!=typeof s)throw new TypeError;var o=n.call(arguments,1),r=function(){if(this instanceof r){(e=function(){}).prototype=s.prototype;var e=new e,t=s.apply(e,o.concat(n.call(arguments)));return Object(t)===t?t:e}return s.apply(i,o.concat(n.call(arguments)))};return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError('"this" is null or not defined');var s=Object(this),n=s.length>>>0;if(0==n)return-1;if(i=+t||0,1/0===Math.abs(i)&&(i=0),n<=i)return-1;for(i=Math.max(0<=i?i:n-Math.abs(i),0);i<n;){if(i in s&&s[i]===e)return i;i++}return-1});function l(e,t,i){this.VERSION="2.1.4",this.input=e,this.plugin_count=i,this.old_to=this.old_from=this.update_tm=this.calc_count=this.current_plugin=0,this.raf_id=this.old_min_interval=null,this.is_update=this.is_key=this.no_diapason=this.force_redraw=this.dragging=!1,this.is_start=!0,this.is_click=this.is_resize=this.is_active=this.is_finish=!1,this.$cache={win:o(a),body:o(r.body),input:o(e),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var s,n=this.$cache.input;for(s in e=n.prop("value"),i={type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!1,keyboard_step:5,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:"  ",input_values_separator:";",disable:!1,onStart:null,onChange:null,onFinish:null,onUpdate:null},(n={type:n.data("type"),min:n.data("min"),max:n.data("max"),from:n.data("from"),to:n.data("to"),step:n.data("step"),min_interval:n.data("minInterval"),max_interval:n.data("maxInterval"),drag_interval:n.data("dragInterval"),values:n.data("values"),from_fixed:n.data("fromFixed"),from_min:n.data("fromMin"),from_max:n.data("fromMax"),from_shadow:n.data("fromShadow"),to_fixed:n.data("toFixed"),to_min:n.data("toMin"),to_max:n.data("toMax"),to_shadow:n.data("toShadow"),prettify_enabled:n.data("prettifyEnabled"),prettify_separator:n.data("prettifySeparator"),force_edges:n.data("forceEdges"),keyboard:n.data("keyboard"),keyboard_step:n.data("keyboardStep"),grid:n.data("grid"),grid_margin:n.data("gridMargin"),grid_num:n.data("gridNum"),grid_snap:n.data("gridSnap"),hide_min_max:n.data("hideMinMax"),hide_from_to:n.data("hideFromTo"),prefix:n.data("prefix"),postfix:n.data("postfix"),max_postfix:n.data("maxPostfix"),decorate_both:n.data("decorateBoth"),values_separator:n.data("valuesSeparator"),input_values_separator:n.data("inputValuesSeparator"),disable:n.data("disable")}).values=n.values&&n.values.split(","),n)n.hasOwnProperty(s)&&(n[s]||0===n[s]||delete n[s]);e&&((e=e.split(n.input_values_separator||t.input_values_separator||";"))[0]&&e[0]==+e[0]&&(e[0]=+e[0]),e[1]&&e[1]==+e[1]&&(e[1]=+e[1]),t&&t.values&&t.values.length?(i.from=e[0]&&t.values.indexOf(e[0]),i.to=e[1]&&t.values.indexOf(e[1])):(i.from=e[0]&&+e[0],i.to=e[1]&&+e[1])),o.extend(i,t),o.extend(i,n),this.options=i,this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()}l.prototype={init:function(e){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),e?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){this.$cache.input.before('<span class="irs js-irs-'+this.plugin_count+'"></span>'),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="-1"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span><span class="irs-bar"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar-edge"></span><span class="irs-shadow shadow-single"></span><span class="irs-slider single"></span>'),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.cont.removeClass("irs-disabled"),this.$cache.input[0].disabled=!1,this.bindEvents()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var e=this.options.max,t=this.options.to;this.options.from>this.options.min&&t===e?this.$cache.s_from.addClass("type_last"):t<e&&this.$cache.s_to.addClass("type_last")},changeLevel:function(e){switch(e){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake);break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),n&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),n&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerMove:function(e){this.dragging&&(this.coords.x_pointer=(e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX)-this.coords.x_gap,this.calc())},pointerUp:function(e){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,n&&o("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(o.contains(this.$cache.cont[0],e.target)||this.dragging)&&(this.is_finish=!0,this.callOnFinish()),this.dragging=!1)},pointerDown:function(e,t){t.preventDefault();var i=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX;2!==t.button&&("both"===e&&this.setTempMinInterval(),e=e||this.target,this.current_plugin=this.plugin_count,this.target=e,this.dragging=this.is_active=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=i-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(e),n&&o("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(e,t){t.preventDefault();var i=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX;2!==t.button&&(this.current_plugin=this.plugin_count,this.target=e,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(i-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(e,t){if(!(this.current_plugin!==this.plugin_count||t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)){switch(t.which){case 83:case 65:case 40:case 37:t.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:t.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(e){var t=this.coords.p_pointer,t=e?t+this.options.keyboard_step:t-this.options.keyboard_step;this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*t),this.is_key=!0,this.calc()},setMinMax:function(){this.options&&(this.options.hide_min_max?(this.$cache.min[0].style.display="none",this.$cache.max[0].style.display="none"):(this.options.values.length?(this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))):(this.$cache.min.html(this.decorate(this._prettify(this.options.min),this.options.min)),this.$cache.max.html(this.decorate(this._prettify(this.options.max),this.options.max))),this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)))},setTempMinInterval:function(){var e=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=e},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(e){if(this.options&&(this.calc_count++,10!==this.calc_count&&!e||(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){switch(this.calcPointerPercent(),e=this.getHandleX(),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,e=this.getHandleX(),this.target=this.options.drag_interval?"both_one":this.chooseHandle(e)),this.target){case"base":var t=(this.options.max-this.options.min)/100;e=(this.result.from-this.options.min)/t,t=(this.result.to-this.options.min)/t,this.coords.p_single_real=this.toFixed(e),this.coords.p_from_real=this.toFixed(e),this.coords.p_to_real=this.toFixed(t),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(e),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(e),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(e),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;e=this.toFixed(e+.1*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(e)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(e)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":var i,s;this.options.from_fixed||this.options.to_fixed||(t=(s=this.convertToRealPercent(e))-(i=(e=this.result.to_percent-this.result.from_percent)/2),s+=i,t<0&&(s=(t=0)+e),100<s&&(t=(s=100)-e),this.coords.p_from_real=this.calcWithStep(t),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(s),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real))}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(e){return e/(100-this.coords.p_handle)*100},convertToFakePercent:function(e){return e/100*(100-this.coords.p_handle)},getHandleX:function(){var e=100-this.coords.p_handle,t=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return t<0?t=0:e<t&&(t=e),t},calcHandlePercent:function(){this.coords.w_handle=("single"===this.options.type?this.$cache.s_single:this.$cache.s_from).outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(e){return"single"===this.options.type?"single":e>=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),this.coords.w_rs===this.coords.w_rs_old&&!this.force_redraw||(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%",this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",this.old_from===this.result.from&&!this.force_redraw||(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),this.old_to===this.result.to&&!this.force_redraw||(this.$cache.to[0].style.left=this.labels.p_to_left+"%"),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to)),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||this.$cache.input.trigger("change"),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_click=this.is_key=!1,this.callOnFinish()),this.is_finish=this.is_resize=this.is_update=!1),this.force_redraw=this.is_click=this.is_key=this.is_start=!1))},drawLabels:function(){var e,t,i,s;this.options&&(t=this.options.values.length,i=this.options.p_values,this.options.hide_from_to||("single"===this.options.type?(t=t?this.decorate(i[this.result.from]):this.decorate(this._prettify(this.result.from),this.result.from),this.$cache.single.html(t),this.calcLabels(),this.$cache.min[0].style.visibility=this.labels.p_single_left<this.labels.p_min+1?"hidden":"visible",this.$cache.max[0].style.visibility=this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?"hidden":"visible"):(i=t?(this.options.decorate_both?(t=this.decorate(i[this.result.from]),t+=this.options.values_separator,t+=this.decorate(i[this.result.to])):t=this.decorate(i[this.result.from]+this.options.values_separator+i[this.result.to]),e=this.decorate(i[this.result.from]),this.decorate(i[this.result.to])):(this.options.decorate_both?(t=this.decorate(this._prettify(this.result.from),this.result.from),t+=this.options.values_separator,t+=this.decorate(this._prettify(this.result.to),this.result.to)):t=this.decorate(this._prettify(this.result.from)+this.options.values_separator+this._prettify(this.result.to),this.result.to),e=this.decorate(this._prettify(this.result.from),this.result.from),this.decorate(this._prettify(this.result.to),this.result.to)),this.$cache.single.html(t),this.$cache.from.html(e),this.$cache.to.html(i),this.calcLabels(),i=Math.min(this.labels.p_single_left,this.labels.p_from_left),t=this.labels.p_single_left+this.labels.p_single_fake,e=this.labels.p_to_left+this.labels.p_to_fake,s=Math.max(t,e),this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",s=this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",e):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",Math.max(t,e))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),this.$cache.min[0].style.visibility=i<this.labels.p_min+1?"hidden":"visible",this.$cache.max[0].style.visibility=s>100-this.labels.p_max-1?"hidden":"visible")))},drawShadow:function(){var e=this.options,t=this.$cache,i="number"==typeof e.from_min&&!isNaN(e.from_min),s="number"==typeof e.from_max&&!isNaN(e.from_max),n="number"==typeof e.to_min&&!isNaN(e.to_min),o="number"==typeof e.to_max&&!isNaN(e.to_max);"single"===e.type?e.from_shadow&&(i||s)?(i=this.convertToPercent(i?e.from_min:e.min),s=this.convertToPercent(s?e.from_max:e.max)-i,i=this.toFixed(i-this.coords.p_handle/100*i),s=this.toFixed(s-this.coords.p_handle/100*s),i+=this.coords.p_handle/2,t.shad_single[0].style.display="block",t.shad_single[0].style.left=i+"%",t.shad_single[0].style.width=s+"%"):t.shad_single[0].style.display="none":(e.from_shadow&&(i||s)?(i=this.convertToPercent(i?e.from_min:e.min),s=this.convertToPercent(s?e.from_max:e.max)-i,i=this.toFixed(i-this.coords.p_handle/100*i),s=this.toFixed(s-this.coords.p_handle/100*s),i+=this.coords.p_handle/2,t.shad_from[0].style.display="block",t.shad_from[0].style.left=i+"%",t.shad_from[0].style.width=s+"%"):t.shad_from[0].style.display="none",e.to_shadow&&(n||o)?(n=this.convertToPercent(n?e.to_min:e.min),e=this.convertToPercent(o?e.to_max:e.max)-n,n=this.toFixed(n-this.coords.p_handle/100*n),e=this.toFixed(e-this.coords.p_handle/100*e),n+=this.coords.p_handle/2,t.shad_to[0].style.display="block",t.shad_to[0].style.left=n+"%",t.shad_to[0].style.width=e+"%"):t.shad_to[0].style.display="none")},callOnStart:function(){this.options.onStart&&"function"==typeof this.options.onStart&&this.options.onStart(this.result)},callOnChange:function(){this.options.onChange&&"function"==typeof this.options.onChange&&this.options.onChange(this.result)},callOnFinish:function(){this.options.onFinish&&"function"==typeof this.options.onFinish&&this.options.onFinish(this.result)},callOnUpdate:function(){this.options.onUpdate&&"function"==typeof this.options.onUpdate&&this.options.onUpdate(this.result)},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input")},convertToPercent:function(e,t){var i=this.options.max-this.options.min;return i?this.toFixed((t?e:e-this.options.min)/(i/100)):(this.no_diapason=!0,0)},convertToValue:function(e){var t,i,s=this.options.min,n=this.options.max,o=s.toString().split(".")[1],r=n.toString().split(".")[1],a=0,l=0;return 0===e?this.options.min:100===e?this.options.max:(o&&(a=t=o.length),r&&(a=i=r.length),t&&i&&(a=i<=t?t:i),s<0&&(s=+(s+(l=Math.abs(s))).toFixed(a),n=+(n+l).toFixed(a)),e=(n-s)/100*e+s,e=(s=this.options.step.toString().split(".")[1])?+e.toFixed(s.length):(e/=this.options.step,+(e*=this.options.step).toFixed(0)),l&&(e-=l),(l=s?+e.toFixed(s.length):this.toFixed(e))<this.options.min?l=this.options.min:l>this.options.max&&(l=this.options.max),l)},calcWithStep:function(e){var t=Math.round(e/this.coords.p_step)*this.coords.p_step;return 100<t&&(t=100),100===e&&(t=100),this.toFixed(t)},checkMinInterval:function(e,t,i){var s=this.options;return s.min_interval?(e=this.convertToValue(e),t=this.convertToValue(t),"from"===i?t-e<s.min_interval&&(e=t-s.min_interval):e-t<s.min_interval&&(e=t+s.min_interval),this.convertToPercent(e)):e},checkMaxInterval:function(e,t,i){var s=this.options;return s.max_interval?(e=this.convertToValue(e),t=this.convertToValue(t),"from"===i?t-e>s.max_interval&&(e=t-s.max_interval):e-t>s.max_interval&&(e=t+s.max_interval),this.convertToPercent(e)):e},checkDiapason:function(e,t,i){e=this.convertToValue(e);var s=this.options;return"number"!=typeof t&&(t=s.min),"number"!=typeof i&&(i=s.max),e<t&&(e=t),i<e&&(e=i),this.convertToPercent(e)},toFixed:function(e){return+e.toFixed(9)},_prettify:function(e){return this.options.prettify_enabled?(this.options.prettify&&"function"==typeof this.options.prettify?this.options:this).prettify(e):e},prettify:function(e){return e.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(e,t){return this.options.force_edges&&(e<0?e=0:100-t<e&&(e=100-t)),this.toFixed(e)},validate:function(){var e,t,i=this.options,s=this.result,n=i.values,o=n.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.from_min&&(i.from_min=+i.from_min),"string"==typeof i.from_max&&(i.from_max=+i.from_max),"string"==typeof i.to_min&&(i.to_min=+i.to_min),"string"==typeof i.to_max&&(i.to_max=+i.to_max),"string"==typeof i.keyboard_step&&(i.keyboard_step=+i.keyboard_step),"string"==typeof i.grid_num&&(i.grid_num=+i.grid_num),i.max<i.min&&(i.max=i.min),o)for(i.p_values=[],i.min=0,i.max=o-1,i.step=1,i.grid_num=i.max,i.grid_snap=!0,t=0;t<o;t++)e=+n[t],e=isNaN(e)?n[t]:(n[t]=e,this._prettify(e)),i.p_values.push(e);"number"==typeof i.from&&!isNaN(i.from)||(i.from=i.min),"number"==typeof i.to&&!isNaN(i.from)||(i.to=i.max),"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):((i.from<i.min||i.from>i.max)&&(i.from=i.min),(i.to>i.max||i.to<i.min)&&(i.to=i.max),i.from>i.to&&(i.from=i.to)),("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1),("number"!=typeof i.keyboard_step||isNaN(i.keyboard_step)||!i.keyboard_step||i.keyboard_step<0)&&(i.keyboard_step=5),"number"==typeof i.from_min&&i.from<i.from_min&&(i.from=i.from_min),"number"==typeof i.from_max&&i.from>i.from_max&&(i.from=i.from_max),"number"==typeof i.to_min&&i.to<i.to_min&&(i.to=i.to_min),"number"==typeof i.to_max&&i.from>i.to_max&&(i.to=i.to_max),s&&(s.min!==i.min&&(s.min=i.min),s.max!==i.max&&(s.max=i.max),(s.from<s.min||s.from>s.max)&&(s.from=i.from),(s.to<s.min||s.to>s.max)&&(s.to=i.to)),("number"!=typeof i.min_interval||isNaN(i.min_interval)||!i.min_interval||i.min_interval<0)&&(i.min_interval=0),("number"!=typeof i.max_interval||isNaN(i.max_interval)||!i.max_interval||i.max_interval<0)&&(i.max_interval=0),i.min_interval&&i.min_interval>i.max-i.min&&(i.min_interval=i.max-i.min),i.max_interval&&i.max_interval>i.max-i.min&&(i.max_interval=i.max-i.min)},decorate:function(e,t){var i="",s=this.options;return s.prefix&&(i+=s.prefix),i+=e,s.max_postfix&&(s.values.length&&e===s.p_values[s.max]||t===s.max)&&(i+=s.max_postfix,s.postfix&&(i+=" ")),s.postfix&&(i+=s.postfix),i},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var e,t,i,s=this.options,n=s.max-s.min,o=s.grid_num,r=0,a=0,l=4,c=0,h="";for(this.calcGridMargin(),r=s.grid_snap?(o=n/s.step,this.toFixed(s.step/(n/100))):this.toFixed(100/o),4<o&&(l=3),7<o&&(l=2),14<o&&(l=1),28<o&&(l=0),n=0;n<o+1;n++){for(t=l,100<(a=this.toFixed(r*n))&&(a=100,(t-=2)<0&&(t=0)),i=((this.coords.big[n]=a)-r*(n-1))/(t+1),e=1;e<=t&&0!==a;e++)h+='<span class="irs-grid-pol small" style="left: '+(c=this.toFixed(a-i*e))+'%"></span>';h+='<span class="irs-grid-pol" style="left: '+a+'%"></span>',c=this.convertToValue(a),h+='<span class="irs-grid-text js-grid-text-'+n+'" style="left: '+a+'%">'+(c=s.values.length?s.p_values[c]:this._prettify(c))+"</span>"}this.coords.big_num=Math.ceil(o+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(h),this.cacheGridLabels()}},cacheGridLabels:function(){for(var e,t=this.coords.big_num,i=0;i<t;i++)e=this.$cache.grid.find(".js-grid-text-"+i),this.$cache.grid_labels.push(e);this.calcGridLabels()},calcGridLabels:function(){for(var e=[],t=[],i=this.coords.big_num,s=0;s<i;s++)this.coords.big_w[s]=this.$cache.grid_labels[s].outerWidth(!1),this.coords.big_p[s]=this.toFixed(this.coords.big_w[s]/this.coords.w_rs*100),this.coords.big_x[s]=this.toFixed(this.coords.big_p[s]/2),e[s]=this.toFixed(this.coords.big[s]-this.coords.big_x[s]),t[s]=this.toFixed(e[s]+this.coords.big_p[s]);for(this.options.force_edges&&(e[0]<-this.coords.grid_gap&&(e[0]=-this.coords.grid_gap,t[0]=this.toFixed(e[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),t[i-1]>100+this.coords.grid_gap&&(t[i-1]=100+this.coords.grid_gap,e[i-1]=this.toFixed(t[i-1]-this.coords.big_p[i-1]),this.coords.big_x[i-1]=this.toFixed(this.coords.big_p[i-1]-this.coords.grid_gap))),this.calcGridCollision(2,e,t),this.calcGridCollision(4,e,t),s=0;s<i;s++)(e=this.$cache.grid_labels[s][0]).style.marginLeft=-this.coords.big_x[s]+"%"},calcGridCollision:function(e,t,i){for(var s,n=this.coords.big_num,o=0;o<n&&!((s=o+e/2)>=n);o+=e)this.$cache.grid_labels[s][0].style.visibility=i[o]<=t[s]?"visible":"hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_handle=("single"===this.options.type?this.$cache.s_single:this.$cache.s_from).outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(e){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.options=o.extend(this.options,e),this.validate(),this.updateResult(e),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),o.data(this.input,"ionRangeSlider",null),this.remove(),this.options=this.input=null)}},o.fn.ionRangeSlider=function(e){return this.each(function(){o.data(this,"ionRangeSlider")||o.data(this,"ionRangeSlider",new l(this,e,s++))})},function(){for(var o=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!a.requestAnimationFrame;++t)a.requestAnimationFrame=a[e[t]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[e[t]+"CancelAnimationFrame"]||a[e[t]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),s=Math.max(0,16-(i-o)),n=a.setTimeout(function(){e(i+s)},s);return o=i+s,n}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(e){clearTimeout(e)})}()}),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(r){var i={init:function(e,t){var i=this;i.elem=t,i.$elem=r(t),i.imageSrc=i.$elem.data("zoom-image")?i.$elem.data("zoom-image"):i.$elem.attr("src"),i.options=r.extend({},r.fn.elevateZoom.options,e),i.options.tint&&(i.options.lensColour="none",i.options.lensOpacity="1"),"inner"==i.options.zoomType&&(i.options.showLens=!1),i.$elem.parent().removeAttr("title").removeAttr("alt"),i.zoomImage=i.imageSrc,i.refresh(1),r("#"+i.options.gallery+" a").click(function(e){return i.options.galleryActiveClass&&(r("#"+i.options.gallery+" a").removeClass(i.options.galleryActiveClass),r(this).addClass(i.options.galleryActiveClass)),e.preventDefault(),r(this).data("zoom-image")?i.zoomImagePre=r(this).data("zoom-image"):i.zoomImagePre=r(this).data("image"),i.swaptheimage(r(this).data("image"),i.zoomImagePre),!1})},refresh:function(e){var t=this;setTimeout(function(){t.fetch(t.imageSrc)},e||t.options.refresh)},fetch:function(e){var t=this,i=new Image;i.onload=function(){t.largeWidth=i.width,t.largeHeight=i.height,t.startZoom(),t.currentImage=t.imageSrc,t.options.onZoomedImageLoaded(t.$elem)},i.src=e},startZoom:function(){var e,i=this;i.nzWidth=i.$elem.width(),i.nzHeight=i.$elem.height(),i.isWindowActive=!1,i.isLensActive=!1,i.isTintActive=!1,i.overWindow=!1,i.options.imageCrossfade&&(i.zoomWrap=i.$elem.wrap('<div style="height:'+i.nzHeight+"px;width:"+i.nzWidth+'px;" class="zoomWrapper" />'),i.$elem.css("position","absolute")),i.zoomLock=1,i.scrollingLock=!1,i.changeBgSize=!1,i.currentZoomLevel=i.options.zoomLevel,i.nzOffset=i.$elem.offset(),i.widthRatio=i.largeWidth/i.currentZoomLevel/i.nzWidth,i.heightRatio=i.largeHeight/i.currentZoomLevel/i.nzHeight,"window"==i.options.zoomType&&(i.zoomWindowStyle="overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(i.options.zoomWindowBgColour)+";width: "+String(i.options.zoomWindowWidth)+"px;height: "+String(i.options.zoomWindowHeight)+"px;float: left;background-size: "+i.largeWidth/i.currentZoomLevel+"px "+i.largeHeight/i.currentZoomLevel+"px;display: none;z-index:100;border: "+String(i.options.borderSize)+"px solid "+i.options.borderColour+";background-repeat: no-repeat;position: absolute;"),"inner"==i.options.zoomType&&(e=i.$elem.css("border-left-width"),i.zoomWindowStyle="overflow: hidden;margin-left: "+String(e)+";margin-top: "+String(e)+";background-position: 0px 0px;width: "+String(i.nzWidth)+"px;height: "+String(i.nzHeight)+"px;float: left;display: none;cursor:"+i.options.cursor+";px solid "+i.options.borderColour+";background-repeat: no-repeat;position: absolute;"),"window"==i.options.zoomType&&(lensHeight=i.nzHeight<i.options.zoomWindowWidth/i.widthRatio?i.nzHeight:String(i.options.zoomWindowHeight/i.heightRatio),lensWidth=i.largeWidth<i.options.zoomWindowWidth?i.nzWidth:i.options.zoomWindowWidth/i.widthRatio,i.lensStyle="background-position: 0px 0px;width: "+String(i.options.zoomWindowWidth/i.widthRatio)+"px;height: "+String(i.options.zoomWindowHeight/i.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:"+i.options.lensOpacity+";filter: alpha(opacity = "+100*i.options.lensOpacity+"); zoom:1;width:"+lensWidth+"px;height:"+lensHeight+"px;background-color:"+i.options.lensColour+";cursor:"+i.options.cursor+";border: "+i.options.lensBorderSize+"px solid "+i.options.lensBorderColour+";background-repeat: no-repeat;position: absolute;"),i.tintStyle="display: block;position: absolute;background-color: "+i.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+i.nzWidth+"px;height: "+i.nzHeight+"px;",i.lensRound="","lens"==i.options.zoomType&&(i.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(i.options.borderSize)+"px solid "+i.options.borderColour+";width:"+String(i.options.lensSize)+"px;height:"+String(i.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;"),"round"==i.options.lensShape&&(i.lensRound="border-top-left-radius: "+String(i.options.lensSize/2+i.options.borderSize)+"px;border-top-right-radius: "+String(i.options.lensSize/2+i.options.borderSize)+"px;border-bottom-left-radius: "+String(i.options.lensSize/2+i.options.borderSize)+"px;border-bottom-right-radius: "+String(i.options.lensSize/2+i.options.borderSize)+"px;"),i.zoomContainer=r('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:'+i.nzOffset.left+"px;top:"+i.nzOffset.top+"px;height:"+i.nzHeight+"px;width:"+i.nzWidth+'px;"></div>'),r("body").append(i.zoomContainer),i.options.containLensZoom&&"lens"==i.options.zoomType&&i.zoomContainer.css("overflow","hidden"),"inner"!=i.options.zoomType&&(i.zoomLens=r("<div class='zoomLens' style='"+i.lensStyle+i.lensRound+"'>&nbsp;</div>").appendTo(i.zoomContainer).click(function(){i.$elem.trigger("click")}),i.options.tint&&(i.tintContainer=r("<div/>").addClass("tintContainer"),i.zoomTint=r("<div class='zoomTint' style='"+i.tintStyle+"'></div>"),i.zoomLens.wrap(i.tintContainer),i.zoomTintcss=i.zoomLens.after(i.zoomTint),i.zoomTintImage=r('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+i.nzWidth+"px; height: "+i.nzHeight+'px;" src="'+i.imageSrc+'">').appendTo(i.zoomLens).click(function(){i.$elem.trigger("click")}))),isNaN(i.options.zoomWindowPosition)?i.zoomWindow=r("<div style='z-index:999;left:"+i.windowOffsetLeft+"px;top:"+i.windowOffsetTop+"px;"+i.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo("body").click(function(){i.$elem.trigger("click")}):i.zoomWindow=r("<div style='z-index:999;left:"+i.windowOffsetLeft+"px;top:"+i.windowOffsetTop+"px;"+i.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(i.zoomContainer).click(function(){i.$elem.trigger("click")}),i.zoomWindowContainer=r("<div/>").addClass("zoomWindowContainer").css("width",i.options.zoomWindowWidth),i.zoomWindow.wrap(i.zoomWindowContainer),"lens"==i.options.zoomType&&i.zoomLens.css({backgroundImage:"url('"+i.imageSrc+"')"}),"window"==i.options.zoomType&&i.zoomWindow.css({backgroundImage:"url('"+i.imageSrc+"')"}),"inner"==i.options.zoomType&&i.zoomWindow.css({backgroundImage:"url('"+i.imageSrc+"')"}),i.$elem.bind("touchmove",function(e){e.preventDefault(),i.setPosition(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0])}),i.zoomContainer.bind("touchmove",function(e){"inner"==i.options.zoomType&&i.showHideWindow("show"),e.preventDefault(),i.setPosition(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0])}),i.zoomContainer.bind("touchend",function(e){i.showHideWindow("hide"),i.options.showLens&&i.showHideLens("hide"),i.options.tint&&"inner"!=i.options.zoomType&&i.showHideTint("hide")}),i.$elem.bind("touchend",function(e){i.showHideWindow("hide"),i.options.showLens&&i.showHideLens("hide"),i.options.tint&&"inner"!=i.options.zoomType&&i.showHideTint("hide")}),i.options.showLens&&(i.zoomLens.bind("touchmove",function(e){e.preventDefault(),i.setPosition(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0])}),i.zoomLens.bind("touchend",function(e){i.showHideWindow("hide"),i.options.showLens&&i.showHideLens("hide"),i.options.tint&&"inner"!=i.options.zoomType&&i.showHideTint("hide")})),i.$elem.bind("mousemove",function(e){0==i.overWindow&&i.setElements("show"),i.lastX===e.clientX&&i.lastY===e.clientY||(i.setPosition(e),i.currentLoc=e),i.lastX=e.clientX,i.lastY=e.clientY}),i.zoomContainer.bind("mousemove",function(e){0==i.overWindow&&i.setElements("show"),i.lastX===e.clientX&&i.lastY===e.clientY||(i.setPosition(e),i.currentLoc=e),i.lastX=e.clientX,i.lastY=e.clientY}),"inner"!=i.options.zoomType&&i.zoomLens.bind("mousemove",function(e){i.lastX===e.clientX&&i.lastY===e.clientY||(i.setPosition(e),i.currentLoc=e),i.lastX=e.clientX,i.lastY=e.clientY}),i.options.tint&&"inner"!=i.options.zoomType&&i.zoomTint.bind("mousemove",function(e){i.lastX===e.clientX&&i.lastY===e.clientY||(i.setPosition(e),i.currentLoc=e),i.lastX=e.clientX,i.lastY=e.clientY}),"inner"==i.options.zoomType&&i.zoomWindow.bind("mousemove",function(e){i.lastX===e.clientX&&i.lastY===e.clientY||(i.setPosition(e),i.currentLoc=e),i.lastX=e.clientX,i.lastY=e.clientY}),i.zoomContainer.add(i.$elem).mouseenter(function(){0==i.overWindow&&i.setElements("show")}).mouseleave(function(){i.scrollLock||i.setElements("hide")}),"inner"!=i.options.zoomType&&i.zoomWindow.mouseenter(function(){i.overWindow=!0,i.setElements("hide")}).mouseleave(function(){i.overWindow=!1}),i.minZoomLevel=i.options.minZoomLevel||2*i.options.scrollZoomIncrement,i.options.scrollZoom&&i.zoomContainer.add(i.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){i.scrollLock=!0,clearTimeout(r.data(this,"timer")),r.data(this,"timer",setTimeout(function(){i.scrollLock=!1},250));var t=e.originalEvent.wheelDelta||-1*e.originalEvent.detail;return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),0<t/120?i.currentZoomLevel>=i.minZoomLevel&&i.changeZoomLevel(i.currentZoomLevel-i.options.scrollZoomIncrement):(!i.options.maxZoomLevel||i.currentZoomLevel<=i.options.maxZoomLevel)&&i.changeZoomLevel(parseFloat(i.currentZoomLevel)+i.options.scrollZoomIncrement),!1})},setElements:function(e){if(!this.options.zoomEnabled)return!1;"show"==e&&this.isWindowSet&&("inner"==this.options.zoomType&&this.showHideWindow("show"),"window"==this.options.zoomType&&this.showHideWindow("show"),this.options.showLens&&this.showHideLens("show"),this.options.tint&&"inner"!=this.options.zoomType&&this.showHideTint("show")),"hide"==e&&("window"==this.options.zoomType&&this.showHideWindow("hide"),this.options.tint||this.showHideWindow("hide"),this.options.showLens&&this.showHideLens("hide"),this.options.tint&&this.showHideTint("hide"))},setPosition:function(e){if(!this.options.zoomEnabled)return!1;this.nzHeight=this.$elem.height(),this.nzWidth=this.$elem.width(),this.nzOffset=this.$elem.offset(),this.options.tint&&"inner"!=this.options.zoomType&&(this.zoomTint.css({top:0}),this.zoomTint.css({left:0})),this.options.responsive&&!this.options.scrollZoom&&this.options.showLens&&(lensHeight=this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.nzHeight:String(this.options.zoomWindowHeight/this.heightRatio),lensWidth=this.largeWidth<this.options.zoomWindowWidth?this.nzWidth:this.options.zoomWindowWidth/this.widthRatio,this.widthRatio=this.largeWidth/this.nzWidth,this.heightRatio=this.largeHeight/this.nzHeight,"lens"!=this.options.zoomType&&(lensHeight=this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.nzHeight:String(this.options.zoomWindowHeight/this.heightRatio),lensWidth=this.options.zoomWindowWidth<this.options.zoomWindowWidth?this.nzWidth:this.options.zoomWindowWidth/this.widthRatio,this.zoomLens.css("width",lensWidth),this.zoomLens.css("height",lensHeight),this.options.tint&&(this.zoomTintImage.css("width",this.nzWidth),this.zoomTintImage.css("height",this.nzHeight))),"lens"==this.options.zoomType&&this.zoomLens.css({width:String(this.options.lensSize)+"px",height:String(this.options.lensSize)+"px"})),this.zoomContainer.css({top:this.nzOffset.top}),this.zoomContainer.css({left:this.nzOffset.left}),this.mouseLeft=parseInt(e.pageX-this.nzOffset.left),this.mouseTop=parseInt(e.pageY-this.nzOffset.top),"window"==this.options.zoomType&&(this.Etoppos=this.mouseTop<this.zoomLens.height()/2,this.Eboppos=this.mouseTop>this.nzHeight-this.zoomLens.height()/2-2*this.options.lensBorderSize,this.Eloppos=this.mouseLeft<0+this.zoomLens.width()/2,this.Eroppos=this.mouseLeft>this.nzWidth-this.zoomLens.width()/2-2*this.options.lensBorderSize),"inner"==this.options.zoomType&&(this.Etoppos=this.mouseTop<this.nzHeight/2/this.heightRatio,this.Eboppos=this.mouseTop>this.nzHeight-this.nzHeight/2/this.heightRatio,this.Eloppos=this.mouseLeft<0+this.nzWidth/2/this.widthRatio,this.Eroppos=this.mouseLeft>this.nzWidth-this.nzWidth/2/this.widthRatio-2*this.options.lensBorderSize),this.mouseLeft<=0||this.mouseTop<0||this.mouseLeft>this.nzWidth||this.mouseTop>this.nzHeight?this.setElements("hide"):(this.options.showLens&&(this.lensLeftPos=String(this.mouseLeft-this.zoomLens.width()/2),this.lensTopPos=String(this.mouseTop-this.zoomLens.height()/2)),this.Etoppos&&(this.lensTopPos=0),this.Eloppos&&(this.tintpos=this.lensLeftPos=this.windowLeftPos=0),"window"==this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-this.zoomLens.height()-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.zoomLens.width()-2*this.options.lensBorderSize)),"inner"==this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.nzWidth-2*this.options.lensBorderSize)),"lens"==this.options.zoomType&&(this.windowLeftPos=String(-1*((e.pageX-this.nzOffset.left)*this.widthRatio-this.zoomLens.width()/2)),this.windowTopPos=String(-1*((e.pageY-this.nzOffset.top)*this.heightRatio-this.zoomLens.height()/2)),this.zoomLens.css({backgroundPosition:this.windowLeftPos+"px "+this.windowTopPos+"px"}),this.changeBgSize&&(this.nzHeight>this.nzWidth?("lens"==this.options.zoomType&&this.zoomLens.css({"background-size":this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"}),this.zoomWindow.css({"background-size":this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"})):("lens"==this.options.zoomType&&this.zoomLens.css({"background-size":this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"}),this.zoomWindow.css({"background-size":this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"})),this.changeBgSize=!1),this.setWindowPostition(e)),this.options.tint&&"inner"!=this.options.zoomType&&this.setTintPosition(e),"window"==this.options.zoomType&&this.setWindowPostition(e),"inner"==this.options.zoomType&&this.setWindowPostition(e),this.options.showLens&&(this.fullwidth&&"lens"!=this.options.zoomType&&(this.lensLeftPos=0),this.zoomLens.css({left:this.lensLeftPos+"px",top:this.lensTopPos+"px"})))},showHideWindow:function(e){"show"!=e||this.isWindowActive||(this.options.zoomWindowFadeIn?this.zoomWindow.stop(!0,!0,!1).fadeIn(this.options.zoomWindowFadeIn):this.zoomWindow.show(),this.isWindowActive=!0),"hide"==e&&this.isWindowActive&&(this.options.zoomWindowFadeOut?this.zoomWindow.stop(!0,!0).fadeOut(this.options.zoomWindowFadeOut):this.zoomWindow.hide(),this.isWindowActive=!1)},showHideLens:function(e){"show"!=e||this.isLensActive||(this.options.lensFadeIn?this.zoomLens.stop(!0,!0,!1).fadeIn(this.options.lensFadeIn):this.zoomLens.show(),this.isLensActive=!0),"hide"==e&&this.isLensActive&&(this.options.lensFadeOut?this.zoomLens.stop(!0,!0).fadeOut(this.options.lensFadeOut):this.zoomLens.hide(),this.isLensActive=!1)},showHideTint:function(e){"show"!=e||this.isTintActive||(this.options.zoomTintFadeIn?this.zoomTint.css({opacity:this.options.tintOpacity}).animate().stop(!0,!0).fadeIn("slow"):(this.zoomTint.css({opacity:this.options.tintOpacity}).animate(),this.zoomTint.show()),this.isTintActive=!0),"hide"==e&&this.isTintActive&&(this.options.zoomTintFadeOut?this.zoomTint.stop(!0,!0).fadeOut(this.options.zoomTintFadeOut):this.zoomTint.hide(),this.isTintActive=!1)},setLensPostition:function(e){},setWindowPostition:function(e){var t=this;if(isNaN(t.options.zoomWindowPosition))t.externalContainer=r("#"+t.options.zoomWindowPosition),t.externalContainerWidth=t.externalContainer.width(),t.externalContainerHeight=t.externalContainer.height(),t.externalContainerOffset=t.externalContainer.offset(),t.windowOffsetTop=t.externalContainerOffset.top,t.windowOffsetLeft=t.externalContainerOffset.left;else switch(t.options.zoomWindowPosition){case 1:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=+t.nzWidth;break;case 2:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=t.nzWidth);break;case 3:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=t.nzWidth;break;case 4:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth;break;case 5:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 6:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 7:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=0;break;case 8:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 9:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 10:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize));break;case 11:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 12:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 13:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=0;break;case 14:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 15:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 16:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth;break;default:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=t.nzWidth}t.isWindowSet=!0,t.windowOffsetTop+=t.options.zoomWindowOffety,t.windowOffsetLeft+=t.options.zoomWindowOffetx,t.zoomWindow.css({top:t.windowOffsetTop}),t.zoomWindow.css({left:t.windowOffsetLeft}),"inner"==t.options.zoomType&&(t.zoomWindow.css({top:0}),t.zoomWindow.css({left:0})),t.windowLeftPos=String(-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2)),t.Etoppos&&(t.windowTopPos=0),t.Eloppos&&(t.windowLeftPos=0),t.Eboppos&&(t.windowTopPos=-1*(t.largeHeight/t.currentZoomLevel-t.zoomWindow.height())),t.Eroppos&&(t.windowLeftPos=-1*(t.largeWidth/t.currentZoomLevel-t.zoomWindow.width())),t.fullheight&&(t.windowTopPos=0),t.fullwidth&&(t.windowLeftPos=0),"window"!=t.options.zoomType&&"inner"!=t.options.zoomType||(1==t.zoomLock&&(t.widthRatio<=1&&(t.windowLeftPos=0),t.heightRatio<=1&&(t.windowTopPos=0)),t.largeHeight<t.options.zoomWindowHeight&&(t.windowTopPos=0),t.largeWidth<t.options.zoomWindowWidth&&(t.windowLeftPos=0),t.options.easing?(t.xp||(t.xp=0),t.yp||(t.yp=0),t.loop||(t.loop=setInterval(function(){t.xp+=(t.windowLeftPos-t.xp)/t.options.easingAmount,t.yp+=(t.windowTopPos-t.yp)/t.options.easingAmount,t.scrollingLock?(clearInterval(t.loop),t.xp=t.windowLeftPos,t.yp=t.windowTopPos,t.xp=-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2),t.yp=-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2),t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.scrollingLock=!1,t.loop=!1):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.xp+"px "+t.yp+"px"}))},16))):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.largeHeight/t.newvaluewidth<t.options.zoomWindowHeight?t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}):t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"})))},setTintPosition:function(e){this.nzOffset=this.$elem.offset(),this.tintpos=String(-1*(e.pageX-this.nzOffset.left-this.zoomLens.width()/2)),this.tintposy=String(-1*(e.pageY-this.nzOffset.top-this.zoomLens.height()/2)),this.Etoppos&&(this.tintposy=0),this.Eloppos&&(this.tintpos=0),this.Eboppos&&(this.tintposy=-1*(this.nzHeight-this.zoomLens.height()-2*this.options.lensBorderSize)),this.Eroppos&&(this.tintpos=-1*(this.nzWidth-this.zoomLens.width()-2*this.options.lensBorderSize)),this.options.tint&&(this.fullheight&&(this.tintposy=0),this.fullwidth&&(this.tintpos=0),this.zoomTintImage.css({left:this.tintpos+"px"}),this.zoomTintImage.css({top:this.tintposy+"px"}))},swaptheimage:function(e,t){var i=this,s=new Image;i.options.loadingIcon&&(i.spinner=r("<div style=\"background: url('"+i.options.loadingIcon+"') no-repeat center;height:"+i.nzHeight+"px;width:"+i.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>'),i.$elem.after(i.spinner)),i.options.onImageSwap(i.$elem),s.onload=function(){i.largeWidth=s.width,i.largeHeight=s.height,i.zoomImage=t,i.zoomWindow.css({"background-size":i.largeWidth+"px "+i.largeHeight+"px"}),i.zoomWindow.css({"background-size":i.largeWidth+"px "+i.largeHeight+"px"}),i.swapAction(e,t)},s.src=t},swapAction:function(e,t){var i,s,n=this,o=new Image;o.onload=function(){n.nzHeight=o.height,n.nzWidth=o.width,n.options.onImageSwapComplete(n.$elem),n.doneCallback()},o.src=e,n.currentZoomLevel=n.options.zoomLevel,n.options.maxZoomLevel=!1,"lens"==n.options.zoomType&&n.zoomLens.css({backgroundImage:"url('"+t+"')"}),"window"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+t+"')"}),"inner"==n.options.zoomType&&n.zoomWindow.css({backgroundImage:"url('"+t+"')"}),n.currentImage=t,n.options.imageCrossfade?(s=(i=n.$elem).clone(),n.$elem.attr("src",e),n.$elem.after(s),s.stop(!0).fadeOut(n.options.imageCrossfade,function(){r(this).remove()}),n.$elem.width("auto").removeAttr("width"),n.$elem.height("auto").removeAttr("height"),i.fadeIn(n.options.imageCrossfade),n.options.tint&&"inner"!=n.options.zoomType&&(s=(i=n.zoomTintImage).clone(),n.zoomTintImage.attr("src",t),n.zoomTintImage.after(s),s.stop(!0).fadeOut(n.options.imageCrossfade,function(){r(this).remove()}),i.fadeIn(n.options.imageCrossfade),n.zoomTint.css({height:n.$elem.height()}),n.zoomTint.css({width:n.$elem.width()})),n.zoomContainer.css("height",n.$elem.height()),n.zoomContainer.css("width",n.$elem.width()),"inner"!=n.options.zoomType||n.options.constrainType||(n.zoomWrap.parent().css("height",n.$elem.height()),n.zoomWrap.parent().css("width",n.$elem.width()),n.zoomWindow.css("height",n.$elem.height()),n.zoomWindow.css("width",n.$elem.width()))):(n.$elem.attr("src",e),n.options.tint&&(n.zoomTintImage.attr("src",t),n.zoomTintImage.attr("height",n.$elem.height()),n.zoomTintImage.css({height:n.$elem.height()}),n.zoomTint.css({height:n.$elem.height()})),n.zoomContainer.css("height",n.$elem.height()),n.zoomContainer.css("width",n.$elem.width())),n.options.imageCrossfade&&(n.zoomWrap.css("height",n.$elem.height()),n.zoomWrap.css("width",n.$elem.width())),n.options.constrainType&&("height"==n.options.constrainType&&(n.zoomContainer.css("height",n.options.constrainSize),n.zoomContainer.css("width","auto"),n.options.imageCrossfade?(n.zoomWrap.css("height",n.options.constrainSize),n.zoomWrap.css("width","auto"),n.constwidth=n.zoomWrap.width()):(n.$elem.css("height",n.options.constrainSize),n.$elem.css("width","auto"),n.constwidth=n.$elem.width()),"inner"==n.options.zoomType&&(n.zoomWrap.parent().css("height",n.options.constrainSize),n.zoomWrap.parent().css("width",n.constwidth),n.zoomWindow.css("height",n.options.constrainSize),n.zoomWindow.css("width",n.constwidth)),n.options.tint&&(n.tintContainer.css("height",n.options.constrainSize),n.tintContainer.css("width",n.constwidth),n.zoomTint.css("height",n.options.constrainSize),n.zoomTint.css("width",n.constwidth),n.zoomTintImage.css("height",n.options.constrainSize),n.zoomTintImage.css("width",n.constwidth))),"width"==n.options.constrainType&&(n.zoomContainer.css("height","auto"),n.zoomContainer.css("width",n.options.constrainSize),n.options.imageCrossfade?(n.zoomWrap.css("height","auto"),n.zoomWrap.css("width",n.options.constrainSize),n.constheight=n.zoomWrap.height()):(n.$elem.css("height","auto"),n.$elem.css("width",n.options.constrainSize),n.constheight=n.$elem.height()),"inner"==n.options.zoomType&&(n.zoomWrap.parent().css("height",n.constheight),n.zoomWrap.parent().css("width",n.options.constrainSize),n.zoomWindow.css("height",n.constheight),n.zoomWindow.css("width",n.options.constrainSize)),n.options.tint&&(n.tintContainer.css("height",n.constheight),n.tintContainer.css("width",n.options.constrainSize),n.zoomTint.css("height",n.constheight),n.zoomTint.css("width",n.options.constrainSize),n.zoomTintImage.css("height",n.constheight),n.zoomTintImage.css("width",n.options.constrainSize))))},doneCallback:function(){this.options.loadingIcon&&this.spinner.hide(),this.nzOffset=this.$elem.offset(),this.nzWidth=this.$elem.width(),this.nzHeight=this.$elem.height(),this.currentZoomLevel=this.options.zoomLevel,this.widthRatio=this.largeWidth/this.nzWidth,this.heightRatio=this.largeHeight/this.nzHeight,"window"==this.options.zoomType&&(lensHeight=this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?this.nzHeight:String(this.options.zoomWindowHeight/this.heightRatio),lensWidth=this.options.zoomWindowWidth<this.options.zoomWindowWidth?this.nzWidth:this.options.zoomWindowWidth/this.widthRatio,this.zoomLens&&(this.zoomLens.css("width",lensWidth),this.zoomLens.css("height",lensHeight)))},getCurrentImage:function(){return this.zoomImage},getGalleryList:function(){var t=this;return t.gallerylist=[],t.options.gallery?r("#"+t.options.gallery+" a").each(function(){var e="";r(this).data("zoom-image")?e=r(this).data("zoom-image"):r(this).data("image")&&(e=r(this).data("image")),e==t.zoomImage?t.gallerylist.unshift({href:""+e,title:r(this).find("img").attr("title")}):t.gallerylist.push({href:""+e,title:r(this).find("img").attr("title")})}):t.gallerylist.push({href:""+t.zoomImage,title:r(this).find("img").attr("title")}),t.gallerylist},changeZoomLevel:function(e){this.scrollingLock=!0,this.newvalue=parseFloat(e).toFixed(2),newvalue=parseFloat(e).toFixed(2),maxheightnewvalue=this.largeHeight/(this.options.zoomWindowHeight/this.nzHeight*this.nzHeight),maxwidthtnewvalue=this.largeWidth/(this.options.zoomWindowWidth/this.nzWidth*this.nzWidth),"inner"!=this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/maxheightnewvalue/this.nzHeight,this.newvalueheight=maxheightnewvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/maxwidthtnewvalue/this.nzWidth,this.newvaluewidth=maxwidthtnewvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1),"lens"==this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.fullwidth=!0,this.newvaluewidth=maxheightnewvalue):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1))),"inner"==this.options.zoomType&&(maxheightnewvalue=parseFloat(this.largeHeight/this.nzHeight).toFixed(2),maxwidthtnewvalue=parseFloat(this.largeWidth/this.nzWidth).toFixed(2),newvalue>maxheightnewvalue&&(newvalue=maxheightnewvalue),newvalue>maxwidthtnewvalue&&(newvalue=maxwidthtnewvalue),maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue>maxheightnewvalue?maxheightnewvalue:newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue>maxwidthtnewvalue?maxwidthtnewvalue:newvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1)),scrcontinue=!1,"inner"==this.options.zoomType&&(this.nzWidth>this.nzHeight&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullwidth=this.fullheight=!0)),this.nzHeight>this.nzWidth&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullwidth=this.fullheight=!0))),"inner"!=this.options.zoomType&&(scrcontinue=!0),scrcontinue&&(this.zoomLock=0,this.changeZoom=!0,this.options.zoomWindowHeight/this.heightRatio<=this.nzHeight&&(this.currentZoomLevel=this.newvalueheight,"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({height:String(this.options.zoomWindowHeight/this.heightRatio)+"px"})),"lens"==this.options.zoomType||"inner"==this.options.zoomType)&&(this.changeBgSize=!0),this.options.zoomWindowWidth/this.widthRatio<=this.nzWidth&&("inner"!=this.options.zoomType&&this.newvaluewidth>this.newvalueheight&&(this.currentZoomLevel=this.newvaluewidth),"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({width:String(this.options.zoomWindowWidth/this.widthRatio)+"px"})),"lens"==this.options.zoomType||"inner"==this.options.zoomType)&&(this.changeBgSize=!0),"inner"==this.options.zoomType&&(this.changeBgSize=!0,this.nzWidth>this.nzHeight&&(this.currentZoomLevel=this.newvaluewidth),this.nzHeight>this.nzWidth&&(this.currentZoomLevel=this.newvaluewidth))),this.setPosition(this.currentLoc)},closeAll:function(){self.zoomWindow&&self.zoomWindow.hide(),self.zoomLens&&self.zoomLens.hide(),self.zoomTint&&self.zoomTint.hide()},changeState:function(e){"enable"==e&&(this.options.zoomEnabled=!0),"disable"==e&&(this.options.zoomEnabled=!1)}};r.fn.elevateZoom=function(t){return this.each(function(){var e=Object.create(i);e.init(t,this),r.data(this,"elevateZoom",e)})},r.fn.elevateZoom.options={zoomActivation:"hover",zoomEnabled:!0,preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.1,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:.4,gallery:!1,galleryActiveClass:"zoomGalleryActive",imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:r.noop,onZoomedImageLoaded:function(){},onImageSwap:r.noop,onImageSwapComplete:r.noop}}(jQuery,(window,document)),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(r){function a(e){return parseFloat(e)||0}function l(e){var e=r(e),s=null,n=[];return e.each(function(){var e=r(this),t=e.offset().top-a(e.css("margin-top")),i=0<n.length?n[n.length-1]:null;null!==i&&Math.floor(Math.abs(s-t))<=1?n[n.length-1]=i.add(e):n.push(e),s=t}),n}function c(e){var t={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof e?r.extend(t,e):("boolean"==typeof e?t.byRow=e:"remove"===e&&(t.remove=!0),t)}var s=-1,n=-1,h=r.fn.matchHeight=function(e){e=c(e);if(e.remove){var i=this;return this.css(e.property,""),r.each(h._groups,function(e,t){t.elements=t.elements.not(i)}),this}return this.length<=1&&!e.target||(h._groups.push({elements:this,options:e}),h._apply(this,e)),this};h.version="0.7.0",h._groups=[],h._throttle=80,h._maintainScroll=!1,h._beforeUpdate=null,h._afterUpdate=null,h._rows=l,h._parse=a,h._parseOptions=c,h._apply=function(e,t){var n=c(t),i=r(e),s=[i],o=r(window).scrollTop(),t=r("html").outerHeight(!0),e=i.parents().filter(":hidden");return e.each(function(){var e=r(this);e.data("style-cache",e.attr("style"))}),e.css("display","block"),n.byRow&&!n.target&&(i.each(function(){var e=r(this),t=e.css("display");"inline-block"!==t&&"flex"!==t&&"inline-flex"!==t&&(t="block"),e.data("style-cache",e.attr("style")),e.css({display:t,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),s=l(i),i.each(function(){var e=r(this);e.attr("style",e.data("style-cache")||"")})),r.each(s,function(e,t){var t=r(t),s=0;if(n.target)s=n.target.outerHeight(!1);else{if(n.byRow&&t.length<=1)return void t.css(n.property,"");t.each(function(){var e=r(this),t=e.attr("style"),i=e.css("display");"inline-block"!==i&&"flex"!==i&&"inline-flex"!==i&&(i="block");i={display:i};i[n.property]="",e.css(i),e.outerHeight(!1)>s&&(s=e.outerHeight(!1)),t?e.attr("style",t):e.css("display","")})}t.each(function(){var e=r(this),t=0;n.target&&e.is(n.target)||("border-box"!==e.css("box-sizing")&&(t+=a(e.css("border-top-width"))+a(e.css("border-bottom-width")),t+=a(e.css("padding-top"))+a(e.css("padding-bottom"))),e.css(n.property,s-t+"px"))})}),e.each(function(){var e=r(this);e.attr("style",e.data("style-cache")||null)}),h._maintainScroll&&r(window).scrollTop(o/t*r("html").outerHeight(!0)),this},h._applyDataApi=function(){var i={};r("[data-match-height], [data-mh]").each(function(){var e=r(this),t=e.attr("data-mh")||e.attr("data-match-height");i[t]=t in i?i[t].add(e):e}),r.each(i,function(){this.matchHeight(!0)})};function o(e){h._beforeUpdate&&h._beforeUpdate(e,h._groups),r.each(h._groups,function(){h._apply(this.elements,this.options)}),h._afterUpdate&&h._afterUpdate(e,h._groups)}h._update=function(e,t){if(t&&"resize"===t.type){var i=r(window).width();if(i===s)return;s=i}e?-1===n&&(n=setTimeout(function(){o(t),n=-1},h._throttle)):o(t)},r(h._applyDataApi),r(window).bind("load",function(e){h._update(!1,e)}),r(window).bind("resize orientationchange",function(e){h._update(!0,e)})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(W,$){"use strict";if(!W.jstree){var n=0,o=!1,r=!1,a=!1,i=[],e=W("script:last").attr("src"),w=window.document;W.jstree={version:"3.3.3",defaults:{plugins:[]},plugins:{},path:e&&-1!==e.indexOf("/")?e.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},W.jstree.create=function(e,i){var s=new W.jstree.core(++n),t=i;return i=W.extend(!0,{},W.jstree.defaults,i),t&&t.plugins&&(i.plugins=t.plugins),W.each(i.plugins,function(e,t){"core"!==e&&(s=s.plugin(t,i[t]))}),W(e).data("jstree",s),s.init(e,i),s},W.jstree.destroy=function(){W(".jstree:jstree").jstree("destroy"),W(w).off(".jstree")},W.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},W.jstree.reference=function(t){var i=null,e=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!e||!e.length)try{e=W(t)}catch(e){}if(!e||!e.length)try{e=W("#"+t.replace(W.jstree.idregex,"\\$&"))}catch(e){}return e&&e.length&&(e=e.closest(".jstree")).length&&(e=e.data("jstree"))?i=e:W(".jstree").each(function(){var e=W(this).data("jstree");if(e&&e._model.data[t])return i=e,!1}),i},W.fn.jstree=function(i){var s="string"==typeof i,n=Array.prototype.slice.call(arguments,1),o=null;return!(!0===i&&!this.length)&&(this.each(function(){var e=W.jstree.reference(this),t=s&&e?e[i]:null;if(o=s&&t?t.apply(e,n):null,e||s||i!==$&&!W.isPlainObject(i)||W.jstree.create(this,i),(e&&!s||!0===i)&&(o=e||!1),null!==o&&o!==$)return!1}),null!==o&&o!==$?o:this)},W.expr.pseudos.jstree=W.expr.createPseudo(function(e){return function(e){return W(e).hasClass("jstree")&&W(e).data("jstree")!==$}}),W.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:W.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},W.jstree.core.prototype={plugin:function(e,t){var i=W.jstree.plugins[e];return i?(this._data[e]={},i.prototype=this,new i(t,this)):this},init:function(e,t){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[W.jstree.root]={id:W.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=W(e).addClass("jstree jstree-"+this._id),this.settings=t,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(W.jstree.root)},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,i=w.createElement("LI");return i.setAttribute("role","treeitem"),(e=w.createElement("I")).className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),i.appendChild(e),(e=w.createElement("A")).className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),(t=w.createElement("I")).className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),i.appendChild(e),e=t=null,i},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var n="",o=null,t=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(w.selection&&w.selection.empty)w.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",W.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),t=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",W.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",W.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",W.proxy(function(e){e.preventDefault(),e.currentTarget!==w.activeElement&&W(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",W.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(32!==e.which&&13!==e.which&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey))return!0;var t=null;switch(this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37)),e.which){case 32:e.ctrlKey&&(e.type="click",W(e.currentTarget).trigger(e));break;case 13:e.type="click",W(e.currentTarget).trigger(e);break;case 37:e.preventDefault(),this.is_open(e.currentTarget)?this.close_node(e.currentTarget):(t=this.get_parent(e.currentTarget))&&t.id!==W.jstree.root&&this.get_node(t,!0).children(".jstree-anchor").focus();break;case 38:e.preventDefault(),(t=this.get_prev_dom(e.currentTarget))&&t.length&&t.children(".jstree-anchor").focus();break;case 39:e.preventDefault(),this.is_closed(e.currentTarget)?this.open_node(e.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(e.currentTarget)&&(t=this.get_node(e.currentTarget,!0).children(".jstree-children")[0])&&W(this._firstChild(t)).children(".jstree-anchor").focus();break;case 40:e.preventDefault(),(t=this.get_next_dom(e.currentTarget))&&t.length&&t.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:e.preventDefault(),(t=this._firstChild(this.get_container_ul()[0]))&&W(t).children(".jstree-anchor").filter(":visible").focus();break;case 35:e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:e.preventDefault(),this.edit(e.currentTarget)}},this)).on("load_node.jstree",W.proxy(function(e,t){t.status&&(t.node.id!==W.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(W.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){for(var e=[],t=0,i=this._data.core.selected.length;t<i;t++)e=e.concat(this._model.data[this._data.core.selected[t]].parents);for(t=0,i=(e=W.vakata.array_unique(e)).length;t<i;t++)this.open_node(e[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",W.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;o&&clearTimeout(o),o=setTimeout(function(){n=""},500);var i=String.fromCharCode(e.which).toLowerCase(),t=this.element.find(".jstree-anchor").filter(":visible"),e=t.index(w.activeElement)||0,s=!1;if(1<(n+=i).length){if(t.slice(e).each(W.proxy(function(e,t){if(0===W(t).text().toLowerCase().indexOf(n))return W(t).focus(),!(s=!0)},this)),s)return;if(t.slice(0,e).each(W.proxy(function(e,t){if(0===W(t).text().toLowerCase().indexOf(n))return W(t).focus(),!(s=!0)},this)),s)return}new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(n)&&(t.slice(e+1).each(W.proxy(function(e,t){if(W(t).text().toLowerCase().charAt(0)===i)return W(t).focus(),!(s=!0)},this)),s||t.slice(0,e+1).each(W.proxy(function(e,t){if(W(t).text().toLowerCase().charAt(0)===i)return W(t).focus(),!(s=!0)},this)))},this)).on("init.jstree",W.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",W.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",W.proxy(function(e){this._data.core.focused=null,W(e.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",W.proxy(function(e){var t=this.get_node(e.currentTarget);t&&t.id&&(this._data.core.focused=t.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),W(e.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",W.proxy(function(){var e;500<+new Date-t&&!this._data.core.focused&&(t=0,(e=this.get_node(this.element.attr("aria-activedescendant"),!0))&&e.find("> .jstree-anchor").focus())},this)).on("mouseenter.jstree",".jstree-anchor",W.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",W.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),W(w).off(".jstree-"+this._id)},trigger:function(e,t){((t=t||{}).instance=this).element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var t=this.settings.core.strings;return W.isFunction(t)?t.call(this,e):t&&t[e]?t[e]:e},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(e,t){var i;e&&e.id&&(e=e.id);try{if(this._model.data[e])e=this._model.data[e];else if("string"==typeof e&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if("string"==typeof e&&(i=W("#"+e.replace(W.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=W(e,this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=W(e,this.element)).length||!i.hasClass("jstree"))return!1;e=this._model.data[W.jstree.root]}return t&&(e=e.id===W.jstree.root?this.element:W("#"+e.id.replace(W.jstree.idregex,"\\$&"),this.element)),e}catch(e){return!1}},get_path:function(e,t,i){if(!(e=e.parents?e:this.get_node(e))||e.id===W.jstree.root||!e.parents)return!1;var s,n,o=[];for(o.push(i?e.id:e.text),s=0,n=e.parents.length;s<n;s++)o.push(i?e.parents[s]:this.get_text(e.parents[s]));return o=o.reverse().slice(1),t?o.join(t):o},get_next_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){for(i=this._firstChild(this.get_container_ul()[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);return!!i&&W(i)}if(!e||!e.length)return!1;if(t){for(i=e[0];i=this._nextSibling(i),i&&0===i.offsetHeight;);return!!i&&W(i)}if(e.hasClass("jstree-open")){for(i=this._firstChild(e.children(".jstree-children")[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);if(null!==i)return W(i)}for(i=e[0];i=this._nextSibling(i),i&&0===i.offsetHeight;);return null!==i?W(i):e.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){for(i=this.get_container_ul()[0].lastChild;i&&0===i.offsetHeight;)i=this._previousSibling(i);return!!i&&W(i)}if(!e||!e.length)return!1;if(t){for(i=e[0];i=this._previousSibling(i),i&&0===i.offsetHeight;);return!!i&&W(i)}for(i=e[0];i=this._previousSibling(i),i&&0===i.offsetHeight;);if(null===i)return!(!(i=e[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&W(i);for(e=W(i);e.hasClass("jstree-open");)e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e},get_parent:function(e){return!(!(e=this.get_node(e))||e.id===W.jstree.root)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||0<e.children.length)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(r,a){var e,t,i,s,n;if(W.isArray(r))return this._load_nodes(r.slice(),a),!0;if(!(r=this.get_node(r)))return a&&a.call(this,r,!1),!1;if(r.state.loaded){for(r.state.loaded=!1,i=0,s=r.parents.length;i<s;i++)this._model.data[r.parents[i]].children_d=W.vakata.array_filter(this._model.data[r.parents[i]].children_d,function(e){return-1===W.inArray(e,r.children_d)});for(e=0,t=r.children_d.length;e<t;e++)this._model.data[r.children_d[e]].state.selected&&(n=!0),delete this._model.data[r.children_d[e]];n&&(this._data.core.selected=W.vakata.array_filter(this._data.core.selected,function(e){return-1===W.inArray(e,r.children_d)})),r.children=[],r.children_d=[],n&&this.trigger("changed",{action:"load_node",node:r,selected:this._data.core.selected})}return r.state.failed=!1,r.state.loading=!0,this.get_node(r,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(r,W.proxy(function(e){(r=this._model.data[r.id]).state.loading=!1,r.state.loaded=e,r.state.failed=!r.state.loaded;for(var t=this.get_node(r,!0),i=0,s=this._model.data,n=!1,i=0,o=r.children.length;i<o;i++)if(s[r.children[i]]&&!s[r.children[i]].state.hidden){n=!0;break}r.state.loaded&&t&&t.length&&(t.removeClass("jstree-closed jstree-open jstree-leaf"),n?"#"!==r.id&&t.addClass(r.state.opened?"jstree-open":"jstree-closed"):t.addClass("jstree-leaf")),t.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:r,status:e}),a&&a.call(this,r,e)},this)),!0},_load_nodes:function(e,t,i,s){for(var n=!0,o=function(){this._load_nodes(e,t,!0)},r=this._model.data,a=[],l=0,c=e.length;l<c;l++)r[e[l]]&&(!r[e[l]].state.loaded&&!r[e[l]].state.failed||!i&&s)&&(this.is_loading(e[l])||this.load_node(e[l],o),n=!1);if(n){for(l=0,c=e.length;l<c;l++)r[e[l]]&&r[e[l]].state.loaded&&a.push(e[l]);t&&!t.done&&(t.call(this,a),t.done=!0)}},load_all:function(e,t){if(e=e||W.jstree.root,!(e=this.get_node(e)))return!1;var i,s,n=[],o=this._model.data,r=o[e.id].children_d;for(e.state&&!e.state.loaded&&n.push(e.id),i=0,s=r.length;i<s;i++)o[r[i]]&&o[r[i]].state&&!o[r[i]].state.loaded&&n.push(r[i]);n.length?this._load_nodes(n,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(n,o){function r(){return 3!==this.nodeType&&8!==this.nodeType}var e,t=this.settings.core.data;return t?W.isFunction(t)?t.call(this,n,W.proxy(function(e){!1===e?o.call(this,!1):this["string"==typeof e?"_append_html_data":"_append_json_data"](n,"string"==typeof e?W(W.parseHTML(e)).filter(r):e,function(e){o.call(this,e)})},this)):"object"==typeof t?t.url?(t=W.extend(!0,{},t),W.isFunction(t.url)&&(t.url=t.url.call(this,n)),W.isFunction(t.data)&&(t.data=t.data.call(this,n)),W.ajax(t).done(W.proxy(function(e,t,i){var s=i.getResponseHeader("Content-Type");return s&&-1!==s.indexOf("json")||"object"==typeof e?this._append_json_data(n,e,function(e){o.call(this,e)}):s&&-1!==s.indexOf("html")||"string"==typeof e?this._append_html_data(n,W(W.parseHTML(e)).filter(r),function(e){o.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:n.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),o.call(this,!1))},this)).fail(W.proxy(function(e){o.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:n.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(e=W.isArray(t)||W.isPlainObject(t)?JSON.parse(JSON.stringify(t)):t,n.id===W.jstree.root?this._append_json_data(n,e,function(e){o.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:n.id})},this.settings.core.error.call(this,this._data.core.last_error),o.call(this,!1))):"string"==typeof t?n.id===W.jstree.root?this._append_html_data(n,W(W.parseHTML(t)).filter(r),function(e){o.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:n.id})},this.settings.core.error.call(this,this._data.core.last_error),o.call(this,!1)):o.call(this,!1):n.id===W.jstree.root?this._append_html_data(n,this._data.core.original_container_html.clone(!0),function(e){o.call(this,e)}):o.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(e,t,i){(e=this.get_node(e)).children=[],e.children_d=[];var s,n,o,t=t.is("ul")?t.children():t,r=e.id,a=[],l=[],c=this._model.data,h=c[r],e=this._data.core.selected.length;for(t.each(W.proxy(function(e,t){(s=this._parse_model_from_html(W(t),r,h.parents.concat()))&&(a.push(s),l.push(s),c[s].children_d.length&&(l=l.concat(c[s].children_d)))},this)),h.children=a,h.children_d=l,n=0,o=h.parents.length;n<o;n++)c[h.parents[n]].children_d=c[h.parents[n]].children_d.concat(l);this.trigger("model",{nodes:l,parent:r}),r!==W.jstree.root?(this._node_changed(r),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==e&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(e,t,l,i){if(null!==this.element){(e=this.get_node(e)).children=[],e.children_d=[],t.d&&"string"==typeof(t=t.d)&&(t=JSON.parse(t)),W.isArray(t)||(t=[t]);var s=null,n={df:this._model.default_state,dat:t,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,c){e.data&&(e=e.data);var t,i,s,n,o=e.dat,r=e.par,a=[],l=[],h=[],d=e.df,u=e.t_id,p=e.t_cnt,f=e.m,g=f[r],e=e.sel,m=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var s,n,o,r,a=e.id.toString(),l={id:a,text:e.text||"",icon:e.icon===c||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in d)d.hasOwnProperty(s)&&(l.state[s]=d[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==c&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(l.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(l.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=e.li_attr[s]);if(l.li_attr.id||(l.li_attr.id=a),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=e.a_attr[s]);for(e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),s=0,n=(f[l.id]=l).children.length;s<n;s++)o=m(f[l.children[s]],l.id,i),r=f[o],l.children_d.push(o),r.children_d.length&&(l.children_d=l.children_d.concat(r.children_d));return delete e.data,delete e.children,f[l.id].original=e,l.state.selected&&h.push(l.id),l.id},_=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);for(var s,n,o,r,a,l=!1;l="j"+u+"_"+ ++p,f[l];);for(s in a={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===c||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},d)d.hasOwnProperty(s)&&(a.state[s]=d[s]);if(e&&e.id&&(a.id=e.id.toString()),e&&e.text&&(a.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(a.icon=e.data.jstree.icon),a.icon!==c&&null!==a.icon&&""!==a.icon||(a.icon=!0),e&&e.data&&(a.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(a.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(a.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(a.li_attr[s]=e.li_attr[s]);if(a.li_attr.id&&!a.id&&(a.id=a.li_attr.id.toString()),a.id||(a.id=l),a.li_attr.id||(a.li_attr.id=a.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(a.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,n=e.children.length;s<n;s++)o=_(e.children[s],a.id,i),r=f[o],a.children.push(o),r.children_d.length&&(a.children_d=a.children_d.concat(r.children_d));a.children_d=a.children_d.concat(a.children)}return e&&e.children&&!0===e.children&&(a.state.loaded=!1,a.children=[],a.children_d=[]),delete e.data,delete e.children,a.original=e,(f[a.id]=a).state.selected&&h.push(a.id),a.id};if(o.length&&o[0].id!==c&&o[0].parent!==c){for(i=0,s=o.length;i<s;i++)o[i].children||(o[i].children=[]),f[o[i].id.toString()]=o[i];for(i=0,s=o.length;i<s;i++)f[o[i].parent.toString()].children.push(o[i].id.toString()),g.children_d.push(o[i].id.toString());for(i=0,s=g.children.length;i<s;i++)t=m(f[g.children[i]],r,g.parents.concat()),l.push(t),f[t].children_d.length&&(l=l.concat(f[t].children_d));for(i=0,s=g.parents.length;i<s;i++)f[g.parents[i]].children_d=f[g.parents[i]].children_d.concat(l);n={cnt:p,mod:f,sel:e,par:r,dpc:l,add:h}}else{for(i=0,s=o.length;i<s;i++)(t=_(o[i],r,g.parents.concat()))&&(a.push(t),l.push(t),f[t].children_d.length&&(l=l.concat(f[t].children_d)));for(g.children=a,g.children_d=l,i=0,s=g.parents.length;i<s;i++)f[g.parents[i]].children_d=f[g.parents[i]].children_d.concat(l);n={cnt:p,mod:f,sel:e,par:r,dpc:l,add:h}}if("undefined"!=typeof window&&void 0!==window.document)return n;postMessage(n)},r=function(e,t){if(null!==this.element){for(var i in this._cnt=e.cnt,a=this._model.data)a.hasOwnProperty(i)&&a[i].state&&a[i].state.loading&&e.mod[i]&&(e.mod[i].state.loading=!0);if(this._model.data=e.mod,t){var s,n=e.add,o=e.sel,r=this._data.core.selected.slice(),a=this._model.data;if(o.length!==r.length||W.vakata.array_unique(o.concat(r)).length!==o.length){for(i=0,s=o.length;i<s;i++)-1===W.inArray(o[i],n)&&-1===W.inArray(o[i],r)&&(a[o[i]].state.selected=!1);for(i=0,s=r.length;i<s;i++)-1===W.inArray(r[i],o)&&(a[r[i]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),e.par!==W.jstree.root?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),l.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,(s=new window.Worker(this._wrk)).onmessage=W.proxy(function(e){r.call(this,e.data,!0);try{s.terminate(),s=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),n.par?s.postMessage(n):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,t,l,!0])}catch(e){r.call(this,o(n),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else r.call(this,o(n),!1)}},_parse_model_from_html:function(e,t,i){i=i?[].concat(i):[],t&&i.unshift(t);var s,n,o,r,a=this._model.data,l={id:!1,text:!1,icon:!0,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(l.state[o]=this._model.default_state[o]);if(t=W.vakata.attributes(e,!0),W.each(t,function(e,t){return!(t=W.trim(t)).length||(l.li_attr[e]=t,void("id"===e&&(l.id=t.toString())))}),(t=e.children("a").first()).length&&(t=W.vakata.attributes(t,!0),W.each(t,function(e,t){(t=W.trim(t)).length&&(l.a_attr[e]=t)})),(t=(e.children("a").first().length?e.children("a").first():e).clone()).children("ins, i, ul").remove(),t=t.html(),t=W("<div />").html(t),l.text=this.settings.core.force_text?t.text():t.html(),t=e.data(),l.data=t?W.extend(!0,{},t):null,l.state.opened=e.hasClass("jstree-open"),l.state.selected=e.children("a").hasClass("jstree-clicked"),l.state.disabled=e.children("a").hasClass("jstree-disabled"),l.data&&l.data.jstree)for(o in l.data.jstree)l.data.jstree.hasOwnProperty(o)&&(l.state[o]=l.data.jstree[o]);for(t=e.children("a").children(".jstree-themeicon"),t.length&&(l.icon=!t.hasClass("jstree-themeicon-hidden")&&t.attr("rel")),l.state.icon!==$&&(l.icon=l.state.icon),l.icon!==$&&null!==l.icon&&""!==l.icon||(l.icon=!0),t=e.children("ul").children("li");r="j"+this._id+"_"+ ++this._cnt,a[r];);return l.id=l.li_attr.id?l.li_attr.id.toString():r,t.length?(t.each(W.proxy(function(e,t){s=this._parse_model_from_html(W(t),l.id,i),n=this._model.data[s],l.children.push(s),n.children_d.length&&(l.children_d=l.children_d.concat(n.children_d))},this)),l.children_d=l.children_d.concat(l.children)):e.hasClass("jstree-closed")&&(l.state.loaded=!1),l.li_attr.class&&(l.li_attr.class=l.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),l.a_attr.class&&(l.a_attr.class=l.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),(a[l.id]=l).state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_flat_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var s,n,o,r,a=e.id.toString(),l=this._model.data,c=this._model.default_state,h={id:a,text:e.text||"",icon:e.icon===$||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in c)c.hasOwnProperty(s)&&(h.state[s]=c[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon),h.icon!==$&&null!==h.icon&&""!==h.icon||(h.icon=!0),e&&e.data&&(h.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(h.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(h.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=e.li_attr[s]);if(h.li_attr.id||(h.li_attr.id=a),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=e.a_attr[s]);for(e&&e.children&&!0===e.children&&(h.state.loaded=!1,h.children=[],h.children_d=[]),s=0,n=(l[h.id]=h).children.length;s<n;s++)r=l[o=this._parse_model_from_flat_json(l[h.children[s]],h.id,i)],h.children_d.push(o),r.children_d.length&&(h.children_d=h.children_d.concat(r.children_d));return delete e.data,delete e.children,l[h.id].original=e,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);for(var s,n,o,r,a,l=!1,c=this._model.data,h=this._model.default_state;l="j"+this._id+"_"+ ++this._cnt,c[l];);for(s in a={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===$||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},h)h.hasOwnProperty(s)&&(a.state[s]=h[s]);if(e&&e.id&&(a.id=e.id.toString()),e&&e.text&&(a.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(a.icon=e.data.jstree.icon),a.icon!==$&&null!==a.icon&&""!==a.icon||(a.icon=!0),e&&e.data&&(a.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(a.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(a.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(a.li_attr[s]=e.li_attr[s]);if(a.li_attr.id&&!a.id&&(a.id=a.li_attr.id.toString()),a.id||(a.id=l),a.li_attr.id||(a.li_attr.id=a.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(a.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,n=e.children.length;s<n;s++)r=c[o=this._parse_model_from_json(e.children[s],a.id,i)],a.children.push(o),r.children_d.length&&(a.children_d=a.children_d.concat(r.children_d));a.children_d=a.children_d.concat(a.children)}return e&&e.children&&!0===e.children&&(a.state.loaded=!1,a.children=[],a.children_d=[]),delete e.data,delete e.children,a.original=e,(c[a.id]=a).state.selected&&this._data.core.selected.push(a.id),a.id},_redraw:function(){for(var e,t=(this._model.force_full_redraw?this._model.data[W.jstree.root].children:this._model.changed).concat([]),i=w.createElement("UL"),s=this._data.core.focused,n=0,o=t.length;n<o;n++)(e=this.redraw_node(t[n],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&i.appendChild(e);this._model.force_full_redraw&&(i.className=this.get_container_ul()[0].className,i.setAttribute("role","group"),this.element.empty().append(i)),null!==s&&((e=this.get_node(s,!0))&&e.length&&e.children(".jstree-anchor")[0]!==w.activeElement?e.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:t})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t,i=this.get_node(e),s=!1,n=!1,o=w;if(!i)return!1;if(i.id===W.jstree.root)return this.redraw(!0);if(!(e=this.get_node(e,!0))||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],i.children.length&&i.state.loaded){for((n=o.createElement("UL")).setAttribute("role","group"),n.className="jstree-children",s=0,t=i.children.length;s<t;s++)n.appendChild(this.redraw_node(i.children[s],!0,!0));e.appendChild(n)}},redraw_node:function(e,t,i,s){var n,o,r=this.get_node(e),a=!1,l=!1,c=!1,h=!1,d=!1,u=!1,p="",f=w,g=this._model.data,m=!1,_=null,v=!1,y=!1;if(!r)return!1;if(r.id===W.jstree.root)return this.redraw(!0);if(t=t||0===r.children.length,e=w.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(r.id[0])?"\\3"+r.id[0]+" "+r.id.substr(1).replace(W.jstree.idregex,"\\$&"):r.id.replace(W.jstree.idregex,"\\$&"))):w.getElementById(r.id))e=W(e),i||((a=e.parent().parent()[0])===this.element[0]&&(a=null),l=e.index()),t||!r.children.length||e.children(".jstree-children").length||(t=!0),t||(c=e.children(".jstree-children")[0]),m=e.children(".jstree-anchor")[0]===w.activeElement,e.remove();else if(t=!0,!i){if(!(null===(a=r.parent!==W.jstree.root?W("#"+r.parent.replace(W.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&g[r.parent].state.opened))return!1;l=W.inArray(r.id,(null===a?g[W.jstree.root]:g[r.parent]).children)}for(h in e=this._data.core.node.cloneNode(!0),p="jstree-node ",r.li_attr)if(r.li_attr.hasOwnProperty(h)){if("id"===h)continue;"class"!==h?e.setAttribute(h,r.li_attr[h]):p+=r.li_attr[h]}for(r.a_attr.id||(r.a_attr.id=r.id+"_anchor"),e.setAttribute("aria-selected",!!r.state.selected),e.setAttribute("aria-level",r.parents.length),e.setAttribute("aria-labelledby",r.a_attr.id),r.state.disabled&&e.setAttribute("aria-disabled",!0),h=0,d=r.children.length;h<d;h++)if(!g[r.children[h]].state.hidden){v=!0;break}if(null!==r.parent&&g[r.parent]&&!r.state.hidden&&(h=W.inArray(r.id,g[r.parent].children),y=r.id,-1!==h))for(h++,d=g[r.parent].children.length;h<d&&(g[g[r.parent].children[h]].state.hidden||(y=g[r.parent].children[h]),y===r.id);h++);for(d in r.state.hidden&&(p+=" jstree-hidden"),r.state.loaded&&!v?p+=" jstree-leaf":(p+=r.state.opened&&r.state.loaded?" jstree-open":" jstree-closed",e.setAttribute("aria-expanded",r.state.opened&&r.state.loaded)),y===r.id&&(p+=" jstree-last"),e.id=r.id,e.className=p,p=(r.state.selected?" jstree-clicked":"")+(r.state.disabled?" jstree-disabled":""),r.a_attr)if(r.a_attr.hasOwnProperty(d)){if("href"===d&&"#"===r.a_attr[d])continue;"class"!==d?e.childNodes[1].setAttribute(d,r.a_attr[d]):p+=" "+r.a_attr[d]}if(p.length&&(e.childNodes[1].className="jstree-anchor "+p),(r.icon&&!0!==r.icon||!1===r.icon)&&(!1===r.icon?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===r.icon.indexOf("/")&&-1===r.icon.indexOf(".")?e.childNodes[1].childNodes[0].className+=" "+r.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage='url("'+r.icon+'")',e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(f.createTextNode(r.text)):e.childNodes[1].innerHTML+=r.text,t&&r.children.length&&(r.state.opened||s)&&r.state.loaded){for((u=f.createElement("UL")).setAttribute("role","group"),u.className="jstree-children",h=0,d=r.children.length;h<d;h++)u.appendChild(this.redraw_node(r.children[h],t,!0));e.appendChild(u)}if(c&&e.appendChild(c),!i){for(h=0,d=(a=a||this.element[0]).childNodes.length;h<d;h++)if(a.childNodes[h]&&a.childNodes[h].className&&-1!==a.childNodes[h].className.indexOf("jstree-children")){_=a.childNodes[h];break}_||((_=f.createElement("UL")).setAttribute("role","group"),_.className="jstree-children",a.appendChild(_)),l<(a=_).childNodes.length?a.insertBefore(e,a.childNodes[l]):a.appendChild(e),m&&(n=this.element[0].scrollTop,o=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=n,this.element[0].scrollLeft=o)}return r.state.opened&&!r.state.loaded&&(r.state.opened=!1,setTimeout(W.proxy(function(){this.open_node(r.id,!1,0)},this),0)),e},open_node:function(e,i,s){var t,n,o,r;if(W.isArray(e)){for(t=0,n=(e=e.slice()).length;t<n;t++)this.open_node(e[t],i,s);return!0}return!(!(e=this.get_node(e))||e.id===W.jstree.root)&&(s=s===$?this.settings.core.animation:s,this.is_closed(e)?this.is_loaded(e)?(o=this.get_node(e,!0),r=this,o.length&&(s&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),e.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(e),s?(this.trigger("before_open",{node:e}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(s,function(){this.style.display="",r.element&&r.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),e.state.opened=!0,i&&i.call(this,e,!0),o.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),s&&o.length||this.trigger("after_open",{node:e}),!0):this.is_loading(e)?setTimeout(W.proxy(function(){this.open_node(e,i,s)},this),500):void this.load_node(e,function(e,t){return t?this.open_node(e,i,s):!!i&&i.call(this,e,!1)}):(i&&i.call(this,e,!1),!1))},_open_to:function(e){if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;for(var t=e.parents,i=0,s=t.length;i<s;i+=1)i!==W.jstree.root&&this.open_node(t[i],!1,0);return W("#"+e.id.replace(W.jstree.idregex,"\\$&"),this.element)},close_node:function(e,t){var i,s,n,o;if(W.isArray(e)){for(i=0,s=(e=e.slice()).length;i<s;i++)this.close_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===W.jstree.root)&&!this.is_closed(e)&&(t=t===$?this.settings.core.animation:t,o=(n=this).get_node(e,!0),e.state.opened=!1,this.trigger("close_node",{node:e}),void(o.length?t?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(t,function(){this.style.display="",o.children(".jstree-children").remove(),n.element&&n.trigger("after_close",{node:e})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:e})):this.trigger("after_close",{node:e})))},toggle_node:function(e){var t,i;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.toggle_node(e[t]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(e,i,s){if(e=e||W.jstree.root,!(e=this.get_node(e)))return!1;var t,n,o,r=e.id===W.jstree.root?this.get_container_ul():this.get_node(e,!0);if(!r.length){for(t=0,n=e.children_d.length;t<n;t++)this.is_closed(this._model.data[e.children_d[t]])&&(this._model.data[e.children_d[t]].state.opened=!0);return this.trigger("open_all",{node:e})}s=s||r,(r=(o=this).is_closed(e)?r.find(".jstree-closed").addBack():r.find(".jstree-closed")).each(function(){o.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,s)},i||0)}),0===s.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(s)})},close_all:function(e,t){if(e=e||W.jstree.root,!(e=this.get_node(e)))return!1;var i,s,n=e.id===W.jstree.root?this.get_container_ul():this.get_node(e,!0),o=this;for(n.length&&(n=this.is_open(e)?n.find(".jstree-open").addBack():n.find(".jstree-open"),W(n.get().reverse()).each(function(){o.close_node(this,t||0)})),i=0,s=e.children_d.length;i<s;i++)this._model.data[e.children_d[i]].state.opened=!1;this.trigger("close_all",{node:e})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(e){var t,i;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:e})},disable_node:function(e){var t,i;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:e})},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(e,t){var i,s;if(W.isArray(e)){for(i=0,s=(e=e.slice()).length;i<s;i++)this.hide_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;e.state.hidden||(e.state.hidden=!0,this._node_changed(e.parent),t||this.redraw(),this.trigger("hide_node",{node:e}))},show_node:function(e,t){var i,s;if(W.isArray(e)){for(i=0,s=(e=e.slice()).length;i<s;i++)this.show_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;e.state.hidden&&(e.state.hidden=!1,this._node_changed(e.parent),t||this.redraw(),this.trigger("show_node",{node:e}))},hide_all:function(e){var t,i=this._model.data,s=[];for(t in i)i.hasOwnProperty(t)&&t!==W.jstree.root&&!i[t].state.hidden&&(i[t].state.hidden=!0,s.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("hide_all",{nodes:s}),s},show_all:function(e){var t,i=this._model.data,s=[];for(t in i)i.hasOwnProperty(t)&&t!==W.jstree.root&&i[t].state.hidden&&(i[t].state.hidden=!1,s.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("show_all",{nodes:s}),s},activate_node:function(e,t){if(this.is_disabled(e))return!1;if(t&&"object"==typeof t||(t={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==$?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(t.shiftKey){for(var i=this.get_node(e).id,s=this._data.core.last_clicked.id,n=this.get_node(this._data.core.last_clicked.parent).children,o=!1,r=0,a=n.length;r<a;r+=1)n[r]===i&&(o=!o),n[r]===s&&(o=!o),this.is_disabled(n[r])||!o&&n[r]!==i&&n[r]!==s?this.deselect_node(n[r],!0,t):this.is_hidden(n[r])||this.select_node(n[r],!0,!1,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):this.select_node(e,!1,!1,t);else!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.deselect_all(!0),this.select_node(e,!1,!1,t),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:t})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(e,t,i,s){var n,o,r;if(W.isArray(e)){for(o=0,r=(e=e.slice()).length;o<r;o++)this.select_node(e[o],t,i,s);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;n=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),i||(n=this._open_to(e)),n&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:s}),t||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:s}))},deselect_node:function(e,t,i){var s,n,o;if(W.isArray(e)){for(s=0,n=(e=e.slice()).length;s<n;s++)this.deselect_node(e[s],t,i);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;o=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=W.vakata.array_remove_item(this._data.core.selected,e.id),o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:i}),t||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:i}))},select_all:function(e){var t,i,s=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[W.jstree.root].children_d.concat(),t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:s})},deselect_all:function(e){for(var t=this._data.core.selected.concat([]),i=0,s=this._data.core.selected.length;i<s;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:t}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})},is_selected:function(e){return!(!(e=this.get_node(e))||e.id===W.jstree.root)&&e.state.selected},get_selected:function(e){return e?W.map(this._data.core.selected,W.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(e){for(var t,i,s=this.get_selected(!0),n={},o=0,r=s.length;o<r;o++)n[s[o].id]=s[o];for(o=0,r=s.length;o<r;o++)for(t=0,i=s[o].children_d.length;t<i;t++)n[s[o].children_d[t]]&&delete n[s[o].children_d[t]];for(o in s=[],n)n.hasOwnProperty(o)&&s.push(o);return e?W.map(s,W.proxy(function(e){return this.get_node(e)},this)):s},get_bottom_selected:function(e){for(var t=this.get_selected(!0),i=[],s=0,n=t.length;s<n;s++)t[s].children.length||i.push(t[s].id);return e?W.map(i,W.proxy(function(e){return this.get_node(e)},this)):i},get_state:function(){var e,t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&e!==W.jstree.root&&(this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected&&t.core.selected.push(e));return t},set_state:function(t,i){if(t){if(t.core){var s,e;if(t.core.open)return W.isArray(t.core.open)&&t.core.open.length?this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,i)}):(delete t.core.open,this.set_state(t,i)),!1;if(t.core.scroll)return t.core.scroll&&t.core.scroll.left!==$&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&t.core.scroll.top!==$&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,i),!1;if(t.core.selected)return(s=this).deselect_all(),W.each(t.core.selected,function(e,t){s.select_node(t,!1,!0)}),delete t.core.selected,this.set_state(t,i),!1;for(e in t)t.hasOwnProperty(e)&&"core"!==e&&-1===W.inArray(e,this.settings.plugins)&&delete t[e];if(W.isEmptyObject(t.core))return delete t.core,this.set_state(t,i),!1}return!W.isEmptyObject(t)||(t=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(e,t){this._data.core.state=!0===t?{}:this.get_state(),t&&W.isFunction(t)&&(this._data.core.state=t.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[W.jstree.root]={id:W.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(W.jstree.root,function(e,t){t&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(W.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===W.jstree.root)return!1;var i=[],e=[],s=this._data.core.selected.concat([]);e.push(t.id),!0===t.state.opened&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){e.push(this.id),i.push(this.id)}),this._load_nodes(e,W.proxy(function(e){this.open_node(i,!1,0),this.select_node(s),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(e,t){if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;var i,s,n=this._model.data,o=e.id;for(t=t.toString(),n[e.parent].children[W.inArray(e.id,n[e.parent].children)]=t,i=0,s=e.parents.length;i<s;i++)n[e.parents[i]].children_d[W.inArray(e.id,n[e.parents[i]].children_d)]=t;for(i=0,s=e.children.length;i<s;i++)n[e.children[i]].parent=t;for(i=0,s=e.children_d.length;i<s;i++)n[e.children_d[i]].parents[W.inArray(e.id,n[e.children_d[i]].parents)]=t;return-1!==(i=W.inArray(e.id,this._data.core.selected))&&(this._data.core.selected[i]=t),(i=this.get_node(e.id,!0))&&(i.attr("id",t),this.element.attr("aria-activedescendant")===e.id&&this.element.attr("aria-activedescendant",t)),delete n[e.id],e.id=t,n[e.li_attr.id=t]=e,this.trigger("set_id",{node:e,new:e.id,old:o}),!0},get_text:function(e){return!(!(e=this.get_node(e))||e.id===W.jstree.root)&&e.text},set_text:function(e,t){var i,s;if(W.isArray(e)){for(i=0,s=(e=e.slice()).length;i<s;i++)this.set_text(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===W.jstree.root||(e.text=t,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:t}),0))},get_json:function(e,t,i){if(!(e=this.get_node(e||W.jstree.root)))return!1;t&&t.flat&&!i&&(i=[]);var s,n,o={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:W.extend(!0,{},e.li_attr),a_attr:W.extend(!0,{},e.a_attr),state:{},data:(!t||!t.no_data)&&W.extend(!0,{},e.data)};if(t&&t.flat?o.parent=e.parent:o.children=[],t&&t.no_state)delete o.state;else for(s in e.state)e.state.hasOwnProperty(s)&&(o.state[s]=e.state[s]);if(t&&t.no_li_attr&&delete o.li_attr,t&&t.no_a_attr&&delete o.a_attr,t&&t.no_id&&(delete o.id,o.li_attr&&o.li_attr.id&&delete o.li_attr.id,o.a_attr&&o.a_attr.id&&delete o.a_attr.id),t&&t.flat&&e.id!==W.jstree.root&&i.push(o),!t||!t.no_children)for(s=0,n=e.children.length;s<n;s++)t&&t.flat?this.get_json(e.children[s],t,i):o.children.push(this.get_json(e.children[s],t));return t&&t.flat?i:e.id===W.jstree.root?o.children:o},create_node:function(e,t,i,s,n){if(null===e&&(e=W.jstree.root),!(e=this.get_node(e)))return!1;if(!(i=i===$?"last":i).toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,s,!0)});var o,r,a,l;switch("string"==typeof(t=t||{text:this.get_string("New node")})&&(t={text:t}),t.text===$&&(t.text=this.get_string("New node")),e.id===W.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":o=this.get_node(e.parent),i=W.inArray(e.id,o.children),e=o;break;case"after":o=this.get_node(e.parent),i=W.inArray(e.id,o.children)+1,e=o;break;case"inside":case"first":i=0;break;case"last":i=e.children.length;break;default:i=i||0}if(i>e.children.length&&(i=e.children.length),t.id||(t.id=!0),!this.check("create_node",t,e,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===t.id&&delete t.id,!(t=this._parse_model_from_json(t,e.id,e.parents.concat())))return!1;for(o=this.get_node(t),(r=[]).push(t),r=r.concat(o.children_d),this.trigger("model",{nodes:r,parent:e.id}),e.children_d=e.children_d.concat(r),a=0,l=e.parents.length;a<l;a++)this._model.data[e.parents[a]].children_d=this._model.data[e.parents[a]].children_d.concat(r);for(t=o,o=[],a=0,l=e.children.length;a<l;a++)o[i<=a?a+1:a]=e.children[a];return o[i]=t.id,e.children=o,this.redraw_node(e,!0),s&&s.call(this,this.get_node(t)),this.trigger("create_node",{node:this.get_node(t),parent:e.id,position:i}),t.id},rename_node:function(e,t){var i,s,n;if(W.isArray(e)){for(i=0,s=(e=e.slice()).length;i<s;i++)this.rename_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===W.jstree.root||(n=e.text,this.check("rename_node",e,this.get_parent(e),t)?(this.set_text(e,t),this.trigger("rename_node",{node:e,text:t,old:n}),0):(this.settings.core.error.call(this,this._data.core.last_error),1)))},delete_node:function(e){var t,i,s,n,o,r,a,l,c,h,d;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.delete_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;if(s=this.get_node(e.parent),d=W.inArray(e.id,s.children),c=!1,!this.check("delete_node",e,s,d))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==d&&(s.children=W.vakata.array_remove(s.children,d)),(n=e.children_d.concat([])).push(e.id),o=0,r=e.parents.length;o<r;o++)this._model.data[e.parents[o]].children_d=W.vakata.array_filter(this._model.data[e.parents[o]].children_d,function(e){return-1===W.inArray(e,n)});for(a=0,l=n.length;a<l;a++)if(this._model.data[n[a]].state.selected){c=!0;break}for(c&&(this._data.core.selected=W.vakata.array_filter(this._data.core.selected,function(e){return-1===W.inArray(e,n)})),this.trigger("delete_node",{node:e,parent:s.id}),c&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:s.id}),a=0,l=n.length;a<l;a++)delete this._model.data[n[a]];return-1!==W.inArray(this._data.core.focused,n)&&(this._data.core.focused=null,h=this.element[0].scrollTop,d=this.element[0].scrollLeft,s.id===W.jstree.root?this._model.data[W.jstree.root].children[0]&&this.get_node(this._model.data[W.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(s,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=h,this.element[0].scrollLeft=d),this.redraw_node(s,!0),!0},check:function(e,t,i,s,n){t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var o=e.match(/^move_node|copy_node|create_node$/i)?i:t,r=this.settings.core.check_callback;return"move_node"!==e&&"copy_node"!==e||n&&n.is_multi||t.id!==i.id&&("move_node"!==e||W.inArray(t.id,i.children)!==s)&&-1===W.inArray(i.id,t.children_d)?(o&&o.data&&(o=o.data),o&&o.functions&&(!1===o.functions[e]||!0===o.functions[e])?(!1===o.functions[e]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),o.functions[e]):!(!1===r||W.isFunction(r)&&!1===r.call(this,e,t,i,s,n)||r&&!1===r[e])||!(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})):!(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})},last_error:function(){return this._data.core.last_error},move_node:function(e,t,i,s,n,o,r){var a,l,c,h,d,u,p,f,g,m,_,v,y,w;if(t=this.get_node(t),i=i===$?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(t))return this.load_node(t,function(){this.move_node(e,t,i,s,!0,!1,r)});if(W.isArray(e)){if(1!==e.length){for(a=0,l=e.length;a<l;a++)(g=this.move_node(e[a],t,i,s,n,!1,r))&&(t=g,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id?e:this.get_node(e))||e.id===W.jstree.root)return!1;if(c=(e.parent||W.jstree.root).toString(),d=i.toString().match(/^(before|after)$/)&&t.id!==W.jstree.root?this.get_node(t.parent):t,p=!(u=r||(this._model.data[e.id]?this:W.jstree.reference(e.id)))||!u._id||this._id!==u._id,h=u&&u._id&&c&&u._model.data[c]&&u._model.data[c].children?W.inArray(e.id,u._model.data[c].children):-1,u&&u._id&&(e=u._model.data[e.id]),p)return!!(g=this.copy_node(e,t,i,s,n,!1,r))&&(u&&u.delete_node(e),g);switch(t.id===W.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=W.inArray(t.id,d.children);break;case"after":i=W.inArray(t.id,d.children)+1;break;case"inside":case"first":i=0;break;case"last":i=d.children.length;break;default:i=i||0}if(i>d.children.length&&(i=d.children.length),!this.check("move_node",e,d,i,{core:!0,origin:r,is_multi:u&&u._id&&u._id!==this._id,is_foreign:!u||!u._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(e.parent===d.id){for(f=d.children.concat(),-1!==(g=W.inArray(e.id,f))&&(f=W.vakata.array_remove(f,g),g<i&&i--),g=[],m=0,_=f.length;m<_;m++)g[i<=m?m+1:m]=f[m];g[i]=e.id,d.children=g,this._node_changed(d.id),this.redraw(d.id===W.jstree.root)}else{for((g=e.children_d.concat()).push(e.id),m=0,_=e.parents.length;m<_;m++){for(f=[],v=0,y=(w=u._model.data[e.parents[m]].children_d).length;v<y;v++)-1===W.inArray(w[v],g)&&f.push(w[v]);u._model.data[e.parents[m]].children_d=f}for(u._model.data[c].children=W.vakata.array_remove_item(u._model.data[c].children,e.id),m=0,_=d.parents.length;m<_;m++)this._model.data[d.parents[m]].children_d=this._model.data[d.parents[m]].children_d.concat(g);for(f=[],m=0,_=d.children.length;m<_;m++)f[i<=m?m+1:m]=d.children[m];for(f[i]=e.id,d.children=f,d.children_d.push(e.id),d.children_d=d.children_d.concat(e.children_d),e.parent=d.id,(g=d.parents.concat()).unshift(d.id),w=e.parents.length,g=(e.parents=g).concat(),m=0,_=e.children_d.length;m<_;m++)this._model.data[e.children_d[m]].parents=this._model.data[e.children_d[m]].parents.slice(0,-1*w),Array.prototype.push.apply(this._model.data[e.children_d[m]].parents,g);c!==W.jstree.root&&d.id!==W.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(d.id)),o||this.redraw()}return s&&s.call(this,e,d,i),this.trigger("move_node",{node:e,parent:d.id,position:i,old_parent:c,old_position:h,is_multi:u&&u._id&&u._id!==this._id,is_foreign:!u||!u._id,old_instance:u,new_instance:this}),e.id},copy_node:function(e,t,i,s,n,o,r){var a,l,c,h,d,u,p,f,g,m;if(t=this.get_node(t),i=i===$?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(t))return this.load_node(t,function(){this.copy_node(e,t,i,s,!0,!1,r)});if(W.isArray(e)){if(1!==e.length){for(a=0,l=e.length;a<l;a++)(h=this.copy_node(e[a],t,i,s,n,!0,r))&&(t=h,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id?e:this.get_node(e))||e.id===W.jstree.root)return!1;switch(f=(e.parent||W.jstree.root).toString(),g=i.toString().match(/^(before|after)$/)&&t.id!==W.jstree.root?this.get_node(t.parent):t,(m=r||(this._model.data[e.id]?this:W.jstree.reference(e.id)))&&m._id&&(this._id,m._id),m&&m._id&&(e=m._model.data[e.id]),t.id===W.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=W.inArray(t.id,g.children);break;case"after":i=W.inArray(t.id,g.children)+1;break;case"inside":case"first":i=0;break;case"last":i=g.children.length;break;default:i=i||0}if(i>g.children.length&&(i=g.children.length),!this.check("copy_node",e,g,i,{core:!0,origin:r,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(p=m?m.get_json(e,{no_id:!0,no_data:!0,no_state:!0}):e))return!1;if(!0===p.id&&delete p.id,!(p=this._parse_model_from_json(p,g.id,g.parents.concat())))return!1;for(h=this.get_node(p),e&&e.state&&!1===e.state.loaded&&(h.state.loaded=!1),(c=[]).push(p),c=c.concat(h.children_d),this.trigger("model",{nodes:c,parent:g.id}),d=0,u=g.parents.length;d<u;d++)this._model.data[g.parents[d]].children_d=this._model.data[g.parents[d]].children_d.concat(c);for(c=[],d=0,u=g.children.length;d<u;d++)c[i<=d?d+1:d]=g.children[d];return c[i]=h.id,g.children=c,g.children_d.push(h.id),g.children_d=g.children_d.concat(h.children_d),g.id===W.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(g.id),o||this.redraw(g.id===W.jstree.root),s&&s.call(this,h,g,i),this.trigger("copy_node",{node:h,original:e,parent:g.id,position:i,old_parent:f,old_position:m&&m._id&&f&&m._model.data[f]&&m._model.data[f].children?W.inArray(e.id,m._model.data[f].children):-1,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id,old_instance:m,new_instance:this}),h.id},cut:function(e){if(e=e||this._data.core.selected.concat(),W.isArray(e)||(e=[e]),!e.length)return!1;for(var t,i=[],s=0,n=e.length;s<n;s++)(t=this.get_node(e[s]))&&t.id&&t.id!==W.jstree.root&&i.push(t);if(!i.length)return!1;o=i,r="move_node",(a=this).trigger("cut",{node:e})},copy:function(e){if(e=e||this._data.core.selected.concat(),W.isArray(e)||(e=[e]),!e.length)return!1;for(var t,i=[],s=0,n=e.length;s<n;s++)(t=this.get_node(e[s]))&&t.id&&t.id!==W.jstree.root&&i.push(t);if(!i.length)return!1;o=i,r="copy_node",(a=this).trigger("copy",{node:e})},get_buffer:function(){return{mode:r,node:o,inst:a}},can_paste:function(){return!1!==r&&!1!==o},paste:function(e,t){if(!((e=this.get_node(e))&&r&&r.match(/^(copy_node|move_node)$/)&&o))return!1;this[r](o,e,t,!1,!1,!1,a)&&this.trigger("paste",{parent:e.id,node:o,mode:r}),a=r=o=!1},clear_buffer:function(){a=r=o=!1,this.trigger("clear_buffer")},edit:function(i,e,s){var t,n,o,r,a,l,c,h,d=!1;return!!(i=this.get_node(i))&&(!1===this.settings.core.check_callback?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(h=i,e="string"==typeof e?e:i.text,this.set_text(i,""),i=this._open_to(i),h.text=e,c=this._data.core.rtl,t=this.element.width(),this._data.core.focused=h.id,n=i.children(".jstree-anchor").focus(),o=W("<span>"),r=e,a=W("<div />",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=W("<input />",{value:r,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:W.proxy(function(e){e.stopImmediatePropagation(),e.preventDefault();var t=o.children(".jstree-rename-input").val(),e=this.settings.core.force_text;""===t&&(t=r),a.remove(),o.replaceWith(n),o.remove(),r=e?r:W("<div></div>").append(W.parseHTML(r)).html(),this.set_text(i,r),(t=!!this.rename_node(i,e?W("<div></div>").text(t).text():W("<div></div>").append(W.parseHTML(t)).html()))||this.set_text(i,r),this._data.core.focused=h.id,setTimeout(W.proxy(function(){var e=this.get_node(h.id,!0);e.length&&(this._data.core.focused=h.id,e.children(".jstree-anchor").focus())},this),0),s&&s.call(this,h,t,d),l=null},this),keydown:function(e){var t=e.which;27===t&&(d=!0,this.value=r),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){l.width(Math.min(a.text("pW"+this.value).width(),t))},keypress:function(e){if(13===e.which)return!1}}),c={fontFamily:n.css("fontFamily")||"",fontSize:n.css("fontSize")||"",fontWeight:n.css("fontWeight")||"",fontStyle:n.css("fontStyle")||"",fontStretch:n.css("fontStretch")||"",fontVariant:n.css("fontVariant")||"",letterSpacing:n.css("letterSpacing")||"",wordSpacing:n.css("wordSpacing")||""},o.attr("class",n.attr("class")).append(n.contents().clone()).append(l),n.replaceWith(o),a.css(c),l.css(c).width(Math.min(a.text("pW"+l[0].value).width(),t))[0].select(),void W(w).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){l&&e.target!==l&&W(l).blur()})))},set_theme:function(e,t){if(!e)return!1;!0===t&&(t=(this.settings.core.themes.dir||W.jstree.path+"/themes")+"/"+e+"/style.css"),t&&-1===W.inArray(t,i)&&(W("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />'),i.push(t)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),(this._data.core.themes.variant=e)&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(e,t){var i,s,n,o;if(W.isArray(e)){for(i=0,s=(e=e.slice()).length;i<s;i++)this.set_icon(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===W.jstree.root||(o=e.icon,e.icon=!0===t||null===t||t===$||""===t||t,n=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===t?this.hide_icon(e):(!0===t||null===t||t===$||""===t?n.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"):-1===t.indexOf("/")&&-1===t.indexOf(".")?(n.removeClass(o).css("background",""),n.addClass(t+" jstree-themeicon-custom").attr("rel",t)):(n.removeClass(o).css("background",""),n.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat").attr("rel",t)),!1===o&&this.show_icon(e)),0))},get_icon:function(e){return!(!(e=this.get_node(e))||e.id===W.jstree.root)&&e.icon},hide_icon:function(e){var t,i;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.hide_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===W.jstree.root||(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),0))},show_icon:function(e){var t,i,s;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.show_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===W.jstree.root||(s=this.get_node(e,!0),e.icon=!s.length||s.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),s.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),0))}},W.vakata={},W.vakata.attributes=function(e,i){e=W(e)[0];var s=i?{}:[];return e&&e.attributes&&W.each(e.attributes,function(e,t){-1===W.inArray(t.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==t.value&&""!==W.trim(t.value)&&(i?s[t.name]=t.value:s.push(t.name))}),s},W.vakata.array_unique=function(e){for(var t=[],i={},s=0,n=e.length;s<n;s++)i[e[s]]===$&&(t.push(e[s]),i[e[s]]=!0);return t},W.vakata.array_remove=function(e,t){return e.splice(t,1),e},W.vakata.array_remove_item=function(e,t){t=W.inArray(t,e);return-1!==t?W.vakata.array_remove(e,t):e},W.vakata.array_filter=function(e,t,i,s,n){if(e.filter)return e.filter(t,i);for(n in s=[],e)~~n+""==n+""&&0<=n&&t.call(i,e[n],+n,e)&&s.push(e[n]);return s},W.jstree.plugins.changed=function(e,o){var r=[];this.trigger=function(e,t){if(t=t||{},"changed"===e.replace(".jstree","")){t.changed={selected:[],deselected:[]};for(var i={},s=0,n=r.length;s<n;s++)i[r[s]]=1;for(s=0,n=t.selected.length;s<n;s++)i[t.selected[s]]?i[t.selected[s]]=2:t.changed.selected.push(t.selected[s]);for(s=0,n=r.length;s<n;s++)1===i[r[s]]&&t.changed.deselected.push(r[s]);r=t.selected.slice()}o.trigger.call(this,e,t)},this.refresh=function(e,t){return r=[],o.refresh.apply(this,arguments)}};var l,c,h=w.createElement("I");h.className="jstree-icon jstree-checkbox",h.setAttribute("role","presentation"),W.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},W.jstree.plugins.checkbox=function(e,l){this.bind=function(){l.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",W.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",W.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",W.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(W.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",W.proxy(function(e,t){for(var i=this._model.data,s=(i[t.parent],t.nodes),n=0,o=s.length;n<o;n++)i[s[n]].state.checked=i[s[n]].state.checked||i[s[n]].original&&i[s[n]].original.state&&i[s[n]].original.state.checked,i[s[n]].state.checked&&this._data.checkbox.selected.push(s[n])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",W.proxy(function(e,t){var i,s,n,o,r,a,l=this._model.data,c=l[t.parent],h=t.nodes,d=[],t=this.settings.checkbox.cascade,u=this.settings.checkbox.tie_selection;if(-1!==t.indexOf("down"))if(c.state[u?"selected":"checked"]){for(s=0,n=h.length;s<n;s++)l[h[s]].state[u?"selected":"checked"]=!0;this._data[u?"core":"checkbox"].selected=this._data[u?"core":"checkbox"].selected.concat(h)}else for(s=0,n=h.length;s<n;s++)if(l[h[s]].state[u?"selected":"checked"]){for(o=0,r=l[h[s]].children_d.length;o<r;o++)l[l[h[s]].children_d[o]].state[u?"selected":"checked"]=!0;this._data[u?"core":"checkbox"].selected=this._data[u?"core":"checkbox"].selected.concat(l[h[s]].children_d)}if(-1!==t.indexOf("up")){for(s=0,n=c.children_d.length;s<n;s++)l[c.children_d[s]].children.length||d.push(l[c.children_d[s]].parent);for(o=0,r=(d=W.vakata.array_unique(d)).length;o<r;o++)for(c=l[d[o]];c&&c.id!==W.jstree.root;){for(s=i=0,n=c.children.length;s<n;s++)i+=l[c.children[s]].state[u?"selected":"checked"];if(i!==n)break;c.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(c.id),(a=this.get_node(c,!0))&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[u?"core":"checkbox"].selected=W.vakata.array_unique(this._data[u?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",W.proxy(function(e,t){for(var i,s,n=t.node,o=this._model.data,r=this.get_node(n.parent),a=this.get_node(n,!0),t=this.settings.checkbox.cascade,l=this.settings.checkbox.tie_selection,c={},h=this._data[l?"core":"checkbox"].selected,d=0,u=h.length;d<u;d++)c[h[d]]=!0;if(-1!==t.indexOf("down"))for(d=0,u=n.children_d.length;d<u;d++)c[n.children_d[d]]=!0,(s=o[n.children_d[d]]).state[l?"selected":"checked"]=!0,s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1);if(-1!==t.indexOf("up"))for(;r&&r.id!==W.jstree.root;){for(d=i=0,u=r.children.length;d<u;d++)i+=o[r.children[d]].state[l?"selected":"checked"];if(i!==u)break;r.state[l?"selected":"checked"]=!0,c[r.id]=!0,(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}for(d in h=[],c)c.hasOwnProperty(d)&&h.push(d);this._data[l?"core":"checkbox"].selected=h,-1!==t.indexOf("down")&&a.length&&a.find(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",W.proxy(function(e,t){for(var i,s=this.get_node(W.jstree.root),n=this._model.data,o=0,r=s.children_d.length;o<r;o++)(i=n[s.children_d[o]])&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",W.proxy(function(e,t){var i,s,n,o=t.node,t=this.get_node(o,!0),r=this.settings.checkbox.cascade,a=this.settings.checkbox.tie_selection,l=this._data[a?"core":"checkbox"].selected,c={};if(o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),-1!==r.indexOf("down"))for(i=0,s=o.children_d.length;i<s;i++)(n=this._model.data[o.children_d[i]]).state[a?"selected":"checked"]=!1,n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1);if(-1!==r.indexOf("up"))for(i=0,s=o.parents.length;i<s;i++)(n=this._model.data[o.parents[i]]).state[a?"selected":"checked"]=!1,n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1),(n=this.get_node(o.parents[i],!0))&&n.length&&n.attr("aria-selected",!1).children(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked");for(c={},i=0,s=l.length;i<s;i++)-1!==r.indexOf("down")&&-1!==W.inArray(l[i],o.children_d)||-1!==r.indexOf("up")&&-1!==W.inArray(l[i],o.parents)||(c[l[i]]=!0);for(i in l=[],c)c.hasOwnProperty(i)&&l.push(i);this._data[a?"core":"checkbox"].selected=l,-1!==r.indexOf("down")&&t.length&&t.find(".jstree-anchor").removeClass(a?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",W.proxy(function(e,t){for(var i,s,n,o,r=this.get_node(t.parent),a=this._model.data,l=this.settings.checkbox.tie_selection;r&&r.id!==W.jstree.root&&!r.state[l?"selected":"checked"];){for(i=n=0,s=r.children.length;i<s;i++)n+=a[r.children[i]].state[l?"selected":"checked"];if(!(0<s&&n===s))break;r.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(r.id),(o=this.get_node(r,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}},this)).on("move_node.jstree",W.proxy(function(e,t){var i,s,n,o,r,a=t.is_multi,l=t.old_parent,t=this.get_node(t.parent),c=this._model.data,h=this.settings.checkbox.tie_selection;if(!a)for(i=this.get_node(l);i&&i.id!==W.jstree.root&&!i.state[h?"selected":"checked"];){for(n=s=0,o=i.children.length;n<o;n++)s+=c[i.children[n]].state[h?"selected":"checked"];if(!(0<o&&s===o))break;i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(r=this.get_node(i,!0))&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=t;i&&i.id!==W.jstree.root;){for(n=s=0,o=i.children.length;n<o;n++)s+=c[i.children[n]].state[h?"selected":"checked"];if(s===o)i.state[h?"selected":"checked"]||(i.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(i.id),(r=this.get_node(i,!0))&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"));else{if(!i.state[h?"selected":"checked"])break;i.state[h?"selected":"checked"]=!1,this._data[h?"core":"checkbox"].selected=W.vakata.array_remove_item(this._data[h?"core":"checkbox"].selected,i.id),(r=this.get_node(i,!0))&&r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass(h?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}},this))},this._undetermined=function(){if(null!==this.element){for(var i,s,n={},o=this._model.data,e=this.settings.checkbox.tie_selection,t=this._data[e?"core":"checkbox"].selected,r=[],a=this,l=0,c=t.length;l<c;l++)if(o[t[l]]&&o[t[l]].parents)for(i=0,s=o[t[l]].parents.length;i<s&&n[o[t[l]].parents[i]]===$;i++)o[t[l]].parents[i]!==W.jstree.root&&(n[o[t[l]].parents[i]]=!0,r.push(o[t[l]].parents[i]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e,t=a.get_node(this);if(t.state.loaded){for(l=0,c=t.children_d.length;l<c;l++)if(!(e=o[t.children_d[l]]).state.loaded&&e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined)for(n[e.id]===$&&e.id!==W.jstree.root&&(n[e.id]=!0,r.push(e.id)),i=0,s=e.parents.length;i<s;i++)n[e.parents[i]]===$&&e.parents[i]!==W.jstree.root&&(n[e.parents[i]]=!0,r.push(e.parents[i]))}else if(t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined)for(n[t.id]===$&&t.id!==W.jstree.root&&(n[t.id]=!0,r.push(t.id)),i=0,s=t.parents.length;i<s;i++)n[t.parents[i]]===$&&t.parents[i]!==W.jstree.root&&(n[t.parents[i]]=!0,r.push(t.parents[i]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),l=0,c=r.length;l<c;l++)o[r[l]].state[e?"selected":"checked"]||(t=this.get_node(r[l],!0))&&t.length&&t.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(e,t,i,s){if(e=l.redraw_node.apply(this,arguments)){for(var n=null,o=null,r=0,a=e.childNodes.length;r<a;r++)if(e.childNodes[r]&&e.childNodes[r].className&&-1!==e.childNodes[r].className.indexOf("jstree-anchor")){n=e.childNodes[r];break}n&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(n.className+=" jstree-checked"),o=h.cloneNode(!1),this._model.data[e.id].state.checkbox_disabled&&(o.className+=" jstree-checkbox-disabled"),n.insertBefore(o,n.childNodes[0]))}return i||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(W.proxy(this._undetermined,this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var t,i,s=this.settings.checkbox.cascade,n=this.settings.checkbox.tie_selection,o=this._data[n?"core":"checkbox"].selected,r=this._model.data;if(!e||!0===e.state[n?"selected":"checked"]||-1===s.indexOf("undetermined")||-1===s.indexOf("down")&&-1===s.indexOf("up"))return!1;if(!e.state.loaded&&!0===e.original.state.undetermined)return!0;for(t=0,i=e.children_d.length;t<i;t++)if(-1!==W.inArray(e.children_d[t],o)||!r[e.children_d[t]].state.loaded&&r[e.children_d[t]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(e){var t,i,s;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;s=this.get_node(e,!0),e.state.checkbox_disabled||(e.state.checkbox_disabled=!0,s&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:e}))},this.enable_checkbox=function(e){var t,i,s;if(W.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;s=this.get_node(e,!0),e.state.checkbox_disabled&&(e.state.checkbox_disabled=!1,s&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:e}))},this.activate_node=function(e,t){return!W(t.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||W(t.target).hasClass("jstree-checkbox"))&&(t.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!W(t.target).hasClass("jstree-checkbox")?l.activate_node.call(this,e,t):!this.is_disabled(e)&&(this.is_checked(e)?this.uncheck_node(e,t):this.check_node(e,t),void this.trigger("activate_node",{node:this.get_node(e)})))},this.check_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,t);var i,s,n;if(W.isArray(e)){for(s=0,n=(e=e.slice()).length;s<n;s++)this.check_node(e[s],t);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;i=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.uncheck_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,t);var i,s,n;if(W.isArray(e)){for(i=0,s=(e=e.slice()).length;i<s;i++)this.uncheck_node(e[i],t);return!0}if(!(e=this.get_node(e))||e.id===W.jstree.root)return!1;n=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=W.vakata.array_remove_item(this._data.checkbox.selected,e.id),n.length&&n.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e,t;for(this._data.checkbox.selected.concat([]),this._data.checkbox.selected=this._model.data[W.jstree.root].children_d.concat(),e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();for(var e=this._data.checkbox.selected.concat([]),t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||e.id===W.jstree.root)&&e.state.checked},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?W.map(this._data.checkbox.selected,W.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);for(var t,i,s=this.get_checked(!0),n={},o=0,r=s.length;o<r;o++)n[s[o].id]=s[o];for(o=0,r=s.length;o<r;o++)for(t=0,i=s[o].children_d.length;t<i;t++)n[s[o].children_d[t]]&&delete n[s[o].children_d[t]];for(o in s=[],n)n.hasOwnProperty(o)&&s.push(o);return e?W.map(s,W.proxy(function(e){return this.get_node(e)},this)):s},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);for(var t=this.get_checked(!0),i=[],s=0,n=t.length;s<n;s++)t[s].children.length||i.push(t[s].id);return e?W.map(i,W.proxy(function(e){return this.get_node(e)},this)):i},this.load_node=function(e,t){var i,s,n;if(!W.isArray(e)&&!this.settings.checkbox.tie_selection&&(n=this.get_node(e))&&n.state.loaded)for(i=0,s=n.children_d.length;i<s;i++)this._model.data[n.children_d[i]].state.checked&&(this._data.checkbox.selected=W.vakata.array_remove_item(this._data.checkbox.selected,n.children_d[i]));return l.load_node.apply(this,arguments)},this.get_state=function(){var e=l.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection||(e.checkbox=this._data.checkbox.selected.slice()),e},this.set_state=function(e,t){var i,s=l.set_state.apply(this,arguments);return s&&e.checkbox?(this.settings.checkbox.tie_selection||(this.uncheck_all(),i=this,W.each(e.checkbox,function(e,t){i.check_node(t)})),delete e.checkbox,this.set_state(e,t),!1):s},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),l.refresh.apply(this,arguments)}},W.jstree.defaults.conditionalselect=function(){return!0},W.jstree.plugins.conditionalselect=function(e,i){this.activate_node=function(e,t){this.settings.conditionalselect.call(this,this.get_node(e),t)&&i.activate_node.call(this,e,t)}},W.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(e,t){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var t=W.jstree.reference(e.reference),e=t.get_node(e.reference);t.create_node(e,{},"last",function(e){setTimeout(function(){t.edit(e)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var t=W.jstree.reference(e.reference),e=t.get_node(e.reference);t.edit(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var t=W.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.delete_node(t.get_selected()):t.delete_node(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var t=W.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.cut(t.get_top_selected()):t.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var t=W.jstree.reference(e.reference),e=t.get_node(e.reference);t.is_selected(e)?t.copy(t.get_top_selected()):t.copy(e)}},paste:{separator_before:!1,icon:!1,_disabled:function(e){return!W.jstree.reference(e.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var t=W.jstree.reference(e.reference),e=t.get_node(e.reference);t.paste(e)}}}}}}},W.jstree.plugins.contextmenu=function(e,o){this.bind=function(){o.bind.call(this);var t,i,s=0,n=null;this.element.on("contextmenu.jstree",".jstree-anchor",W.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),s=e.ctrlKey?+new Date:0,(t||n)&&(s=+new Date+1e4),n&&clearTimeout(n),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",W.proxy(function(e){this._data.contextmenu.visible&&(!s||250<+new Date-s)&&W.vakata.context.hide(),s=0},this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].clientX,i=e.originalEvent.changedTouches[0].clientY,n=setTimeout(function(){W(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){n&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(50<Math.abs(t-e.originalEvent.changedTouches[0].clientX)||50<Math.abs(i-e.originalEvent.changedTouches[0].clientY))&&clearTimeout(n)}).on("touchend.vakata.jstree",function(e){n&&clearTimeout(n)}),W(w).on("context_hide.vakata.jstree",W.proxy(function(e,t){this._data.contextmenu.visible=!1,W(t.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&W.vakata.context.hide(),o.teardown.call(this)},this.show_contextmenu=function(t,i,s,e){if(!(t=this.get_node(t))||t.id===W.jstree.root)return!1;var n,o=this.settings.contextmenu,r=this.get_node(t,!0).children(".jstree-anchor"),a=!1;!o.show_at_node&&i!==$&&s!==$||(n=r.offset(),i=n.left,s=n.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(t)&&this.activate_node(t,e),a=o.items,W.isFunction(a)&&(a=a.call(this,t,W.proxy(function(e){this._show_contextmenu(t,i,s,e)},this))),W.isPlainObject(a)&&this._show_contextmenu(t,i,s,a)},this._show_contextmenu=function(e,t,i,s){var n=this.get_node(e,!0).children(".jstree-anchor");W(w).one("context_show.vakata.jstree",W.proxy(function(e,t){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";W(t.element).addClass(i),n.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,W.vakata.context.show(n,{x:t,y:i},s),this.trigger("show_contextmenu",{node:e,x:t,y:i})}},_={element:m=!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(g=W).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){g(w).triggerHandler("context_"+e+".vakata",{reference:_.reference,element:_.element,position:{x:_.position_x,y:_.position_y}})},_execute:function(e){return!(!(e=_.items[e])||e._disabled&&(!g.isFunction(e._disabled)||e._disabled({item:e,reference:_.reference,element:_.element}))||!e.action)&&e.action.call(null,{item:e,reference:_.reference,element:_.element,position:{x:_.position_x,y:_.position_y}})},_parse:function(e,t){if(!e)return!1;t||(_.html="",_.items=[]);var i,s="",n=!1;return t&&(s+="<ul>"),g.each(e,function(e,t){return!t||(_.items.push(t),!n&&t.separator_before&&(s+="<li class='vakata-context-separator'><a href='#' "+(g.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),n=!1,s+="<li class='"+(t._class||"")+(!0===t._disabled||g.isFunction(t._disabled)&&t._disabled({item:t,reference:_.reference,element:_.element})?" vakata-contextmenu-disabled ":"")+"' "+(t.shortcut?" data-shortcut='"+t.shortcut+"' ":"")+">",s+="<a href='#' rel='"+(_.items.length-1)+"' "+(t.title?"title='"+t.title+"'":"")+">",g.vakata.context.settings.icons&&(s+="<i ",t.icon&&(-1!==t.icon.indexOf("/")||-1!==t.icon.indexOf(".")?s+=" style='background:url(\""+t.icon+"\") center center no-repeat' ":s+=" class='"+t.icon+"' "),s+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),s+=(g.isFunction(t.label)?t.label({item:e,reference:_.reference,element:_.element}):t.label)+(t.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+t.shortcut+'">'+(t.shortcut_label||"")+"</span>":"")+"</a>",t.submenu&&(i=g.vakata.context._parse(t.submenu,!0))&&(s+=i),s+="</li>",void(t.separator_after&&(s+="<li class='vakata-context-separator'><a href='#' "+(g.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",n=!0)))}),s=s.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),t&&(s+="</ul>"),t||(_.html=s,g.vakata.context._trigger("parse")),10<s.length&&s},_show_submenu:function(e){var t,i,s,n,o,r,a,l;(e=g(e)).length&&e.children("ul").length&&(t=e.children("ul"),s=(i=e.offset().left)+e.outerWidth(),n=e.offset().top,o=t.width(),r=t.height(),a=g(window).width()+g(window).scrollLeft(),l=g(window).height()+g(window).scrollTop(),m?e[s-(o+10+e.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):e[a<s+o&&a-s<i?"addClass":"removeClass"]("vakata-context-right"),l<n+r+10&&t.css("bottom","-1px"),e.hasClass("vakata-context-right")?i<o&&t.css("margin-right",i-o):a-s<o&&t.css("margin-left",a-s-o),t.show())},show:function(e,t,i){var s,n,o,r,a,l,c;switch(_.element&&_.element.length&&_.element.width(""),!0){case!t&&!e:return!1;case!!t&&!!e:_.reference=e,_.position_x=t.x,_.position_y=t.y;break;case!t&&!!e:s=(_.reference=e).offset(),_.position_x=s.left+e.outerHeight(),_.position_y=s.top;break;case!!t&&!e:_.position_x=t.x,_.position_y=t.y}e&&!i&&g(e).data("vakata_contextmenu")&&(i=g(e).data("vakata_contextmenu")),g.vakata.context._parse(i)&&_.element.html(_.html),_.items.length&&(_.element.appendTo("body"),n=_.element,o=_.position_x,r=_.position_y,a=n.width(),l=n.height(),c=g(window).width()+g(window).scrollLeft(),i=g(window).height()+g(window).scrollTop(),m&&(o-=n.outerWidth()-g(e).outerWidth())<g(window).scrollLeft()+20&&(o=g(window).scrollLeft()+20),c<o+a+20&&(o=c-(a+20)),i<r+l+20&&(r=i-(l+20)),_.element.css({left:o,top:r}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),_.is_visible=!0,g.vakata.context._trigger("show"))},hide:function(){_.is_visible&&(_.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),_.is_visible=!1,g.vakata.context._trigger("hide"))}},g(function(){m="rtl"===g("body").css("direction");var t=!1;_.element=g("<ul class='vakata-context'></ul>"),_.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),g.contains(this,e.relatedTarget)||(t&&clearTimeout(t),_.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),g(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),g.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){g.contains(this,e.relatedTarget)||g(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){g(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),g.vakata.context.settings.hide_onmouseleave&&(t=setTimeout(function(){g.vakata.context.hide()},g.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),g(this).blur().parent().hasClass("vakata-context-disabled")||!1===g.vakata.context._execute(g(this).attr("rel"))||g.vakata.context.hide()}).on("keydown","a",function(e){var t=null;switch(e.which){case 13:case 32:e.type="click",e.preventDefault(),g(e.currentTarget).trigger(e);break;case 37:_.is_visible&&(_.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 38:_.is_visible&&((t=_.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(t=_.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),t.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 39:_.is_visible&&(_.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 40:_.is_visible&&((t=_.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(t=_.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),t.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 27:g.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault();e=_.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();e.parent().not(".vakata-context-disabled")&&e.click()}),g(w).on("mousedown.vakata.jstree",function(e){_.is_visible&&!g.contains(_.element[0],e.target)&&g.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,t){_.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),m&&_.element.addClass("vakata-context-rtl").css("direction","rtl"),_.element.find("ul").hide().end()})}),W.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1},W.jstree.plugins.dnd=function(e,a){this.init=function(e,t){a.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in w.createElement("span")},this.bind=function(){a.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",W.proxy(function(e){if(this.settings.dnd.large_drag_target&&W(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!W(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var t=this.get_node(e.target),i=this.is_selected(t)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,s=1<i?i+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(s=W.vakata.html.escape(s)),t&&t.id&&t.id!==W.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(!0===this.settings.dnd.is_draggable||W.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,1<i?this.get_top_selected(!0):[t],e))){if(l={jstree:!0,origin:this,obj:this.get_node(t,!0),nodes:1<i?this.get_top_selected():[t.id]},c=e.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),W.vakata.dnd.start(e,l,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+s+'<ins class="jstree-copy" style="display:none;">+</ins></div>');W.vakata.dnd._trigger("start",e,{helper:W(),element:c,data:l})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),W.vakata.dnd._trigger("move",e,{helper:W(),element:c,data:l}),!1}).on("drop.jstree",W.proxy(function(e){return e.preventDefault(),W.vakata.dnd._trigger("stop",e,{helper:W(),element:c,data:l}),!1},this))},this.redraw_node=function(e,t,i,s){if((e=a.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{for(var n=null,o=0,r=e.childNodes.length;o<r;o++)if(e.childNodes[o]&&e.childNodes[o].className&&-1!==e.childNodes[o].className.indexOf("jstree-anchor")){n=e.childNodes[o];break}n&&n.setAttribute("draggable",!0)}return e}},W(function(){var j=!1,C=!1,T=!1,z=!1,S=W('<div id="jstree-marker">&#160;</div>').hide();W(w).on("dnd_start.vakata.jstree",function(e,t){T=j=!1,t&&t.data&&t.data.jstree&&S.appendTo("body")}).on("dnd_move.vakata.jstree",function(e,n){if(z&&(n.event&&"dragover"===n.event.type&&n.event.target===T.target||clearTimeout(z)),n&&n.data&&n.data.jstree&&(!n.event.target.id||"jstree-marker"!==n.event.target.id)){T=n.event;var o,r,a,l,c,h,d,u,p,f,g,m,_,v,y,w,b,t,x=W.jstree.reference(n.event.target),k=!1;if(x&&x._data&&x._data.dnd)if(S.attr("class","jstree-"+x.get_theme()+(x.settings.core.themes.responsive?" jstree-dnd-responsive":"")),y=n.data.origin&&(n.data.origin.settings.dnd.always_copy||n.data.origin.settings.dnd.copy&&(n.event.metaKey||n.event.ctrlKey)),n.helper.children().attr("class","jstree-"+x.get_theme()+" jstree-"+x.get_theme()+"-"+x.get_theme_variant()+" "+(x.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[y?"show":"hide"](),n.event.target!==x.element[0]&&n.event.target!==x.get_container_ul()[0]||0!==x.get_container_ul().children().length){if((k=x.settings.dnd.large_drop_target?W(n.event.target).closest(".jstree-node").children(".jstree-anchor"):W(n.event.target).closest(".jstree-anchor"))&&k.length&&k.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(b=k.offset(),t=(n.event.pageY!==$?n.event:n.event.originalEvent).pageY-b.top,a=k.outerHeight(),h=t<a/3?["b","i","a"]:a-a/3<t?["a","i","b"]:a/2<t?["i","a","b"]:["i","b","a"],W.each(h,function(e,t){switch(t){case"b":o=b.left-6,r=b.top,l=x.get_parent(k),c=k.parent().index();break;case"i":_=x.settings.dnd.inside_pos,v=x.get_node(k.parent()),o=b.left-2,r=b.top+a/2+1,l=v.id,c="first"===_?0:"last"===_?v.children.length:Math.min(_,v.children.length);break;case"a":o=b.left-6,r=b.top+a,l=x.get_parent(k),c=k.parent().index()+1}for(d=!0,u=0,p=n.data.nodes.length;u<p;u++)if(f=n.data.origin&&(n.data.origin.settings.dnd.always_copy||n.data.origin.settings.dnd.copy&&(n.event.metaKey||n.event.ctrlKey))?"copy_node":"move_node",g=c,"move_node"==f&&"a"===t&&n.data.origin&&n.data.origin===x&&l===x.get_parent(n.data.nodes[u])&&(m=x.get_node(l),g>W.inArray(n.data.nodes[u],m.children)&&--g),!(d=d&&(x&&x.settings&&x.settings.dnd&&!1===x.settings.dnd.check_while_dragging||x.check(f,n.data.origin&&n.data.origin!==x?n.data.origin.get_node(n.data.nodes[u]):n.data.nodes[u],l,g,{dnd:!0,ref:x.get_node(k.parent()),pos:t,origin:n.data.origin,is_multi:n.data.origin&&n.data.origin!==x,is_foreign:!n.data.origin})))){x&&x.last_error&&(C=x.last_error());break}if("i"===t&&k.parent().is(".jstree-closed")&&x.settings.dnd.open_timeout&&(z=setTimeout((s=k,function(){i.open_node(s)}),(i=x).settings.dnd.open_timeout)),d)return(w=x.get_node(l,!0)).hasClass(".jstree-dnd-parent")||(W(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),w.addClass("jstree-dnd-parent")),j={ins:x,par:l,pos:"i"!==t||"last"!==_||0!==c||x.is_loaded(v)?c:"last"},S.css({left:o+"px",top:r+"px"}).show(),n.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),n.event.originalEvent&&n.event.originalEvent.dataTransfer&&(n.event.originalEvent.dataTransfer.dropEffect=y?"copy":"move"),C={},!(h=!0);var i,s}),!0===h))return}else{for(d=!0,u=0,p=n.data.nodes.length;u<p&&(d=d&&x.check(n.data.origin&&(n.data.origin.settings.dnd.always_copy||n.data.origin.settings.dnd.copy&&(n.event.metaKey||n.event.ctrlKey))?"copy_node":"move_node",n.data.origin&&n.data.origin!==x?n.data.origin.get_node(n.data.nodes[u]):n.data.nodes[u],W.jstree.root,"last",{dnd:!0,ref:x.get_node(W.jstree.root),pos:"i",origin:n.data.origin,is_multi:n.data.origin&&n.data.origin!==x,is_foreign:!n.data.origin}));u++);if(d)return j={ins:x,par:W.jstree.root,pos:"last"},S.hide(),n.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(n.event.originalEvent&&n.event.originalEvent.dataTransfer&&(n.event.originalEvent.dataTransfer.dropEffect=y?"copy":"move"))}W(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),j=!1,n.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),n.event.originalEvent&&n.event.originalEvent.dataTransfer&&(n.event.originalEvent.dataTransfer.dropEffect="none"),S.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(S.hide(),T=j=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,t){if(W(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),z&&clearTimeout(z),t&&t.data&&t.data.jstree){S.hide().detach();var i,s,n=[];if(j){for(i=0,s=t.data.nodes.length;i<s;i++)n[i]=t.data.origin?t.data.origin.get_node(t.data.nodes[i]):t.data.nodes[i];j.ins[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(t.event.metaKey||t.event.ctrlKey))?"copy_node":"move_node"](n,j.par,j.pos,!1,!1,!1,t.data.origin)}else(i=W(t.event.target).closest(".jstree")).length&&C&&C.error&&"check"===C.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,C);j=T=!1}}).on("keyup.jstree keydown.jstree",function(e,t){(t=W.vakata.dnd._get())&&t.data&&t.data.jstree&&("keyup"===e.type&&27===e.which?(z&&clearTimeout(z),z=T=C=j=!1,S.hide().detach(),W.vakata.dnd._clean()):(t.helper.find(".jstree-copy").first()[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),T&&(T.metaKey=e.metaKey,T.ctrlKey=e.ctrlKey,W.vakata.dnd._trigger("move",T))))})}),f={element:!((p=W).vakata.html={div:p("<div />"),escape:function(e){return p.vakata.html.div.text(e).html()},strip:function(e){return p.vakata.html.div.empty().append(p.parseHTML(e)).text()}}),target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},p.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(e,t,i){i===$&&(i=p.vakata.dnd._get()),i.event=t,p(w).triggerHandler("dnd_"+e+".vakata",i)},_get:function(){return{data:f.data,element:f.element,helper:f.helper}},_clean:function(){f.helper&&f.helper.remove(),f.scroll_i&&(clearInterval(f.scroll_i),f.scroll_i=!1),f={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},p(w).off("mousemove.vakata.jstree touchmove.vakata.jstree",p.vakata.dnd.drag),p(w).off("mouseup.vakata.jstree touchend.vakata.jstree",p.vakata.dnd.stop)},_scroll:function(e){if(!f.scroll_e||!f.scroll_l&&!f.scroll_t)return f.scroll_i&&(clearInterval(f.scroll_i),f.scroll_i=!1),!1;if(!f.scroll_i)return f.scroll_i=setInterval(p.vakata.dnd._scroll,100),!1;if(!0===e)return!1;var t=f.scroll_e.scrollTop(),e=f.scroll_e.scrollLeft();f.scroll_e.scrollTop(t+f.scroll_t*p.vakata.dnd.settings.scroll_speed),f.scroll_e.scrollLeft(e+f.scroll_l*p.vakata.dnd.settings.scroll_speed),t===f.scroll_e.scrollTop()&&e===f.scroll_e.scrollLeft()||p.vakata.dnd._trigger("scroll",f.scroll_e)},start:function(e,t,i){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=w.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),f.is_drag&&p.vakata.dnd.stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(e){}return f.init_x=e.pageX,f.init_y=e.pageY,f.data=t,f.is_down=!0,f.element=e.currentTarget,f.target=e.target,f.is_touch="touchstart"===e.type,!1!==i&&(f.helper=p("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),p(w).on("mousemove.vakata.jstree touchmove.vakata.jstree",p.vakata.dnd.drag),p(w).on("mouseup.vakata.jstree touchend.vakata.jstree",p.vakata.dnd.stop),!1},drag:function(i){if("touchmove"===i.type&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=w.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),f.is_down){if(!f.is_drag){if(!(Math.abs(i.pageX-f.init_x)>(f.is_touch?p.vakata.dnd.settings.threshold_touch:p.vakata.dnd.settings.threshold)||Math.abs(i.pageY-f.init_y)>(f.is_touch?p.vakata.dnd.settings.threshold_touch:p.vakata.dnd.settings.threshold)))return;f.helper&&(f.helper.appendTo("body"),f.helper_w=f.helper.outerWidth()),f.is_drag=!0,p(f.target).one("click.vakata",!1),p.vakata.dnd._trigger("start",i)}var e,t,s,n,o=!1,r=!1,a=!1,l=!1,c=!1,h=!1;return f.scroll_t=0,f.scroll_l=0,f.scroll_e=!1,p(p(i.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(p(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var e=p(this),t=e.offset();if(this.scrollHeight>this.offsetHeight&&(t.top+e.height()-i.pageY<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=1),i.pageY-t.top<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(t.left+e.width()-i.pageX<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=1),i.pageX-t.left<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=-1)),f.scroll_t||f.scroll_l)return f.scroll_e=p(this),!1}),f.scroll_e||(o=p(w),r=p(window),a=o.height(),e=r.height(),l=o.width(),t=r.width(),s=o.scrollTop(),n=o.scrollLeft(),e<a&&i.pageY-s<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=-1),e<a&&e-(i.pageY-s)<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=1),t<l&&i.pageX-n<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=-1),t<l&&t-(i.pageX-n)<p.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=1),(f.scroll_t||f.scroll_l)&&(f.scroll_e=o)),f.scroll_e&&p.vakata.dnd._scroll(!0),f.helper&&(c=parseInt(i.pageY+p.vakata.dnd.settings.helper_top,10),h=parseInt(i.pageX+p.vakata.dnd.settings.helper_left,10),a&&a<c+25&&(c=a-50),l&&h+f.helper_w>l&&(h=l-(f.helper_w+2)),f.helper.css({left:h+"px",top:c+"px"})),p.vakata.dnd._trigger("move",i),!1}},stop:function(e){var t;return"touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=w.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),f.is_drag?(e.target!==f.target&&p(f.target).off("click.vakata"),p.vakata.dnd._trigger("stop",e)):"touchend"===e.type&&e.target===f.target&&(t=setTimeout(function(){p(e.target).click()},100),p(e.target).one("click",function(){t&&clearTimeout(t)})),p.vakata.dnd._clean(),!1}},W.jstree.defaults.massload=null,W.jstree.plugins.massload=function(e,h){this.init=function(e,t){this._data.massload={},h.init.call(this,e,t)},this._load_nodes=function(o,r,a,l){var e,t,c,i=this.settings.massload,s=(JSON.stringify(o),[]),n=this._model.data;if(!a){for(e=0,t=o.length;e<t;e++)n[o[e]]&&(n[o[e]].state.loaded||n[o[e]].state.failed)&&!l||(s.push(o[e]),(c=this.get_node(o[e],!0))&&c.length&&c.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},s.length){if(W.isFunction(i))return i.call(this,s,W.proxy(function(e){var t,i;if(e)for(t in e)e.hasOwnProperty(t)&&(this._data.massload[t]=e[t]);for(t=0,i=o.length;t<i;t++)(c=this.get_node(o[t],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);h._load_nodes.call(this,o,r,a,l)},this));if("object"==typeof i&&i&&i.url)return i=W.extend(!0,{},i),W.isFunction(i.url)&&(i.url=i.url.call(this,s)),W.isFunction(i.data)&&(i.data=i.data.call(this,s)),W.ajax(i).done(W.proxy(function(e,t,i){var s,n;if(e)for(s in e)e.hasOwnProperty(s)&&(this._data.massload[s]=e[s]);for(s=0,n=o.length;s<n;s++)(c=this.get_node(o[s],!0))&&c.length&&c.removeClass("jstree-loading").attr("aria-busy",!1);h._load_nodes.call(this,o,r,a,l)},this)).fail(W.proxy(function(e){h._load_nodes.call(this,o,r,a,l)},this))}}return h._load_nodes.call(this,o,r,a,l)},this._load_node=function(e,t){var i,s=this._data.massload[e.id];return s?(i=this["string"==typeof s?"_append_html_data":"_append_json_data"](e,"string"==typeof s?W(W.parseHTML(s)).filter(function(){return 3!==this.nodeType}):s,function(e){t.call(this,e)}),(s=this.get_node(e.id,!0))&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[e.id],i):h._load_node.call(this,e,t)}},W.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},W.jstree.plugins.search=function(e,a){this.bind=function(){a.bind.call(this),this._data.search.str="",this._data.search.dom=W(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",W.proxy(function(e,t){if(this._data.search.som&&t.res.length){for(var i,s,n=this._model.data,o=[],r=0,a=t.res.length;r<a;r++)if(n[t.res[r]]&&!n[t.res[r]].state.hidden&&(o.push(t.res[r]),o=o.concat(n[t.res[r]].parents),this._data.search.smc))for(i=0,s=n[t.res[r]].children_d.length;i<s;i++)n[n[t.res[r]].children_d[i]]&&!n[n[t.res[r]].children_d[i]].state.hidden&&o.push(n[t.res[r]].children_d[i]);o=W.vakata.array_remove_item(W.vakata.array_unique(o),W.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(o,!0),this.redraw(!0)}},this)).on("clear_search.jstree",W.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(s,e,t,i,n,o){if(!1===s||""===W.trim(s.toString()))return this.clear_search();i=(i=this.get_node(i))&&i.id?i.id:null,s=s.toString();var r,a,l=this.settings.search,c=!!l.ajax&&l.ajax,h=this._model.data,d=null,u=[],p=[];if(this._data.search.res.length&&!n&&this.clear_search(),t===$&&(t=l.show_only_matches),o===$&&(o=l.show_only_matches_children),!e&&!1!==c)return W.isFunction(c)?c.call(this,s,W.proxy(function(e){e&&e.d&&(e=e.d),this._load_nodes(W.isArray(e)?W.vakata.array_unique(e):[],function(){this.search(s,!0,t,i,n,o)})},this),i):((c=W.extend({},c)).data||(c.data={}),c.data.str=s,i&&(c.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=W.ajax(c).fail(W.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(c)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(W.proxy(function(e){e&&e.d&&(e=e.d),this._load_nodes(W.isArray(e)?W.vakata.array_unique(e):[],function(){this.search(s,!0,t,i,n,o)})},this)),this._data.search.lastRequest);if(n||(this._data.search.str=s,this._data.search.dom=W(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=t,this._data.search.smc=o),d=new W.vakata.search(s,!0,{caseSensitive:l.case_sensitive,fuzzy:l.fuzzy}),W.each(h[i||W.jstree.root].children_d,function(e,t){var i=h[t];i.text&&!i.state.hidden&&(!l.search_leaves_only||i.state.loaded&&0===i.children.length)&&(l.search_callback&&l.search_callback.call(this,s,i)||!l.search_callback&&d.search(i.text).isMatch)&&(u.push(t),p=p.concat(i.parents))}),u.length){for(r=0,a=(p=W.vakata.array_unique(p)).length;r<a;r++)p[r]!==W.jstree.root&&h[p[r]]&&!0===this.open_node(p[r],null,0)&&this._data.search.opn.push(p[r]);n?(this._data.search.dom=this._data.search.dom.add(W(this.element[0].querySelectorAll("#"+W.map(u,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(W.jstree.idregex,"\\$&"):e.replace(W.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=W.vakata.array_unique(this._data.search.res.concat(u))):(this._data.search.dom=W(this.element[0].querySelectorAll("#"+W.map(u,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(W.jstree.idregex,"\\$&"):e.replace(W.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=u),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:s,res:this._data.search.res,show_only_matches:t})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=W(this.element[0].querySelectorAll("#"+W.map(this._data.search.res,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(W.jstree.idregex,"\\$&"):e.replace(W.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=W()},this.redraw_node=function(e,t,i,s){if((e=a.redraw_node.apply(this,arguments))&&-1!==W.inArray(e.id,this._data.search.res)){for(var n=null,o=0,r=e.childNodes.length;o<r;o++)if(e.childNodes[o]&&e.childNodes[o].className&&-1!==e.childNodes[o].className.indexOf("jstree-anchor")){n=e.childNodes[o];break}n&&(n.className+=" jstree-search")}return e}},(u=W).vakata.search=function(m,e,_){_=_||{},!1!==(_=u.extend({},u.vakata.search.defaults,_)).fuzzy&&(_.fuzzy=!0),m=_.caseSensitive?m:m.toLowerCase();var v,y,w,t,b=_.location,i=_.distance,x=_.threshold,k=m.length;return 32<k&&(_.fuzzy=!1),_.fuzzy&&(v=1<<k-1,y=function(){for(var e={},t=0,t=0;t<k;t++)e[m.charAt(t)]=0;for(t=0;t<k;t++)e[m.charAt(t)]|=1<<k-t-1;return e}(),w=function(e,t){e/=k,t=Math.abs(b-t);return i?e+t/i:t?1:e}),t=function(e){if(e=_.caseSensitive?e:e.toLowerCase(),m===e||-1!==e.indexOf(m))return{isMatch:!0,score:0};if(!_.fuzzy)return{isMatch:!1,score:1};var t,i,s,n,o,r,a,l,c,h=e.length,d=x,u=e.indexOf(m,b),p=k+h,f=1,g=[];for(-1!==u&&(d=Math.min(w(0,u),d),-1!==(u=e.lastIndexOf(m,b+k))&&(d=Math.min(w(0,u),d))),u=-1,t=0;t<k;t++){for(s=0,n=p;s<n;)w(t,b+n)<=d?s=n:p=n,n=Math.floor((p-s)/2+s);for(p=n,r=Math.max(1,b-n+1),a=Math.min(b+n,h)+k,(l=new Array(a+2))[a+1]=(1<<t)-1,i=a;r<=i;i--)if(c=y[e.charAt(i-1)],l[i]=0===t?(l[i+1]<<1|1)&c:(l[i+1]<<1|1)&c|(o[i+1]|o[i])<<1|1|o[i+1],l[i]&v&&(f=w(t,i-1))<=d){if(d=f,u=i-1,g.push(u),!(b<u))break;r=Math.max(1,2*b-u)}if(w(t+1,b)>d)break;o=l}return{isMatch:0<=u,score:f}},!0===e?{search:t}:t(e)},u.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1},W.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1};var s=!(W.jstree.plugins.sort=function(e,t){this.bind=function(){t.bind.call(this),this.element.on("model.jstree",W.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",W.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",W.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(e,t){var i,s;if((e=this.get_node(e))&&e.children&&e.children.length&&(e.children.sort(W.proxy(this.settings.sort,this)),t))for(i=0,s=e.children_d.length;i<s;i++)this.sort(e.children_d[i],!1)}});W.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},W.jstree.plugins.state=function(e,t){this.bind=function(){t.bind.call(this);var i=W.proxy(function(){this.element.on(this.settings.state.events,W.proxy(function(){s&&clearTimeout(s),s=setTimeout(W.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",W.proxy(function(e,t){this.element.one("restore_state.jstree",i),this.restore_state()||i()},this))},this.save_state=function(){var e={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};W.vakata.storage.set(this.settings.state.key,JSON.stringify(e))},this.restore_state=function(){var i=W.vakata.storage.get(this.settings.state.key);if(i)try{i=JSON.parse(i)}catch(e){return!1}return!(i&&i.ttl&&i.sec&&+new Date-i.sec>i.ttl||(i&&i.state&&(i=i.state),i&&W.isFunction(this.settings.state.filter)&&(i=this.settings.state.filter.call(this,i)),!i||(this.element.one("set_state.jstree",function(e,t){t.instance.trigger("restore_state",{state:W.extend(!0,{},i)})}),this.set_state(i),0)))},this.clear_state=function(){return W.vakata.storage.del(this.settings.state.key)}},W.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}},W.jstree.defaults.types={default:{}},W.jstree.defaults.types[W.jstree.root]={},W.jstree.plugins.types=function(e,h){this.init=function(e,t){var i,s;if(t&&t.types&&t.types.default)for(i in t.types)if("default"!==i&&i!==W.jstree.root&&t.types.hasOwnProperty(i))for(s in t.types.default)t.types.default.hasOwnProperty(s)&&t.types[i][s]===$&&(t.types[i][s]=t.types.default[s]);h.init.call(this,e,t),this._model.data[W.jstree.root].type=W.jstree.root},this.refresh=function(e,t){h.refresh.call(this,e,t),this._model.data[W.jstree.root].type=W.jstree.root},this.bind=function(){this.element.on("model.jstree",W.proxy(function(e,t){for(var i,s=this._model.data,n=t.nodes,o=this.settings.types,r="default",a=0,l=n.length;a<l;a++){if(r="default",s[n[a]].original&&s[n[a]].original.type&&o[s[n[a]].original.type]&&(r=s[n[a]].original.type),s[n[a]].data&&s[n[a]].data.jstree&&s[n[a]].data.jstree.type&&o[s[n[a]].data.jstree.type]&&(r=s[n[a]].data.jstree.type),s[n[a]].type=r,!0===s[n[a]].icon&&o[r].icon!==$&&(s[n[a]].icon=o[r].icon),o[r].li_attr!==$&&"object"==typeof o[r].li_attr)for(i in o[r].li_attr)if(o[r].li_attr.hasOwnProperty(i)){if("id"===i)continue;s[n[a]].li_attr[i]===$?s[n[a]].li_attr[i]=o[r].li_attr[i]:"class"===i&&(s[n[a]].li_attr.class=o[r].li_attr.class+" "+s[n[a]].li_attr.class)}if(o[r].a_attr!==$&&"object"==typeof o[r].a_attr)for(i in o[r].a_attr)if(o[r].a_attr.hasOwnProperty(i)){if("id"===i)continue;s[n[a]].a_attr[i]===$?s[n[a]].a_attr[i]=o[r].a_attr[i]:"href"===i&&"#"===s[n[a]].a_attr[i]?s[n[a]].a_attr.href=o[r].a_attr.href:"class"===i&&(s[n[a]].a_attr.class=o[r].a_attr.class+" "+s[n[a]].a_attr.class)}}s[W.jstree.root].type=W.jstree.root},this)),h.bind.call(this)},this.get_json=function(e,t,i){var s,n,o=this._model.data,r=t?W.extend(!0,{},t,{no_id:!1}):{},a=h.get_json.call(this,e,r,i);if(!1===a)return!1;if(W.isArray(a))for(s=0,n=a.length;s<n;s++)a[s].type=a[s].id&&o[a[s].id]&&o[a[s].id].type?o[a[s].id].type:"default",t&&t.no_id&&(delete a[s].id,a[s].li_attr&&a[s].li_attr.id&&delete a[s].li_attr.id,a[s].a_attr&&a[s].a_attr.id&&delete a[s].a_attr.id);else a.type=a.id&&o[a.id]&&o[a.id].type?o[a.id].type:"default",t&&t.no_id&&(a=this._delete_ids(a));return a},this._delete_ids=function(e){if(W.isArray(e)){for(var t=0,i=e.length;t<i;t++)e[t]=this._delete_ids(e[t]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&W.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(e,t,i,s,n){if(!1===h.check.call(this,e,t,i,s,n))return!1;t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var o,r,a,l,c=(c=t&&t.id?n&&n.origin?n.origin:W.jstree.reference(t.id):null)&&c._model&&c._model.data?c._model.data:null;switch(e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===W.inArray(t.id,i.children)){if((o=this.get_rules(i)).max_children!==$&&-1!==o.max_children&&o.max_children===i.children.length)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(o.valid_children!==$&&-1!==o.valid_children&&-1===W.inArray(t.type||"default",o.valid_children))return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(c&&t.children_d&&t.parents){for(a=r=0,l=t.children_d.length;a<l;a++)r=Math.max(r,c[t.children_d[a]].parents.length);r=r-t.parents.length+1}(r<=0||r===$)&&(r=1);do{if(o.max_depth!==$&&-1!==o.max_depth&&o.max_depth<r)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})}while(i=this.get_node(i.parent),o=this.get_rules(i),r++,i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;e=this.get_type(e,!0);return e.max_depth===$&&(e.max_depth=-1),e.max_children===$&&(e.max_children=-1),e.valid_children===$&&(e.valid_children=-1),e},this.get_type=function(e,t){return!!(e=this.get_node(e))&&(t?W.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,t){var i,s,n,o,r,a,l,c,h=this._model.data;if(W.isArray(e)){for(s=0,n=(e=e.slice()).length;s<n;s++)this.set_type(e[s],t);return!0}if(i=this.settings.types,e=this.get_node(e),!i[t]||!e)return!1;if((l=this.get_node(e,!0))&&l.length&&(c=l.children(".jstree-anchor")),o=e.type,r=this.get_icon(e),e.type=t,!0!==r&&i[o]&&(i[o].icon===$||r!==i[o].icon)||this.set_icon(e,i[t].icon===$||i[t].icon),i[o]&&i[o].li_attr!==$&&"object"==typeof i[o].li_attr)for(a in i[o].li_attr)if(i[o].li_attr.hasOwnProperty(a)){if("id"===a)continue;"class"===a?(h[e.id].li_attr.class=(h[e.id].li_attr.class||"").replace(i[o].li_attr[a],""),l&&l.removeClass(i[o].li_attr[a])):h[e.id].li_attr[a]===i[o].li_attr[a]&&(h[e.id].li_attr[a]=null,l&&l.removeAttr(a))}if(i[o]&&i[o].a_attr!==$&&"object"==typeof i[o].a_attr)for(a in i[o].a_attr)if(i[o].a_attr.hasOwnProperty(a)){if("id"===a)continue;"class"===a?(h[e.id].a_attr.class=(h[e.id].a_attr.class||"").replace(i[o].a_attr[a],""),c&&c.removeClass(i[o].a_attr[a])):h[e.id].a_attr[a]===i[o].a_attr[a]&&("href"===a?(h[e.id].a_attr[a]="#",c&&c.attr("href","#")):(delete h[e.id].a_attr[a],c&&c.removeAttr(a)))}if(i[t].li_attr!==$&&"object"==typeof i[t].li_attr)for(a in i[t].li_attr)if(i[t].li_attr.hasOwnProperty(a)){if("id"===a)continue;h[e.id].li_attr[a]===$?(h[e.id].li_attr[a]=i[t].li_attr[a],l&&("class"===a?l.addClass(i[t].li_attr[a]):l.attr(a,i[t].li_attr[a]))):"class"===a&&(h[e.id].li_attr.class=i[t].li_attr[a]+" "+h[e.id].li_attr.class,l&&l.addClass(i[t].li_attr[a]))}if(i[t].a_attr!==$&&"object"==typeof i[t].a_attr)for(a in i[t].a_attr)if(i[t].a_attr.hasOwnProperty(a)){if("id"===a)continue;h[e.id].a_attr[a]===$?(h[e.id].a_attr[a]=i[t].a_attr[a],c&&("class"===a?c.addClass(i[t].a_attr[a]):c.attr(a,i[t].a_attr[a]))):"href"===a&&"#"===h[e.id].a_attr[a]?(h[e.id].a_attr.href=i[t].a_attr.href,c&&c.attr("href",i[t].a_attr.href)):"class"===a&&(h[e.id].a_attr.class=i[t].a_attr.class+" "+h[e.id].a_attr.class,c&&c.addClass(i[t].a_attr[a]))}return!0}},W.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},W.jstree.plugins.unique=function(e,p){this.check=function(e,t,i,s,n){if(!1===p.check.call(this,e,t,i,s,n))return!1;if(t=t&&t.id?t:this.get_node(t),!(i=i&&i.id?i:this.get_node(i))||!i.children)return!0;for(var o="rename_node"===e?s:t.text,r=[],a=this.settings.unique.case_sensitive,l=this._model.data,c=0,h=i.children.length;c<h;c++)r.push(a?l[i.children[c]].text:l[i.children[c]].text.toLowerCase());switch(a||(o=o.toLowerCase()),e){case"delete_node":return!0;case"rename_node":return(c=-1===W.inArray(o,r)||t.text&&t.text[a?"toString":"toLowerCase"]()===o)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+o+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),c;case"create_node":return(c=-1===W.inArray(o,r))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+o+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),c;case"copy_node":return(c=-1===W.inArray(o,r))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+o+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),c;case"move_node":return(c=t.parent===i.id&&(!n||!n.is_multi)||-1===W.inArray(o,r))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+o+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:s,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),c}return!0},this.create_node=function(e,t,i,s,n){if(!t||t.text===$){if(null===e&&(e=W.jstree.root),!(e=this.get_node(e)))return p.create_node.call(this,e,t,i,s,n);if(!(i=i===$?"last":i).toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(e))return p.create_node.call(this,e,t,i,s,n);t=t||{};for(var o,r=this._model.data,a=this.settings.unique.case_sensitive,l=this.settings.unique.duplicate,c=o=this.get_string("New node"),h=[],d=0,u=e.children.length;d<u;d++)h.push(a?r[e.children[d]].text:r[e.children[d]].text.toLowerCase());for(d=1;-1!==W.inArray(a?c:c.toLowerCase(),h);)c=l.call(this,o,++d).toString();t.text=c}return p.create_node.call(this,e,t,i,s,n)}};var d=w.createElement("DIV");if(d.setAttribute("unselectable","on"),d.setAttribute("role","presentation"),d.className="jstree-wholerow",d.innerHTML="&#160;",W.jstree.plugins.wholerow=function(e,o){this.bind=function(){o.bind.call(this),this.element.on("ready.jstree set_state.jstree",W.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",W.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",W.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",W.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");for(var i=!1,s=0,n=t.selected.length;s<n;s++)(i=this.get_node(t.selected[s],!0))&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",W.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",W.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",W.proxy(function(e){var t;this._data.contextmenu&&(e.preventDefault(),t=W.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY}),W(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t))},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=W.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});W(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=W.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});W(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",W.proxy(function(e){e.stopImmediatePropagation();var t=W.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});W(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",W.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",W.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),o.teardown.call(this)},this.redraw_node=function(e,t,i,s){var n;return(e=o.redraw_node.apply(this,arguments))&&(n=d.cloneNode(!0),-1!==W.inArray(e.id,this._data.core.selected)&&(n.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(n.className+=" jstree-wholerow-hovered"),e.insertBefore(n,e.childNodes[0])),e}},w.registerElement&&Object&&Object.create){var t=Object.create(HTMLElement.prototype);t.createdCallback=function(){var e,t={core:{},plugins:[]};for(e in W.jstree.plugins)W.jstree.plugins.hasOwnProperty(e)&&this.attributes[e]&&(t.plugins.push(e),this.getAttribute(e)&&JSON.parse(this.getAttribute(e))&&(t[e]=JSON.parse(this.getAttribute(e))));for(e in W.jstree.defaults.core)W.jstree.defaults.core.hasOwnProperty(e)&&this.attributes[e]&&(t.core[e]=JSON.parse(this.getAttribute(e))||this.getAttribute(e));W(this).jstree(t)};try{w.registerElement("vakata-jstree",{prototype:t})}catch(W){}}}var u,p,f,g,m,_});